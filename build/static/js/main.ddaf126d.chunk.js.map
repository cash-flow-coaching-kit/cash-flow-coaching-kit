{"version":3,"sources":["data/ActionChecklist/_config/utilities.ts","components/Spacer/index.ts","state/client/useCurrentClient.tsx","data/_config/logicLayer.ts","util/routes/routes.ts","util/localStorage/client.ts","state/CFC/shape.ts","state/client/client-context.tsx","components/Navbar/_config/style.ts","data/client/ClientDatabase.ts","data/CFC/CFCDatabase.ts","data/ActionChecklist/PriorityLogic.ts","components/Loading/_config/styles.ts","components/Loading/Loading.tsx","state/CFC/context.tsx","data/client/ClientLogic.ts","components/DescriptiveMoneyInput/__config/styles.ts","components/Logo/Logo.tsx","data/ActionChecklist/ChecklistLogic.ts","util/reduce/math.ts","data/CFC/CFCLogic.ts","data/healthChecks/HealthCheckDatabase.ts","util/strings/concatStr.ts","components/Navbar/_partials/NavigationLinks.tsx","components/Navbar/Primary/PrimaryNavbar.tsx","components/Navbar/Secondary/SecondaryNavbar.tsx","components/Navbar/Public/_config/data.ts","components/Navbar/Public/PublicNavbar.tsx","components/ExpandableNav/_config/styles.ts","components/ExpandableNav/ExpandableNav.tsx","util/lists/key.ts","util/dates/index.ts","util/object/hasProperty.ts","components/CFC/CanvasType.tsx","util/strings/upperCaseFirst.ts","components/CFC/CanvasTimeFrame.tsx","data/client/syncWithDB.ts","components/DateRange/__partials/SinglePicker.tsx","components/DateRange/DateRange.tsx","components/CFC/UseCustomTitle.tsx","components/CFC/ConfigPanel.tsx","components/SelectField/SelectField.tsx","components/Navbar/Primary/_config/styles.ts","components/Navbar/Primary/_config/data.ts","components/Navbar/Secondary/_config/data.ts","components/Logout/Logout.tsx","components/MoneyInput/MoneyInput.tsx","util/routes/checkIfPublic.ts","components/Navbar/Mobile/MobileNavbar.tsx","theme/mui/themes.ts","util/routes/routeTheming.ts","components/Layouts/PrivatePage/PrivatePage.tsx","components/Layouts/PageContainer/_config/styles.ts","components/Layouts/PageContainer/PageContainer.tsx","components/CFC/OpeningBalance.tsx","components/ComputedPanels/ComputedPanels.tsx","components/CFC/CashSurplus.tsx","components/CFC/AvailableToSpend.tsx","components/CFC/CanvasTitle.tsx","components/CFC/CashToOwner.tsx","components/CFC/ClosingBalance.tsx","components/CFC/CashBalance.tsx","components/CFC/IncomeTax.tsx","components/CFC/FallingBehind.tsx","components/CFC/Debtors.tsx","components/CFC/Creditors.tsx","components/CFC/Assets.tsx","components/CFC/Loans.tsx","components/CFC/Stock.tsx","components/CFC/FormHeader.tsx","components/CFC/FormActions.tsx","components/CFC/FormItem.tsx","components/CFC/RepeaterForm.tsx","components/CFC/CFCFourQuestions.tsx","util/money/formatting.ts","components/HealthCheck/_config/data.ts","state/action-checklist/context.tsx","state/action-checklist/actions/changeHideCompleted.ts","state/action-checklist/actions/updateDatabaseSync.ts","state/action-checklist/actions/addNewActionItem.ts","state/action-checklist/actions/updateActionItem.ts","state/action-checklist/actions/updatePriorityOrder.ts","util/filters/ByEquals.ts","state/action-checklist/actions/removeActionItem.ts","state/action-checklist/actions/addNote.ts","state/action-checklist/actions/updateNote.ts","state/action-checklist/actions/removeNote.ts","state/action-checklist/actions/bulkAddActionItems.ts","state/action-checklist/reducer.ts","state/action-checklist/provider.tsx","data/ActionChecklist/NotesLogic.ts","components/HealthCheck/_config/utilities.ts","util/filters/ByActionContainer.ts","util/filters/ByGSTApplicable.ts","util/money/gst.ts","state/CFC/accumulators.ts","components/ConfirmDialogue/ConfirmDialogue.tsx","components/HealthCheck/FourQuestions/_config/styles.ts","components/IconDeleteButton/IconDeleteButton.tsx","components/Forms/CFC/__config/machine.ts","data/client/addClient.ts","components/Forms/NewClient/_config/styles.ts","components/Forms/NewClient/NewClientForm.tsx","content/dialog/NewClientDialog.tsx","components/Forms/CFC/inPlanOrForecast.ts","content/dialog/CopyCanvasDialog.tsx","modules/import-client/index.ts","content/dialog/ImportClientDialog.tsx","components/CFC/Super.tsx","components/CFC/PayG.tsx","components/Forms/CFC/changeDate.ts","components/CFC/__config/utilities.ts","components/CFC/DataNotFound.tsx","util/array/findObjectIndexByValue.ts","components/Forms/CFC/createURLParams.ts","util/readFile/index.ts","components/DescriptiveMoneyInput/DescriptiveMoneyInput.tsx","util/filters/ById.ts","pages/index.tsx","components/Routing/Public/PublicRoutesWrapper.tsx","state/CFC/reducer.tsx","state/CFC/actions/setDuplicateError.ts","state/CFC/actions/setInvalidDateError.ts","state/CFC/actions/setQuestionValues.ts","state/CFC/actions/setCompareCanvases.ts","state/CFC/actions/setCopyCanvasActive.ts","state/CFC/provider.tsx","components/Routing/Private/PrivateRoutesWrapper.tsx","components/Routing/Router.tsx","App.tsx","serviceWorker.ts","index.tsx","state/client/client-outline.ts","state/client/actions/addClient.ts","state/client/actions/bulkAdd.ts","state/client/actions/changeCurrentClient.ts","state/client/actions/updateClientSynced.ts","state/client/actions/removeClient.ts","state/client/actions/changeLastViewedHC.ts","state/client/client-reducer.ts","state/client/client-provider.tsx","components/CFC/__config/styles.ts","data/ActionChecklist/ActionChecklistDatabase.ts","state/action-checklist/shape.ts","components/Spacer/Spacer.tsx"],"names":["findByClientAndContainer","actionContainer","clientId","db","table","transaction","where","toArray","newChecklistItem","container","description","completed","reviewBy","Date","newPriorityItem","order","newNotesItem","notes","bulkAddChecklists","items","priorityId","a","ActionPriorityUseCase","findById","priority","ActionChecklistUseCase","bulkPut","ids","newOrder","concat","console","log","uniq","update","completedItems","map","item","idx","id","useCurrentClient","useContext","ClientContext","state","currentClient","clientSynced","ILogicLayer","database","data","this","name","add","uuidv4","equals","delete","defaultCreate","defaultSync","defaultDelete","defaultUpdate","addItems","reduce","acc","cur","bulkAdd","allKeys","putItems","hasProperty","get","toCollection","last","PrivateRoutes","PublicRoutes","routeVarReplacement","route","replacements","s","rep","replace","toString","emptyClientValue","setStorageClient","window","localStorage","setItem","getStorageClient","getItem","removeStorageClient","removeItem","CFCActionTypes","defaultClientState","clients","lastViewedHC","dispatch","createContext","useSharedNavStyles","makeStyles","root","flexGrow","box","display","justifyContent","button","textTransform","logoBox","small","publicLogo","color","ClientDB","applyMigrations","replaceIdsWithStrings","version","stores","modify","client","Dexie","CFCDB","canvases","canvas","ActionChecklistDB","useLoadingStyles","theme","paddingTop","spacing","paddingBottom","Loading","styles","Box","className","CircularProgress","defaultCFCState","duplicateError","invalidDateError","copyCanvasActive","questionValues","one","two","three","four","undefined","CFCContext","ClientUseCase","useStyles","props","flexDirection","stacked","height","fullHeight","breakpoints","down","alignItem","type","paddingRight","marginBottom","fontWeight","typography","fontWeightRegular","fontSize","mini","body1","h6","palette","grey","moneyInput","up","maxWidth","marginTop","alignItems","img","marginRight","link","textDecoration","text","primary","pxToRem","position","width","padding","margin","overflow","clip","whiteSpace","borderWidth","Logo","to","cls","src","alt","Typography","variant","actionItems","numOrZero","val","num","parseInt","isNaN","sum","x","minusBy","divideBy","pipe","fns","v","f","CFCUseCase","count","timeframe","canvasType","canvasTimeFrame","HealthCheckDB","healthChecks","healthCheck","concatStr","RouteWithChildren","childRoutes","buttonProps","React","useState","anchorEl","setAnchorEl","handleClose","Button","aria-controls","aria-haspopup","component","RouterLink","onClick","event","preventDefault","currentTarget","endIcon","title","Menu","keepMounted","open","Boolean","onClose","MenuItem","subMenuTitle","Divider","child","key","NavigationRoutes","routes","generateKey","useTheme","children","constructKey","startIcon","Icon","activeStyle","fontWeightBold","PrimaryNavbar","sharedStyle","usePrimaryStyles","AppBar","Toolbar","Grid","sm","md","lg","clientGridItem","clientCaption","clientName","Home","Logout","SecondaryNavbar","navRoutes","useMemo","HealthCheckSummary","ClientList","RecentActorsIcon","PublicNavbar","hasClients","useExpandableNavStyles","details","paddingLeft","summary","subHeading","caption","memo","defaultExpanded","ExpansionPanel","TransitionProps","unmountOnExit","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","getTime","newTimestamp","calculatedEndDate","start","addWeeks","addMonths","addYears","obj","prop","Object","prototype","hasOwnProperty","call","onChange","value","label","options","canvasTypeOptions","upperFirst","lower","c","toUpperCase","canvasTimeFrameOptions","syncClientsWithDb","syncWithDatabase","ClientActionTypes","BulkAdd","payload","currentStorageClient","filtered","filter","filterById","ChangeCurrentClient","UpdateClientSynced","dateHighlight","borderColor","main","borderStyle","compare","onOpen","compareDay","minDate","curStyles","useDayStyles","customCls","disableToolbar","inputVariant","date","format","renderDay","day","selectedDate","isInCurrentMonth","dayComponent","isSameDay","cloneElement","fullWidth","separator","lineHeight","DateRange","startDate","endDate","end","setOpen","classes","openStart","useCallback","openEnd","onDateChange","useEffect","utils","DateFnsUtils","UseCustomTitle","useCustom","changeCheck","useCustomTitleStyles","TextField","textField","checkboxRoot","FormControlLabel","control","Checkbox","checked","Tooltip","divider","DuplicateCanvasError","Alert","severity","Panel","canvasTimeframeValue","canvasTypeValue","customTitle","useCustomTitle","useParams","fetchPossibleDups","performDupFind","canvasEndDate","canvasStartDate","canvasTitle","dup","ChangeDuplicateError","ChangeInvalidDateError","isValid","xs","CanvasType","CanvasTimeFrame","wrapped","showDuplicateError","wrapperCls","useInputWrapper","wrapper","Spacer","FormControl","InputLabel","Select","labelId","opt","SessionFiles","DescriptionIcon","CoachingKit","HealthCheckQuiz","DiscoverTopics","CFC","ChangeLevers","ActionChecklist","createStyles","backdrop","zIndex","drawer","loading","setLoading","exitApplication","close","location","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","disabled","autoFocus","Backdrop","useMimic","setUseMimic","error","setError","input","useRef","InputProps","startAdornment","InputAdornment","endAdornment","inputProps","min","max","step","ref","placeholder","e","inputVal","target","startsWith","length","match","onBlur","onFocus","current","setSelectionRange","onMouseUp","formatNumber","helperText","checkIfPublic","values","indexOf","pathname","toolbar","logo","clientBox","minWidth","childList","marginLeft","borderBottom","MobileNavbar","primaryStyle","useLocation","closeDrawer","renderRoutes","ListItem","NavLink","ListItemIcon","ListItemText","List","IconButton","aria-label","edge","orientation","flexItem","Drawer","anchor","paper","secondaryRoutes","primaryRoutes","style","defaultTheme","createMuiTheme","indigo","secondary","applyTheme","green","discoverTheme","purple","planActionTheme","lightBlue","A700","settingsTheme","deepOrange","A400","applyThemeRoutes","CFCCompare","CFCEdit","CFCListing","discoverThemeRoutes","DTTrackingPerformance","DTSellingClosingSuccession","DTRecordKeeping","DTPlanningFinanicalCommitments","DTPlanningBusiness","DTManagingCashFlow","DTFundingBusiness","HealthCheckList","planActionThemeRoutes","settingsThemeRoutes","determineTheme","path","desktop","mobile","PrivatePage","history","useHistory","push","ThemeProvider","usePCStyles","PageContainer","rest","Container","OpeningBalance","DescriptiveMoneyInput","useComputedStyles","dmiCls","computedCls","CashSurplus","addDollarSign","noTitle","AddTitle","generateTitle","CashToOwner","ClosingBalance","CashBalance","cashToOwner","closingBalance","useCustomStyles","textfield","calculated","cusCls","highlight","trim","total","stock","creditors","debtors","assets","loans","totalNetAssets","ExpandableNav","Debtors","Creditors","Loans","Stock","fontWeightMedium","DescriptionSize","AmountSize","ApplyGSTSize","ActionsSize","FormActions","addItem","addDisabled","actionGridItem","index","dialogOpen","setDialogOpen","onDialogClose","MoneyInput","amount","gstApplicable","IconDeleteButton","ConfirmDialogue","onCancel","onConfirm","gst","beforeTotalChild","removeFormItem","isAddDisabled","findIndex","body","mobileNotice","fontStyle","form","formInner","tooltipContent","valueText","questionTwo","content","background","orange","top","left","CFCFourQuestions","useFourQsStyles","list","fourQuestionsContent","listItem","listItemFirst","listItemText","vals","getValueText","toTwoDecimal","Number","parseFloat","toFixed","removeTrailingZeros","re","RegExp","n","additionalQuestionsOptions","positive","negative","neutral","questions","questionOptionsMap","question","learnMore","answerTheming","EmojiEmotionsOutlinedIcon","answer","SentimentVeryDissatisfiedIcon","red","SentimentDissatisfiedIcon","defaultActionChecklistState","hideCompleted","databaseSyced","checklistCollection","ActionChecklistContext","changeHideCompleted","updateDatabaseSync","addNewActionItem","checklist","pID","newPriority","collection","updateActionItem","newChecklist","checklists","updatePriorityOrder","filterByEquals","reject","res","removeActionItem","targetId","addNote","updateNote","newNotes","removeNote","filteredNotes","bulkAddActionItem","additionalOrders","arr","priorities","find","appendOrCreatePriority","ActionChecklistReducer","action","ActionChecklistActionTypes","ChangeHideCompleted","UpdateDatabaseSync","AddNewActionItem","UpdateActionItem","UpdatePriorityOrder","RemoveActionItem","AddNotes","UpdateNotes","RemoveNote","BulkAddActionItems","createChecklistIfNeeded","curData","curPriority","curNotes","filterByActionContainer","newItem","create","priorityWithItem","dataWithItem","ActionChecklistProvider","useReducer","Promise","all","findByClient","ActionNotesUseCase","then","response","CIA","COA","completeSyncing","Provider","put","getOptionByAnswer","findObjectIndexByValue","q","GSTApplicable","calculateGST","getKeyValue","k","calcCashFlowGST","Math","round","calcCashFlowGSTTotal","removeGST","calcCashFlowTotal","calcCashFlowNonGSTTotal","calcTotalCashOut","paygWithholding","superAmount","cashOutItems","calcCashSurplus","cashInItems","calcIncomeTaxPer","incomeTax","calcAvailableToSpend","openingBalance","calcClosingBalance","calcTotalNetAssets","confirmText","cancelText","Children","borderTop","border","answerIconRoot","fetchMachine","Machine","initial","states","on","RESOLVE","REJECT","success","failure","RETRY","addClient","newclient","AddClient","useClientFormStyles","NewClientForm","closeDialog","characters","setCharacters","useFormik","initialValues","businessName","validate","errors","onSubmit","resetForm","hasError","noValidate","autoComplete","handleSubmit","setFieldValue","isSubmitting","useNCDStyles","NewClientDialog","triggerText","size","aria-labelledby","cb","inPlanOrForecast","CopyCanvasDialog","useMachine","stateMachine","changeState","setUseCustomTitle","canvasData","setCanvasData","isDuplicate","setIsDuplicate","formValues","oldType","createdAt","cleaned","omit","newCanvasId","query","createURLParams","setValues","handleChange","fetchCanvasData","isDup","checkDuplicate","changeDateValue","changeDate","DataNotFound","space","renderForStateMachine","loadBlobAsJSON","blob","readFile","file","Error","json","JSON","parse","message","validateJSONData","keys","isEqual","i","formatName","importToDatabase","Blob","stringify","importInto","overwriteValues","overwriteClientIds","newId","set","newPriorityIds","cashInActions","cashOutActions","planningBusiness","planningCommitments","funding","recordKeeping","managing","tracking","transition","forEach","dataArr","dIdx","rows","row","rIdx","tableName","ImportClient","overwrite","promises","ClientDatabase","resolve","HealthCheckDatabase","ActionChecklistDatabase","CFCDatabase","filename","fileactions","result","importClientMachine","idle","FETCH","databaseConfig","successContent","isfalse","icon","RemoveCircleOutlineIcon","istrue","CheckCircleOutlineIcon","iserror","HighlightOffIcon","ImportClientDialog","machine","send","errorMsg","setErrorMsg","setResponse","setFile","dupClient","setDupClient","setOverwrite","checkForExistingClient","possibleClient","startImporting","RetryButton","FileUpload","htmlFor","accept","files","FileActions","ShowFailure","ShowSuccess","config","overwriteOnChange","DialogBody","Switch","Super","PayG","reduceToOptions","canvasDisplayTitle","identifyIfDuplicate","dups","usingCustom","canvasId","withoutCurrentCanvas","slice","findPossibleDuplicates","calcQuestionOne","cashSurplus","calcQuestionTwo","payg","gstOnPurchases","gstOnSales","calcQuestionThree","calcQuestionFour","right","URLSearchParams","append","fr","FileReader","onerror","onloadend","readAsText","textfieldProps","useHomepageStyles","grid","buttonBox","embed","minHeight","containerIndigo","backgroundColor","containerGrey","contentText","alignJustifyContent","flexWrap","alignContent","getContrastText","blue","MainHeading","SectionTitle","Homepage","role","align","Avatar","justify","Card","CardHeader","CardMedia","CardActions","href","rel","PublicRoutesWrapper","exact","CFCReducer","setDuplicateError","setInvalidDateError","ChangeQuestionValues","setQuestionValues","ChangeCompare","leftCompare","rightCompare","setCompareCanvases","ChangeCopyCanvasActive","setCopyCanvasActive","CFCProvider","LoadableFallback","loadable","fallback","HCQuestionnaire","DTListing","CFCCanvas","HCListing","HCSummary","CanvasEdit","PrivateRoutesWrapper","ScrollToTop","scrollTo","AppRouter","App","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","onbeforeunload","returnValue","newClients","changeCurrentClient","updateClientSynced","removeClient","changeLastViewedHC","ClientReducer","RemoveClient","UpdateLastViewedHC","ClientProvider","borderRadius","shape","boxShadow","shadows","highlightLeft","borderLeft","plain","useRepeaterStyles","overflowX","note","prior","o"],"mappings":"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","file":"static/js/main.ddaf126d.chunk.js","sourcesContent":["import Dexie from \"dexie\"\nimport { uniq } from \"lodash-es\"\nimport { PossibleActionItems } from \"../../../state/action-checklist/shape\"\nimport {\n\tDatabaseId,\n\tClientId,\n\tActionChecklistStruct,\n\tActionChecklistPriorityStruct,\n\tActionChecklistNotesStruct,\n\tActionChecklistPriorityId,\n} from \"../../_config/shape\"\nimport ActionChecklistUseCase from \"../ChecklistLogic\"\nimport ActionPriorityUseCase from \"../PriorityLogic\"\n\n/**\n * Finds a item by the `actionContainer` and `clientId` key\n *\n * @param {PossibleActionItems} actionContainer Container to query for\n * @param {ClientId} clientId Client to query for\n * @param {Dexie} db Database instance that extends Dexie\n * @param {Dexie.Table<T, DatabaseId>} table Table within the provided database\n * @returns Promise<T[]>\n */\nexport const findByClientAndContainer = <T>(\n\tactionContainer: PossibleActionItems,\n\tclientId: ClientId,\n\tdb: Dexie,\n\ttable: Dexie.Table<T, DatabaseId>\n): Promise<T[]> => {\n\treturn db.transaction(\"r\", table, () => {\n\t\treturn table.where({ actionContainer, clientId }).toArray()\n\t})\n}\n\n/**\n * Creates the structure for a new checklist item\n *\n * @param {ClientId} clientId\n * @param {PossibleActionItems} container\n * @returns ActionChecklistStruct\n */\nexport const newChecklistItem = (\n\tclientId: ClientId,\n\tcontainer: PossibleActionItems\n): ActionChecklistStruct => ({\n\tclientId,\n\tactionContainer: container,\n\tdescription: \"\",\n\tcompleted: false,\n\treviewBy: new Date(),\n})\n\n/**\n * Creates the structure for a new priority item\n *\n * @param {ClientId} clientId\n * @param {PossibleActionItems} container\n * @returns ActionChecklistPriorityStruct\n */\nexport const newPriorityItem = (\n\tclientId: ClientId,\n\tcontainer: PossibleActionItems\n): ActionChecklistPriorityStruct => ({\n\tclientId,\n\tactionContainer: container,\n\torder: [],\n})\n\n/**\n * Creates the structure for a new notes item\n *\n * @param {ClientId} clientId\n * @param {PossibleActionItems} container\n * @returns ActionChecklistNotesStruct\n */\nexport const newNotesItem = (\n\tclientId: ClientId,\n\tcontainer: PossibleActionItems\n): ActionChecklistNotesStruct => ({\n\tclientId,\n\tactionContainer: container,\n\tnotes: \"\",\n})\n\n/**\n * Bulk adds items to the database and updates the related priority order\n *\n * returns the items with their db ids & a success boolean\n *\n * @export\n * @param {ActionChecklistStruct[]} items\n * @param {ActionChecklistPriorityId} priorityId\n * @returns {Promise<[ActionChecklistStruct[], boolean]>}\n */\nexport async function bulkAddChecklists(\n\titems: ActionChecklistStruct[],\n\tpriorityId: ActionChecklistPriorityId\n): Promise<[ActionChecklistStruct[], boolean]> {\n\tconst priority = await ActionPriorityUseCase.findById(priorityId)\n\tif (!priority) return [items, false]\n\n\tconst ids = await ActionChecklistUseCase.bulkPut(items)\n\n\tconst newOrder = priority?.order.concat(ids)\n\tconsole.log(uniq(newOrder))\n\tawait ActionPriorityUseCase.update(priorityId, {\n\t\t...priority,\n\t\torder: uniq(newOrder),\n\t})\n\n\tconst completedItems = items.map((item, idx) => ({\n\t\t...item,\n\t\tid: ids[idx],\n\t}))\n\n\treturn [completedItems, true]\n}\n","export { default } from \"./Spacer\"\n","import { useContext } from \"react\"\nimport ClientContext from \"./client-context\"\nimport { ClientDataStruct } from \"../../data/_config/shape\"\n\n/**\n * A custom hook to easily get the current client data\n *\n * @returns {[ClientDataStruct | undefined, boolean]}\n */\nconst useCurrentClient = (): [ClientDataStruct | undefined, boolean] => {\n\tconst {\n\t\tstate: { currentClient, clientSynced },\n\t} = useContext(ClientContext)\n\n\treturn [currentClient, clientSynced]\n}\n\nexport default useCurrentClient\n","import Dexie, { IndexableType } from \"dexie\"\nimport { v4 as uuidv4 } from \"uuid\"\nimport { DatabaseId, ClientId } from \"./shape\"\nimport hasProperty from \"../../util/object/hasProperty\"\n\n/**\n * Logic Layer to implement per database/table combo\n *\n * @export\n * @abstract\n * @class ILogicLayer\n * @template E Database entity structure\n * @template I Database id type\n */\nabstract class ILogicLayer<E, B, I = DatabaseId> {\n\t/**\n\t * Creates an instance of ILogicLayer.\n\t *\n\t * @param {Dexie} database Database to target, this database should be extending Dexie\n\t * @param {Dexie.Table<E, I>} table Table within the defined database\n\t * @memberof ILogicLayer\n\t */\n\tconstructor(protected database: Dexie, protected table: Dexie.Table<E, I>) {}\n\n\t/**\n\t * Default create method, this is called in the public\n\t * `create` method by default, however when implementing\n\t * the Logic layer, you'll be able to override that method\n\t * if you don't want to use the default functionality\n\t *\n\t * @protected\n\t * @param {E} data\n\t * @returns {Promise<I>}\n\t * @memberof ILogicLayer\n\t */\n\tprotected defaultCreate(data: E): Promise<I> {\n\t\treturn this.database.transaction(\"rw\", this.table.name, () => {\n\t\t\treturn this.table.add({\n\t\t\t\tid: uuidv4(),\n\t\t\t\t...data,\n\t\t\t})\n\t\t})\n\t}\n\n\t/**\n\t * Default database sync method, this is called in the public\n\t * `syncWithDatabase` method by default, however when implementing\n\t * the Logic layer, you'll be able to override that method\n\t * if you don't want to use the default functionality\n\t *\n\t * @protected\n\t * @returns {Promise<E[]>}\n\t * @memberof ILogicLayer\n\t */\n\tprotected defaultSync(): Promise<E[]> {\n\t\treturn this.database.transaction(\"r\", this.table.name, () => {\n\t\t\treturn this.table.toArray()\n\t\t})\n\t}\n\n\t/**\n\t * Default delete method, this is called in the public\n\t * `delete` method by default, however when implementing\n\t * the Logic layer, you'll be able to override that method\n\t * if you don't want to use the default functionality\n\t *\n\t * @protected\n\t * @template T\n\t * @param {T} id\n\t * @returns {Promise<number>}\n\t * @memberof ILogicLayer\n\t */\n\tprotected defaultDelete<T extends IndexableType>(id: T): Promise<number> {\n\t\treturn this.database.transaction(\"rw\", this.table.name, () => {\n\t\t\treturn this.table.where(\"id\").equals(id).delete()\n\t\t})\n\t}\n\n\t/**\n\t * Default update method, this is called in the public\n\t * `update` method by default, however when implementing\n\t * the Logic layer, you'll be able to override that method\n\t * if you don't want to use the default functionality\n\t *\n\t * @protected\n\t * @param {I} id\n\t * @param {B} data\n\t * @returns {Promise<number>}\n\t * @memberof ILogicLayer\n\t */\n\tprotected defaultUpdate(id: I, data: B): Promise<number> {\n\t\treturn this.database.transaction(\"rw\", this.table.name, () => {\n\t\t\treturn this.table.update(id, data)\n\t\t})\n\t}\n\n\t/**\n\t * Method to create a new entry into the database.\n\t * Uses the `defaultCreate` method by default. However,\n\t * you can override the method if required\n\t *\n\t * @param {E} data\n\t * @returns {Promise<I>}\n\t * @memberof ILogicLayer\n\t */\n\tpublic create(data: E): Promise<I> {\n\t\treturn this.defaultCreate(data)\n\t}\n\n\t/**\n\t * Method to pull all entries from the database\n\t * Uses the `defaultSync` method by default. However,\n\t * you can override the method if required\n\t *\n\t * @returns {Promise<E[]>}\n\t * @memberof ILogicLayer\n\t */\n\tpublic syncWithDatabase(): Promise<E[]> {\n\t\treturn this.defaultSync()\n\t}\n\n\t/**\n\t * Method to delete a item from the database\n\t * Uses the `defaultDelete` method by default. However,\n\t * you can override the method if required\n\t *\n\t * @template T\n\t * @param {T} id\n\t * @returns {Promise<number>}\n\t * @memberof ILogicLayer\n\t */\n\tpublic delete<T extends IndexableType>(id: T): Promise<number> {\n\t\treturn this.defaultDelete(id)\n\t}\n\n\t/**\n\t * Method to update a item in the database\n\t * Uses the `defaultUpdate` method by default. However,\n\t * you can override the method if required\n\t *\n\t * @param {I} id\n\t * @param {B} data\n\t * @returns {Promise<number>}\n\t * @memberof ILogicLayer\n\t */\n\tpublic update(id: I, data: B): Promise<number> {\n\t\treturn this.defaultUpdate(id, data)\n\t}\n\n\t/**\n\t * Finds all record that belongs to a client\n\t *\n\t * @param {ClientId} clientId\n\t * @returns {Promise<E[]>}\n\t * @memberof ILogicLayer\n\t */\n\tpublic findByClient(clientId: ClientId): Promise<E[]> {\n\t\treturn this.database.transaction(\"r\", this.table.name, () => {\n\t\t\treturn this.table.where({ clientId }).toArray()\n\t\t})\n\t}\n\n\t/**\n\t * Method to bulk add items to the database. Returns an array\n\t * of database ids\n\t *\n\t * @param {E[]} items\n\t * @returns {Promise<I[]>}\n\t * @memberof ILogicLayer\n\t */\n\tpublic bulkAdd(items: E[]): Promise<I[]> {\n\t\tconst addItems: E[] = items.reduce((acc: E[], cur: E) => {\n\t\t\treturn acc.concat({ ...cur, id: uuidv4() })\n\t\t}, [])\n\n\t\treturn this.database.transaction(\"rw\", this.table.name, () => {\n\t\t\treturn this.table.bulkAdd<true>(addItems, { allKeys: true })\n\t\t})\n\t}\n\n\tpublic bulkPut(items: E[]): Promise<I[]> {\n\t\tconst putItems: E[] = items.reduce((acc: E[], cur: E) => {\n\t\t\treturn acc.concat(hasProperty(cur, \"id\") ? cur : { ...cur, id: uuidv4() })\n\t\t}, [])\n\n\t\treturn this.database.transaction(\"rw\", this.table.name, () => {\n\t\t\treturn this.table.bulkPut<true>(putItems, { allKeys: true })\n\t\t})\n\t}\n\n\t/**\n\t * Method to get an item from the database used an ID\n\t *\n\t * @param {I} id\n\t * @returns {(Promise<E|undefined>)}\n\t * @memberof ILogicLayer\n\t */\n\tpublic findById(id: I): Promise<E | undefined> {\n\t\treturn this.database.transaction(\"rw\", this.table.name, () => {\n\t\t\treturn this.table.get(id)\n\t\t})\n\t}\n\n\t/**\n\t * Deletes the data for a specific client\n\t *\n\t * @param {ClientId} clientId\n\t * @returns {Promise<number>}\n\t * @memberof ILogicLayer\n\t */\n\tpublic deleteByClient(clientId: ClientId): Promise<number> {\n\t\treturn this.database.transaction(\"rw\", this.table.name, () => {\n\t\t\treturn this.table.where(\"clientId\").equals(clientId).delete()\n\t\t})\n\t}\n\n\tpublic last(): Promise<E | undefined> {\n\t\treturn this.table.toCollection().last()\n\t}\n}\n\nexport default ILogicLayer\n","/**\n * Private route definitions\n *\n * @export\n * @enum {number}\n */\nexport enum PrivateRoutes {\n\tCoachingKit = \"/coaching-kit\",\n\tClientList = \"/client/list\",\n\tSessionFiles = \"/session-files\",\n\tHealthCheckQuiz = \"/health-check/quiz/:id?\",\n\tHealthCheckList = \"/health-check/listing\",\n\tHealthCheckSummary = \"/health-check/summary/:id\",\n\tDiscoverTopics = \"/discover-topics\",\n\tCFC = \"/cash-flow-canvas\",\n\tCFCEdit = \"/cash-flow-canvas/:id\",\n\tCFCListing = \"/cfc/listing\",\n\tCFCCompare = \"/cfc/compare\",\n\tChangeLevers = \"/change-levers\",\n\tActionChecklist = \"/action-checklist\",\n\tDTFundingBusiness = \"/funding-business\",\n\tDTManagingCashFlow = \"/managing-cash-flow\",\n\tDTPlanningBusiness = \"/planning-business\",\n\tDTPlanningFinanicalCommitments = \"/planning-financial-commitments\",\n\tDTRecordKeeping = \"/record-keeping\",\n\tDTSellingClosingSuccession = \"/selling-closing-succession\",\n\tDTTrackingPerformance = \"/tracking-performance\",\n}\n\n/**\n * Public route definitions\n *\n * @export\n * @enum {number}\n */\nexport enum PublicRoutes {\n\tHome = \"/\",\n}\n\n/**\n * Replaces a variable element in a route with a value\n *\n * [[\":id\", \"1\"]] -> /health-check/summary/:id = /health-check/summary/1\n *\n * @param {PrivateRoutes|PublicRoutes} route Route to replace a value from\n * @param {[string, string][]} replacements Items to find and replace\n * @returns string\n */\nexport const routeVarReplacement = (\n\troute: PrivateRoutes | PublicRoutes,\n\treplacements: [string, string][]\n): string => {\n\tconst r = replacements.reduce((s, rep) => {\n\t\treturn s.replace(rep[0], rep[1])\n\t}, route.toString())\n\n\treturn r\n}\n","import { ClientId } from \"../../data/_config/shape\"\n\nconst storageKey = \"currentClientId\"\nexport const emptyClientValue = \"\"\n\nexport function setStorageClient(id: ClientId): void {\n\twindow.localStorage.setItem(storageKey, `${id}`)\n}\n\nexport function getStorageClient(): ClientId | undefined {\n\tconst id = window.localStorage.getItem(storageKey)\n\tif (id) {\n\t\treturn id\n\t}\n\n\treturn undefined\n}\n\nexport function removeStorageClient(): void {\n\twindow.localStorage.removeItem(storageKey)\n}\n","import { Dispatch } from \"react\"\nimport { CFCStruct } from \"../../data/_config/shape\"\n\ntype QuestionValues = {\n\tone: number\n\ttwo: number\n\tthree: number\n\tfour: number | undefined\n}\n\n/**\n * State structure of the CFC Context\n *\n * @export\n * @interface ICFCState\n */\nexport interface ICFCState {\n\tduplicateError: boolean\n\tinvalidDateError: boolean\n\tquestionValues: QuestionValues\n\tdispatch: Dispatch<CFCReducerActions>\n\tleftCompare?: CFCStruct\n\trightCompare?: CFCStruct\n\tcopyCanvasActive: boolean\n}\n\n/**\n * Available action types\n *\n * @export\n * @enum {number}\n */\nexport enum CFCActionTypes {\n\tChangeDuplicateError = \"change_duplicate_error\",\n\tChangeInvalidDateError = \"change_invalid_date_error\",\n\tChangeQuestionValues = \"change_question_values\",\n\tChangeCompare = \"change_compare\",\n\tChangeCopyCanvasActive = \"change_copy_canvas_active\",\n}\n\nexport type ChangeComparePayload = {\n\tleft: CFCStruct\n\tright: CFCStruct\n}\n\n/**\n * Defines the type:payload type pairing\n * aka; what the structure of the payload should be\n * given a certain type\n *\n * @export\n * @type {CFCReducerActions}\n */\nexport type CFCReducerActions =\n\t| {\n\t\t\ttype: CFCActionTypes.ChangeDuplicateError\n\t\t\tpayload: ICFCState[\"duplicateError\"]\n\t  }\n\t| {\n\t\t\ttype: CFCActionTypes.ChangeInvalidDateError\n\t\t\tpayload: ICFCState[\"invalidDateError\"]\n\t  }\n\t| {\n\t\t\ttype: CFCActionTypes.ChangeQuestionValues\n\t\t\tpayload: ICFCState[\"questionValues\"]\n\t  }\n\t| {\n\t\t\ttype: CFCActionTypes.ChangeCopyCanvasActive\n\t\t\tpayload: ICFCState[\"copyCanvasActive\"]\n\t  }\n\t| {\n\t\t\ttype: CFCActionTypes.ChangeCompare\n\t\t\tpayload: ChangeComparePayload\n\t  }\n","import { createContext } from \"react\"\nimport { IClientState } from \"./client-outline\"\n\n/**\n * Defines a default structure for the client state\n *\n */\nexport const defaultClientState: IClientState = {\n\tstate: {\n\t\tclients: [],\n\t\tclientSynced: false,\n\t\tlastViewedHC: null,\n\t},\n\tdispatch: () => null,\n}\n\n// defines the client context\nconst ClientContext = createContext(defaultClientState)\n\nexport default ClientContext\n","/* eslint-disable import/prefer-default-export */\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nexport const useSharedNavStyles = makeStyles(() => ({\n\troot: {\n\t\tflexGrow: 1,\n\t},\n\tbox: {\n\t\tdisplay: \"flex\",\n\t\tflexGrow: 2,\n\t\tjustifyContent: \"flex-end\",\n\t},\n\tbutton: {\n\t\ttextTransform: \"capitalize\",\n\t},\n\tlogoBox: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\tflexGrow: 3,\n\t},\n\tsmall: {\n\t\tflexGrow: 1,\n\t},\n\tpublicLogo: {\n\t\tjustifyContent: \"flex-start\",\n\t\t\"& h6\": {\n\t\t\tcolor: \"white\",\n\t\t},\n\t},\n}))\n","import Dexie from \"dexie\"\nimport { ClientDataStruct, ClientId } from \"../_config/shape\"\n\n/**\n * Client database definition\n *\n * @class ClientDatabase\n * @extends {Dexie}\n */\nclass ClientDatabase extends Dexie {\n\t/**\n\t * Table used to store clients\n\t *\n\t * @type {Dexie.Table<IBaseClient, number>}\n\t * @memberof ClientDatabase\n\t */\n\tclients!: Dexie.Table<ClientDataStruct, ClientId>\n\n\t/**\n\t * Creates an instance of ClientDatabase.\n\t *\n\t * @memberof ClientDatabase\n\t */\n\tconstructor() {\n\t\tsuper(\"ClientDatabase\")\n\t\tthis.applyMigrations()\n\n\t\tthis.clients = this.table(\"clients\")\n\n\t\tthis.replaceIdsWithStrings()\n\t}\n\n\t/**\n\t * Applys the migration for the database.\n\t * Add new migrations when the database needs to update\n\t *\n\t * @private\n\t * @memberof ClientDatabase\n\t */\n\tprivate applyMigrations(): void {\n\t\t// Version 1.1\n\t\tthis.version(1.1).stores({\n\t\t\tclients: \"++id,name\",\n\t\t})\n\n\t\tthis.version(2).stores({\n\t\t\tclients: \"++id, name, createdAt\",\n\t\t})\n\t}\n\n\tprivate replaceIdsWithStrings(): void {\n\t\tthis.clients.toCollection().modify((client) => {\n\t\t\tif (typeof client.id === \"number\") {\n\t\t\t\tclient.id = `${client.id}`\n\t\t\t}\n\t\t})\n\t}\n}\n\nconst ClientDB = new ClientDatabase()\n\nexport default ClientDB\n","import Dexie from \"dexie\"\nimport { CFCStruct, CFCId } from \"../_config/shape\"\n\n/**\n * Database definition for the CFC data\n *\n * @class CFCDatabase\n * @extends {Dexie}\n */\nclass CFCDatabase extends Dexie {\n\t/**\n\t * Table used to store Canvas data\n\t *\n\t * @type {Dexie.Table<CFCStruct, CFCId>}\n\t * @memberof CFCDatabase\n\t */\n\tcanvases!: Dexie.Table<CFCStruct, CFCId>\n\n\t/**\n\t * Creates an instance of CFCDatabase.\n\t *\n\t * @memberof CFCDatabase\n\t */\n\tconstructor() {\n\t\tsuper(\"CFCDatabase\")\n\t\tthis.applyMigrations()\n\n\t\t// eslint-disable-next-line\n\t\tthis.canvases = this.table(\"canvases\")\n\n\t\tthis.replaceIdsWithStrings()\n\t}\n\n\t/**\n\t * Applys the migration for the database.\n\t * Add new migrations when the database needs to update\n\t *\n\t * @private\n\t * @memberof CFCDatabase\n\t */\n\tprivate applyMigrations(): void {\n\t\tthis.version(1).stores({\n\t\t\tcanvases: `\n        ++id,\n        clientId,\n        createdAt,\n        canvasTitle,\n        canvasType,\n        canvasTimeFrame,\n        canvasStartDate,\n        canvasEndDate,\n        gstOnSales,\n        gstOnPurchases,\n        openingBalance,\n        paygWithholding,\n        superAmount,\n        incomeTax,\n        cashToOwner,\n        cashToBank,\n        stock,\n        creditors,\n        debtors,\n        assets,\n        loans,\n        *cashInItems,\n        *cashOutItems\n      `,\n\t\t})\n\n\t\tthis.version(1.1).stores({\n\t\t\tcanvases: `\n        ++id,\n        clientId,\n        createdAt,\n        canvasTitle,\n        canvasType,\n        canvasTimeFrame,\n        canvasStartDate,\n        canvasEndDate,\n        gstOnSales,\n        gstOnPurchases,\n        openingBalance,\n        paygWithholding,\n        superAmount,\n        incomeTax,\n        cashToOwner,\n        cashToBank,\n        stock,\n        creditors,\n        debtors,\n        assets,\n        loans,\n        *cashInItems,\n\t\t\t\t*cashOutItems,\n\t\t\t\t[canvasType+canvasTimeFrame+clientId]\n      `,\n\t\t})\n\t}\n\n\tprivate replaceIdsWithStrings(): void {\n\t\tthis.canvases.toCollection().modify((canvas) => {\n\t\t\tif (typeof canvas.id === \"number\") {\n\t\t\t\tcanvas.id = `${canvas.id}`\n\t\t\t}\n\t\t\tif (typeof canvas.clientId === \"number\") {\n\t\t\t\tcanvas.clientId = `${canvas.clientId}`\n\t\t\t}\n\t\t})\n\t}\n}\n\nconst CFCDB = new CFCDatabase()\n\nexport default CFCDB\n","import {\n\tActionChecklistPriorityStruct,\n\tBaseActionChecklistPriorityStruct,\n\tClientId,\n} from \"../_config/shape\"\nimport ActionChecklistDB from \"./ActionChecklistDatabase\"\nimport ILogicLayer from \"../_config/logicLayer\"\nimport { PossibleActionItems } from \"../../state/action-checklist/shape\"\nimport { findByClientAndContainer } from \"./_config/utilities\"\n\n/**\n * Logic implementation for priority items for the\n * Action Checklist databasea\n *\n * @class ActionChecklistPriorityLogic\n * @extends {ILogicLayer<ActionChecklistPriorityStruct, BaseActionChecklistPriorityStruct>}\n */\nclass ActionChecklistPriorityLogic extends ILogicLayer<\n\tActionChecklistPriorityStruct,\n\tBaseActionChecklistPriorityStruct\n> {\n\t/**\n\t * Creates an instance of ActionChecklistPriorityLogic.\n\t *\n\t * @memberof ActionChecklistPriorityLogic\n\t */\n\tconstructor() {\n\t\tsuper(ActionChecklistDB, ActionChecklistDB.priority)\n\t}\n\n\t/**\n\t * Finds all action priority by container and client\n\t *\n\t * @param {PossibleActionItems} container\n\t * @param {ClientId} clientId\n\t * @returns {Promise<ActionChecklistStruct[]>}\n\t * @memberof ActionChecklistLogic\n\t */\n\tfindByClientAndContainer(\n\t\tcontainer: PossibleActionItems,\n\t\tclientId: ClientId\n\t): Promise<ActionChecklistPriorityStruct[]> {\n\t\treturn findByClientAndContainer<ActionChecklistPriorityStruct>(\n\t\t\tcontainer,\n\t\t\tclientId,\n\t\t\tthis.database,\n\t\t\tthis.table\n\t\t)\n\t}\n}\n\n// Creates a instance of the logic class and exports the instance\nconst ActionPriorityUseCase = new ActionChecklistPriorityLogic()\n\nexport default ActionPriorityUseCase\n","import { makeStyles } from \"@material-ui/core\"\n\n// Loading styles\nconst useLoadingStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\tpaddingTop: theme.spacing(2),\n\t\tpaddingBottom: theme.spacing(2),\n\t},\n}))\n\nexport default useLoadingStyles\n","import React, { ReactElement } from \"react\"\nimport { Box, CircularProgress } from \"@material-ui/core\"\nimport useLoadingStyles from \"./_config/styles\"\n\n/**\n * Loading component\n *\n * @returns ReactElement\n */\nconst Loading = (): ReactElement => {\n\tconst styles = useLoadingStyles()\n\n\treturn (\n\t\t<Box className={styles.root}>\n\t\t\t<CircularProgress />\n\t\t</Box>\n\t)\n}\n\nexport default Loading\n","import { createContext } from \"react\"\nimport { ICFCState } from \"./shape\"\n\nexport const defaultCFCState: ICFCState = {\n\tdispatch: () => null,\n\tduplicateError: false,\n\tinvalidDateError: false,\n\tcopyCanvasActive: false,\n\tquestionValues: {\n\t\tone: 0,\n\t\ttwo: 0,\n\t\tthree: 0,\n\t\tfour: undefined,\n\t},\n}\n\nconst CFCContext = createContext(defaultCFCState)\n\nexport default CFCContext\n","import ILogicLayer from \"../_config/logicLayer\"\nimport { ClientDataStruct, BaseClientStruct } from \"../_config/shape\"\nimport ClientDB from \"./ClientDatabase\"\n\n/**\n * Logic implementation for the Client Database\n *\n * @class ClientLogic\n * @extends {ILogicLayer<ClientDataStruct, BaseClientStruct>}\n */\nclass ClientLogic extends ILogicLayer<ClientDataStruct, BaseClientStruct> {\n\t/**\n\t * Creates an instance of ClientLogic.\n\t *\n\t * @memberof ClientLogic\n\t */\n\tconstructor() {\n\t\tsuper(ClientDB, ClientDB.clients)\n\t}\n}\n\n// Creates a instance of the logic class and exports the instance\nconst ClientUseCase = new ClientLogic()\n\nexport default ClientUseCase\n","import { makeStyles } from \"@material-ui/core\"\n\ntype InputProps = {\n\tstacked: boolean\n\tmini: boolean\n\tfullHeight?: boolean\n}\ntype StyleRtn = {}\n\nconst useStyles = makeStyles((theme) => ({\n\troot: (props: InputProps): StyleRtn => ({\n\t\tflexDirection: props.stacked ? \"column\" : \"row\",\n\t\tdisplay: \"flex\",\n\t\theight: props.fullHeight ? \"100%\" : \"auto\",\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tflexDirection: \"column\",\n\t\t\talignItem: \"flex-start\",\n\t\t},\n\t}),\n\ttype: (props: InputProps): StyleRtn => ({\n\t\tflexGrow: 2,\n\t\tpaddingRight: props.stacked ? 0 : theme.spacing(2),\n\t\tmarginBottom: !props.stacked ? 0 : theme.spacing(2),\n\t\t\"& h6\": {\n\t\t\tfontWeight: theme.typography.fontWeightRegular,\n\t\t\tfontSize: props.mini\n\t\t\t\t? theme.typography.body1.fontSize\n\t\t\t\t: theme.typography.h6.fontSize,\n\t\t},\n\t\t\"& p\": {\n\t\t\tcolor: theme.palette.grey[700],\n\t\t},\n\t\t[theme.breakpoints.down(\"md\")]: {\n\t\t\tmarginBottom: 0,\n\t\t\tpaddingRight: 0,\n\t\t},\n\t}),\n\tmoneyInput: (props: InputProps): StyleRtn => ({\n\t\t[theme.breakpoints.up(\"md\")]: {\n\t\t\tmaxWidth: props.stacked ? \"100%\" : \"30%\",\n\t\t},\n\t\t[theme.breakpoints.down(\"md\")]: {\n\t\t\tmarginTop: theme.spacing(2),\n\t\t},\n\t}),\n}))\n\nexport default useStyles\n","import React, { ReactElement } from \"react\"\nimport { Typography, Box, makeStyles } from \"@material-ui/core\"\nimport { Link } from \"react-router-dom\"\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\timg: {\n\t\tmaxWidth: \"45px\",\n\t\tdisplay: \"block\",\n\t\theight: \"auto\",\n\t\tmarginRight: theme.spacing(1),\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tmaxWidth: \"30px\",\n\t\t},\n\t},\n\tlink: {\n\t\ttextDecoration: \"none\",\n\t},\n\ttype: {\n\t\tcolor: theme.palette.text.primary,\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tfontSize: theme.typography.pxToRem(18),\n\t\t\tposition: \"absolute\",\n\t\t\twidth: \"1px\",\n\t\t\theight: \"1px\",\n\t\t\tpadding: 0,\n\t\t\tmargin: \"-1px\",\n\t\t\toverflow: \"hidden\",\n\t\t\tclip: \"rect(0, 0, 0, 0)\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\tborderWidth: 0,\n\t\t},\n\t},\n}))\n\ntype LogoProps = {\n\tto: string\n\tclassName?: string\n}\n\n/**\n * Logo component\n *\n * @export\n * @param {LogoProps} { to, className = \"\" }\n * @returns {ReactElement}\n */\nexport default function Logo({ to, className = \"\" }: LogoProps): ReactElement {\n\tconst cls = useStyles()\n\n\treturn (\n\t\t<Link to={to} className={cls.link}>\n\t\t\t<Box className={`${cls.root} ${className}`}>\n\t\t\t\t<img src=\"/images/logo.png\" alt=\"\" className={cls.img} />\n\t\t\t\t<Typography className={cls.type} variant=\"h6\">\n\t\t\t\t\tCash flow coaching kit\n\t\t\t\t</Typography>\n\t\t\t</Box>\n\t\t</Link>\n\t)\n}\n","import {\n\tActionChecklistStruct,\n\tBaseActionChecklistStruct,\n\tClientId,\n\tActionChecklistId,\n} from \"../_config/shape\"\nimport ActionChecklistDB from \"./ActionChecklistDatabase\"\nimport ILogicLayer from \"../_config/logicLayer\"\nimport { PossibleActionItems } from \"../../state/action-checklist/shape\"\nimport { findByClientAndContainer } from \"./_config/utilities\"\n\n/**\n * Logic implementation for Action Items for the\n * Action Checklist database\n *\n * @class ActionChecklistLogic\n * @extends {ILogicLayer<ActionChecklistStruct, BaseActionChecklistStruct>}\n */\nclass ActionChecklistLogic extends ILogicLayer<\n\tActionChecklistStruct,\n\tBaseActionChecklistStruct\n> {\n\t/**\n\t * Creates an instance of ActionChecklistLogic.\n\t *\n\t * @memberof ActionChecklistLogic\n\t */\n\tconstructor() {\n\t\tsuper(ActionChecklistDB, ActionChecklistDB.actionItems)\n\t}\n\n\t/**\n\t * Adds functionality for processing bulk updates\n\t *\n\t * @param {ActionChecklistStruct[]} items\n\t * @returns {Promise<ActionChecklistId>} Last updated item id\n\t * @memberof ActionChecklistLogic\n\t */\n\tbulkUpdate(items: ActionChecklistStruct[]): Promise<ActionChecklistId> {\n\t\treturn this.database.transaction(\"rw\", this.table, () => {\n\t\t\treturn this.table.bulkPut(items)\n\t\t})\n\t}\n\n\t/**\n\t * Finds all action items by container and client\n\t *\n\t * @param {PossibleActionItems} container\n\t * @param {ClientId} clientId\n\t * @returns {Promise<ActionChecklistStruct[]>}\n\t * @memberof ActionChecklistLogic\n\t */\n\tfindByClientAndContainer(\n\t\tcontainer: PossibleActionItems,\n\t\tclientId: ClientId\n\t): Promise<ActionChecklistStruct[]> {\n\t\treturn findByClientAndContainer<ActionChecklistStruct>(\n\t\t\tcontainer,\n\t\t\tclientId,\n\t\t\tthis.database,\n\t\t\tthis.table\n\t\t)\n\t}\n}\n\n// Creates a instance of the logic class and exports the instance\nconst ActionChecklistUseCase = new ActionChecklistLogic()\n\nexport default ActionChecklistUseCase\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction numOrZero(val: any): number {\n\tconst num = parseInt(val, 10)\n\t// eslint-disable-next-line no-restricted-globals\n\tif (typeof num === \"number\" && !isNaN(num)) return num\n\treturn 0\n}\n\n/**\n * A reducer method to sum an array of numbers\n *\n * @returns {ReducerHOF<number, number>}\n */\nfunction sum(): ReducerHOF<number, number> {\n\treturn (acc, cur): number => numOrZero(acc) + numOrZero(cur)\n}\n\n/**\n * A HOF to add a specific value\n *\n * @param {number} val\n * @returns {MathHOF}\n */\nfunction add(val: number): MathHOF {\n\treturn (x): number => {\n\t\treturn numOrZero(x) + numOrZero(val)\n\t}\n}\n\n/**\n * A HOF to minus a specific value\n *\n * @param {number} val\n * @returns {MathHOF}\n */\nfunction minusBy(val: number): MathHOF {\n\treturn (x): number => {\n\t\treturn numOrZero(x) - numOrZero(val)\n\t}\n}\n\n/**\n * A HOF to divide by a specific value\n *\n * @param {number} val\n * @returns {MathHOF}\n */\nfunction divideBy(val: number): MathHOF {\n\treturn (x): number => {\n\t\treturn numOrZero(val) === 0 ? 0 : numOrZero(x) / numOrZero(val)\n\t}\n}\n\n/**\n * FP pipe method, takes a list of functions and outputs a single value\n *\n * @param fns\n */\nconst pipe = <Input extends any, Output extends any, Fns extends any[]>(\n\t// eslint-disable-next-line\n\t...fns: Fns\n) => (x: Input): Output => fns.reduce((v, f) => f(v), x)\n\nexport { sum, minusBy, divideBy, pipe, add, numOrZero }\n","import ILogicLayer from \"../_config/logicLayer\"\nimport {\n\tCFCStruct,\n\tBaseCFCStruct,\n\tClientId,\n\tCanvasType,\n\tCFCTimeFrame,\n} from \"../_config/shape\"\nimport CFCDB from \"./CFCDatabase\"\n\n/**\n * Logic implementation for the CFC data\n *\n * @class CFCLogic\n * @extends {ILogicLayer<CFCStruct, BaseCFCStruct>}\n */\nclass CFCLogic extends ILogicLayer<CFCStruct, BaseCFCStruct> {\n\t/**\n\t * Creates an instance of CFCLogic.\n\t *\n\t * @memberof CFCLogic\n\t */\n\tconstructor() {\n\t\tsuper(CFCDB, CFCDB.canvases)\n\t}\n\n\t/**\n\t * Counts the number of records for a given client\n\t *\n\t * @param {ClientId} clientId\n\t * @returns {Promise<number>}\n\t * @memberof CFCLogic\n\t */\n\tcountClientRecords(clientId: ClientId): Promise<number> {\n\t\treturn this.database.transaction(\"r\", this.table.name, () => {\n\t\t\treturn this.table.where({ clientId }).count()\n\t\t})\n\t}\n\n\t/**\n\t * Finds records for a client based on the canvas type and timeframe\n\t *\n\t * @param {CanvasType} type\n\t * @param {CFCTimeFrame} timeframe\n\t * @param {ClientId} clientId\n\t * @returns {Promise<CFCStruct[]>}\n\t * @memberof CFCLogic\n\t */\n\tfindPossibleDuplicates(\n\t\ttype: CanvasType,\n\t\ttimeframe: CFCTimeFrame,\n\t\tclientId: ClientId\n\t): Promise<CFCStruct[]> {\n\t\treturn this.database.transaction(\"r\", this.table.name, () => {\n\t\t\treturn this.table\n\t\t\t\t.where({\n\t\t\t\t\tcanvasType: type,\n\t\t\t\t\tcanvasTimeFrame: timeframe,\n\t\t\t\t\tclientId,\n\t\t\t\t})\n\t\t\t\t.toArray()\n\t\t})\n\t}\n}\n\n// Creates a instance of the logic class and exports the instance\nconst CFCUseCase = new CFCLogic()\n\nexport default CFCUseCase\n","import Dexie from \"dexie\"\nimport { HealthCheckDataStruct, HealthCheckId } from \"../_config/shape\"\n\n/**\n * Health check database definition\n *\n * @class HealthCheckDatabase\n * @extends {Dexie}\n */\nclass HealthCheckDatabase extends Dexie {\n\t/**\n\t * Table used to store health checks\n\t *\n\t * @type {Dexie.Table<IBaseHealthCheck, number>}\n\t * @memberof HealthCheckDatabase\n\t */\n\thealthChecks!: Dexie.Table<HealthCheckDataStruct, HealthCheckId>\n\n\t/**\n\t * Creates an instance of HealthCheckDatabase.\n\t *\n\t * @memberof HealthCheckDatabase\n\t */\n\tconstructor() {\n\t\tsuper(\"HealthCheckDatabase\")\n\t\tthis.applyMigrations()\n\n\t\tthis.healthChecks = this.table(\"healthChecks\")\n\n\t\tthis.replaceIdsWithStrings()\n\t}\n\n\t/**\n\t * Applys the migration for the database.\n\t * Add new migrations when the database needs to update\n\t *\n\t * @private\n\t * @memberof HealthCheckDatabase\n\t */\n\tprivate applyMigrations(): void {\n\t\t// Version 1\n\t\tthis.version(2).stores({\n\t\t\thealthChecks: \"++id, clientId, *answers, createdAt\",\n\t\t})\n\t\tthis.version(2.4).stores({\n\t\t\thealthChecks: \"++id, clientId, *answers, createdAt, [id+clientId]\",\n\t\t})\n\t}\n\n\tprivate replaceIdsWithStrings(): void {\n\t\tthis.healthChecks.toCollection().modify((healthCheck) => {\n\t\t\tif (typeof healthCheck.id === \"number\") {\n\t\t\t\thealthCheck.id = `${healthCheck.id}`\n\t\t\t}\n\t\t\tif (typeof healthCheck.clientId === \"number\") {\n\t\t\t\thealthCheck.clientId = `${healthCheck.clientId}`\n\t\t\t}\n\t\t})\n\t}\n}\n\nconst HealthCheckDB = new HealthCheckDatabase()\n\nexport default HealthCheckDB\n","/**\n * HOF to concat different strings together\n *\n * @param {string} s\n * @returns {StrToStrHOF}\n */\nfunction concatStr(s: string): StrToStrHOF {\n\treturn (x: string): string => x.concat(s)\n}\n\nexport default concatStr\n","import React, { ReactElement, useState } from \"react\"\nimport { Button, Menu, MenuItem, Divider, useTheme } from \"@material-ui/core\"\nimport { NavLink as RouterLink } from \"react-router-dom\"\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\"\nimport { generateKey, constructKey } from \"../../../util/lists/key\"\nimport {\n\tINavigationRoutesProps,\n\tINavRoutes,\n\tExtendsButton,\n} from \"../_config/shape\"\n\ninterface RWCProps extends ExtendsButton {\n\troute: INavRoutes\n\tchildRoutes: INavRoutes[]\n}\n\n/**\n * Renders a button with a menu for the child menu items\n *\n * @param {RWCProps} {\n * \troute,\n * \tchildRoutes,\n * \t// eslint-disable-next-line\n * \t...buttonProps\n * }\n * @returns {ReactElement}\n * @see https://material-ui.com/components/menus/#simple-menu\n */\nfunction RouteWithChildren({\n\troute,\n\tchildRoutes,\n\t// eslint-disable-next-line\n\t...buttonProps\n}: RWCProps): ReactElement {\n\tconst [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\n\n\tconst handleClick = (event: React.MouseEvent<HTMLAnchorElement>): void => {\n\t\tevent.preventDefault()\n\t\tsetAnchorEl(event.currentTarget)\n\t}\n\n\tconst handleClose = (): void => {\n\t\tsetAnchorEl(null)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\taria-controls={route.route}\n\t\t\t\taria-haspopup=\"true\"\n\t\t\t\tcomponent={RouterLink}\n\t\t\t\tto={route.route}\n\t\t\t\tonClick={handleClick}\n\t\t\t\tendIcon={<KeyboardArrowDownIcon />}\n\t\t\t\t// eslint-disable-next-line react/jsx-props-no-spreading\n\t\t\t\t{...buttonProps}\n\t\t\t>\n\t\t\t\t{route.title}\n\t\t\t</Button>\n\t\t\t<Menu\n\t\t\t\tid={route.route}\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tkeepMounted\n\t\t\t\topen={Boolean(anchorEl)}\n\t\t\t\tonClose={handleClose}\n\t\t\t>\n\t\t\t\t<MenuItem component={RouterLink} to={route.route} onClick={handleClose}>\n\t\t\t\t\t{route.subMenuTitle || route.title}\n\t\t\t\t</MenuItem>\n\t\t\t\t<Divider />\n\t\t\t\t{childRoutes.map((child) => (\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\tto={child.route}\n\t\t\t\t\t\tkey={`${route.title}-child--${child.route}`}\n\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t>\n\t\t\t\t\t\t{child.title}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t))}\n\t\t\t</Menu>\n\t\t</>\n\t)\n}\n\n/**\n * Renders a list of buttons that links to a internal page\n *\n * @param {INavRoutes[]} { routes } Links to render\n * @param {StandardProps<ButtonProps<typeof Link, LinkProps>, ButtonClassKey>} { ...buttonProps } Button props to apply to each button\n */\nconst NavigationRoutes = ({\n\troutes,\n\t// eslint-disable-next-line\n\t...buttonProps\n}: INavigationRoutesProps): ReactElement => {\n\tconst [key] = useState(generateKey())\n\tconst theme = useTheme()\n\n\treturn (\n\t\t<>\n\t\t\t{routes.map(\n\t\t\t\t(route: INavRoutes, idx: number): ReactElement => {\n\t\t\t\t\tif (route.children) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<RouteWithChildren\n\t\t\t\t\t\t\t\troute={route}\n\t\t\t\t\t\t\t\tchildRoutes={route.children}\n\t\t\t\t\t\t\t\t// eslint-disable-next-line react/jsx-props-no-spreading\n\t\t\t\t\t\t\t\t{...buttonProps}\n\t\t\t\t\t\t\t\tkey={constructKey(key, idx)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tstartIcon={route.Icon ? <route.Icon /> : null}\n\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\tactiveStyle={{\n\t\t\t\t\t\t\t\tfontWeight: theme.typography.fontWeightBold,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tto={route.route}\n\t\t\t\t\t\t\t// eslint-disable-next-line react/jsx-props-no-spreading\n\t\t\t\t\t\t\t{...buttonProps}\n\t\t\t\t\t\t\tkey={constructKey(key, idx)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{route.title}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default NavigationRoutes\n","import React, { ReactElement } from \"react\"\nimport { AppBar, Toolbar, Button, Typography, Grid } from \"@material-ui/core\"\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\"\nimport { useSharedNavStyles } from \"../_config/style\"\nimport { NavigationRoutes } from \"../_partials\"\nimport usePrimaryStyles from \"./_config/styles\"\nimport { routes } from \"./_config/data\"\nimport Logo from \"../../Logo\"\nimport { PublicRoutes } from \"../../../util/routes/routes\"\nimport useCurrentClient from \"../../../state/client/useCurrentClient\"\nimport Logout from \"../../Logout\"\n\n/**\n * Renders the primary navigation\n *\n * @returns {ReactElement}\n */\nconst PrimaryNavbar = (): ReactElement => {\n\tconst sharedStyle = useSharedNavStyles()\n\tconst styles = usePrimaryStyles()\n\tconst [currentClient] = useCurrentClient()\n\n\treturn (\n\t\t<div className={sharedStyle.root}>\n\t\t\t<AppBar position=\"static\" color=\"default\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t\t{currentClient ? (\n\t\t\t\t\t\t\t<Grid item sm={2} md={2} lg={4} className={styles.clientGridItem}>\n\t\t\t\t\t\t\t\t<Typography className={styles.clientCaption} variant=\"caption\">\n\t\t\t\t\t\t\t\t\tClient\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tclassName={`${styles.clientName} truncate`}\n\t\t\t\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>{currentClient.name}</span>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Grid item md={2} lg={4} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\tsm={5}\n\t\t\t\t\t\t\tmd={5}\n\t\t\t\t\t\t\tlg={4}\n\t\t\t\t\t\t\tclassName={`${sharedStyle.logoBox}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Logo to={PublicRoutes.Home} />\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\tsm={5}\n\t\t\t\t\t\t\tmd={5}\n\t\t\t\t\t\t\tlg={4}\n\t\t\t\t\t\t\tclassName={`${sharedStyle.box} ${sharedStyle.small}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<NavigationRoutes\n\t\t\t\t\t\t\t\troutes={routes}\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t\tclassName={sharedStyle.button}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/* TODO: Pull into a separate component to add modal trigger and content */}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName={sharedStyle.button}\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t\tstartIcon={<HelpOutlineIcon />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tHelp\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Logout />\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</div>\n\t)\n}\n\nexport default PrimaryNavbar\n","import React, { ReactElement, useContext, useMemo } from \"react\"\nimport { AppBar, Box, Toolbar, Button } from \"@material-ui/core\"\nimport { useSharedNavStyles } from \"../_config/style\"\nimport { NavigationRoutes } from \"../_partials\"\nimport { routes } from \"./_config/data\"\nimport { ClientContext } from \"../../../state/client\"\nimport { INavRoutes } from \"../_config/shape\"\nimport { routeVarReplacement, PrivateRoutes } from \"../../../util/routes/routes\"\n\n/**\n * Renders the secondary navigation\n *\n * @returns {ReactElement}\n */\nconst SecondaryNavbar = (): ReactElement => {\n\tconst sharedStyle = useSharedNavStyles()\n\tconst {\n\t\tstate: { lastViewedHC },\n\t} = useContext(ClientContext)\n\tconst navRoutes = useMemo((): INavRoutes[] => {\n\t\treturn routes.map((route) => {\n\t\t\tif (route.title === \"Health Check\") {\n\t\t\t\treturn {\n\t\t\t\t\ttitle: route.title,\n\t\t\t\t\troute:\n\t\t\t\t\t\tlastViewedHC !== null\n\t\t\t\t\t\t\t? routeVarReplacement(PrivateRoutes.HealthCheckSummary, [\n\t\t\t\t\t\t\t\t\t[\":id\", `${lastViewedHC}`],\n\t\t\t\t\t\t\t  ])\n\t\t\t\t\t\t\t: route.route,\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn route\n\t\t})\n\t}, [lastViewedHC])\n\n\treturn (\n\t\t<div className={sharedStyle.root}>\n\t\t\t<AppBar position=\"static\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t{/* TODO: Extract into a custom component to all for dynamic population based on the page */}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={sharedStyle.button}\n\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t>\n\t\t\t\t\t\tShow me how\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Box className={sharedStyle.box}>\n\t\t\t\t\t\t<NavigationRoutes\n\t\t\t\t\t\t\troutes={navRoutes}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\tclassName={sharedStyle.button}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Box>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</div>\n\t)\n}\n\nexport default SecondaryNavbar\n","/* eslint-disable import/prefer-default-export */\nimport RecentActorsIcon from \"@material-ui/icons/RecentActors\"\nimport { PrivateRoutes } from \"../../../../util/routes/routes\"\nimport { INavRoutes } from \"../../_config/shape\"\n\n// Nav routes definition for the Primary navigation\nexport const routes: INavRoutes[] = [\n\t{\n\t\troute: PrivateRoutes.ClientList,\n\t\ttitle: \"Client List\",\n\t\tIcon: RecentActorsIcon,\n\t},\n]\n","import React, { ReactElement } from \"react\"\nimport { AppBar, Box, Toolbar, Button } from \"@material-ui/core\"\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\"\nimport { useSharedNavStyles } from \"../_config/style\"\nimport { NavigationRoutes } from \"../_partials\"\nimport { routes } from \"./_config/data\"\nimport { IPublicNavbarProps } from \"./_config/shape\"\nimport { PublicRoutes } from \"../../../util/routes/routes\"\nimport Logo from \"../../Logo\"\n\n/**\n * Renders the primary navigation\n *\n * @returns {ReactElement}\n */\nconst PublicNavbar = ({ hasClients }: IPublicNavbarProps): ReactElement => {\n\tconst sharedStyle = useSharedNavStyles()\n\n\treturn (\n\t\t<div className={sharedStyle.root}>\n\t\t\t<AppBar position=\"static\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<Box className={`${sharedStyle.logoBox} ${sharedStyle.publicLogo}`}>\n\t\t\t\t\t\t<Logo to={PublicRoutes.Home} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box className={sharedStyle.box}>\n\t\t\t\t\t\t{/* Show the client list button if the user has clients */}\n\t\t\t\t\t\t{hasClients ? (\n\t\t\t\t\t\t\t<NavigationRoutes\n\t\t\t\t\t\t\t\troutes={routes}\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t\tclassName={sharedStyle.button}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{/* TODO: Pull into a separate component to add modal trigger and content */}\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={sharedStyle.button}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\tstartIcon={<HelpOutlineIcon />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tHelp\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Box>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</div>\n\t)\n}\n\nexport default PublicNavbar\n","import { makeStyles } from \"@material-ui/core\"\n\n// Styles for the Expandable nav\nconst useExpandableNavStyles = makeStyles((theme) => ({\n\tdetails: {\n\t\tpaddingLeft: 0,\n\t\tpaddingRight: 0,\n\t\tflexDirection: \"column\",\n\t},\n\tsummary: {\n\t\t\"& .MuiExpansionPanelSummary-content\": {\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t},\n\tsubHeading: {\n\t\tcolor: theme.palette.grey[700],\n\t\tfontSize: theme.typography.caption.fontSize,\n\t\tfontWeight: theme.typography.fontWeightRegular,\n\t\tdisplay: \"block\",\n\t},\n}))\n\nexport default useExpandableNavStyles\n","import React, { ReactElement } from \"react\"\nimport {\n\tExpansionPanel,\n\tExpansionPanelSummary,\n\tTypography,\n\tExpansionPanelDetails,\n} from \"@material-ui/core\"\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport { IExpandableNavProps } from \"./_config/shape\"\nimport useExpandableNavStyles from \"./_config/styles\"\n\n/**\n * Sets up the core for the `ExpansionPanel` component. As a developer,\n * you'll have to provide the content for the `<ExpansionPanelDetails>`\n * component\n *\n * @param {string} {title} Title to display in the summary. Defaults to \"Control Panel\"\n * @param {ReactNode} {children} Content for display inside `<ExpansionPanelDetails>`\n * @returns ReactElement\n */\nconst ExpandableNav = ({\n\ttitle = \"Control Panel\",\n\tsubHeading,\n\tdefaultExpanded = true,\n\tchildren,\n}: IExpandableNavProps): ReactElement => {\n\tconst styles = useExpandableNavStyles()\n\n\treturn (\n\t\t<ExpansionPanel\n\t\t\tdefaultExpanded={defaultExpanded}\n\t\t\tTransitionProps={{ unmountOnExit: true }}\n\t\t>\n\t\t\t<ExpansionPanelSummary\n\t\t\t\texpandIcon={<ExpandMoreIcon />}\n\t\t\t\tclassName={styles.summary}\n\t\t\t>\n\t\t\t\t<Typography variant=\"h6\">{title}</Typography>\n\t\t\t\t{subHeading && (\n\t\t\t\t\t<Typography className={styles.subHeading} variant=\"h6\">\n\t\t\t\t\t\t{subHeading}\n\t\t\t\t\t</Typography>\n\t\t\t\t)}\n\t\t\t</ExpansionPanelSummary>\n\t\t\t<ExpansionPanelDetails className={styles.details}>\n\t\t\t\t{children}\n\t\t\t</ExpansionPanelDetails>\n\t\t</ExpansionPanel>\n\t)\n}\n\nexport default React.memo(ExpandableNav)\n","/**\n * Constructs a list items key\n *\n * @param {string} key A random key that stays **consistent**\n * @param {string} idx Map index to keep it unique within that list\n * @reurns `string`\n */\nexport const constructKey = (key: string, idx: number): string => {\n\treturn `${key}.${idx}`\n}\n\n/**\n * Generates a random key string\n *\n * @returns `string`\n */\nexport const generateKey = (): string => {\n\t// const arr = new Uint32Array(1)\n\t// window.crypto.getRandomValues(arr)\n\n\t// return `${arr[0]}`\n\treturn `${new Date().getTime()}`\n}\n","import {\n\tdifferenceInCalendarDays,\n\taddWeeks,\n\taddMonths,\n\taddYears,\n} from \"date-fns\"\nimport { CFCTimeFrame } from \"../../data/_config/shape\"\n\nexport const newTimestamp = (): number => new Date().getTime()\n\n/**\n * Checks if the end date should be synced with the start date\n *\n * @export\n * @param {Date} start\n * @param {Date} end\n * @returns {boolean}\n */\nexport function syncEndDate(start: Date, end: Date): boolean {\n\treturn differenceInCalendarDays(start, end) > 0\n}\n\nexport function calculatedEndDate(start: Date, timeframe: CFCTimeFrame): Date {\n\tswitch (timeframe) {\n\t\tcase \"weekly\":\n\t\t\treturn addWeeks(start, 1)\n\t\tcase \"fortnightly\":\n\t\t\treturn addWeeks(start, 2)\n\t\tcase \"monthly\":\n\t\t\treturn addMonths(start, 1)\n\t\tcase \"quaterly\":\n\t\t\treturn addMonths(start, 3)\n\t\tcase \"biannually\":\n\t\t\treturn addMonths(start, 6)\n\t\tcase \"yearly\":\n\t\t\treturn addYears(start, 1)\n\t\tcase \"other\":\n\t\tdefault:\n\t\t\treturn start\n\t}\n}\n","/**\n * Checks if a object has a property\n *\n * @param {any} obj\n * @param {string} prop\n * @returns {boolean}\n */\nconst hasProperty = (obj: any, prop: string): boolean =>\n\tObject.prototype.hasOwnProperty.call(obj, prop)\n\nexport default hasProperty\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport SelectField from \"../SelectField\"\nimport { CanvasType } from \"../../data/_config/shape\"\nimport { canvasTypeOptions } from \"./__config/utilities\"\n\n/**\n * Select field for the Canvas Type value\n *\n * @export\n * @param {ControlProps<CanvasType>} {\n * \tonChange,\n * \tvalue,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function CanvasTypeSelect({\n\tonChange,\n\tvalue,\n}: ControlProps<CanvasType>): ReactElement {\n\treturn (\n\t\t<SelectField\n\t\t\tname=\"canvasType\"\n\t\t\tvalue={value}\n\t\t\tlabel=\"Canvas type\"\n\t\t\tonChange={onChange}\n\t\t\toptions={canvasTypeOptions()}\n\t\t/>\n\t)\n})\n","/**\n * Uppercases the first character in a string\n *\n * @param lower\n * @returns {string}\n */\nconst upperFirst = (lower: string): string =>\n\tlower.replace(/^\\w/, (c) => c.toUpperCase())\n\nexport default upperFirst\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport { CFCTimeFrame } from \"../../data/_config/shape\"\nimport SelectField from \"../SelectField\"\nimport { canvasTimeFrameOptions } from \"./__config/utilities\"\n\n/**\n * Select field for the Canvas time-frame value\n *\n * @export\n * @param {ControlProps<CFCTimeFrame>} {\n * \tonChange,\n * \tvalue,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function CanvasTimeFrameSelect({\n\tonChange,\n\tvalue,\n}: ControlProps<CFCTimeFrame>): ReactElement {\n\treturn (\n\t\t<SelectField\n\t\t\tname=\"canvasTimeFrame\"\n\t\t\tvalue={value}\n\t\t\tlabel=\"Canvas time-frame\"\n\t\t\tonChange={onChange}\n\t\t\toptions={canvasTimeFrameOptions()}\n\t\t/>\n\t)\n})\n","import { Dispatch } from \"react\"\nimport {\n\tIClientReducerAction,\n\tClientActionTypes,\n} from \"../../state/client/client-outline\"\nimport ClientUseCase from \"./ClientLogic\"\nimport {\n\tgetStorageClient,\n\temptyClientValue,\n} from \"../../util/localStorage/client\"\nimport filterById from \"../../util/filters/ById\"\n\n/**\n * Syncs the client state with the db\n *\n * @param {Dispatch<IClientReducerAction>} dispatch Dispatch method for the client state\n * @returns Promise<void>\n * TODO: return promise to be resovled from the form\n */\nconst syncClientsWithDb = async (\n\tdispatch: Dispatch<IClientReducerAction>\n): Promise<void> => {\n\tconst clients = await ClientUseCase.syncWithDatabase()\n\n\tdispatch({\n\t\ttype: ClientActionTypes.BulkAdd,\n\t\tpayload: clients,\n\t})\n\n\tconst currentStorageClient = getStorageClient()\n\n\tif (!currentStorageClient || currentStorageClient === emptyClientValue) {\n\t\tif (clients[0]?.id) {\n\t\t\tdispatch({\n\t\t\t\ttype: ClientActionTypes.ChangeCurrentClient,\n\t\t\t\tpayload: clients[0].id,\n\t\t\t})\n\t\t}\n\t} else {\n\t\tconst filtered = clients.filter(filterById(currentStorageClient))\n\t\tif (filtered[0]?.id) {\n\t\t\tdispatch({\n\t\t\t\ttype: ClientActionTypes.ChangeCurrentClient,\n\t\t\t\tpayload: filtered[0].id,\n\t\t\t})\n\t\t}\n\t}\n\n\tdispatch({\n\t\ttype: ClientActionTypes.UpdateClientSynced,\n\t\tpayload: true,\n\t})\n}\n\nexport default syncClientsWithDb\n","import React, { ReactElement, cloneElement, memo } from \"react\"\nimport { makeStyles } from \"@material-ui/core\"\nimport { isSameDay } from \"date-fns\"\nimport { KeyboardDatePicker } from \"@material-ui/pickers\"\nimport { useStyles as useDayStyles } from \"@material-ui/pickers/views/Calendar/Day\"\nimport { SinglePickerProps } from \"../__config/shape\"\n\nconst useStyles = makeStyles((theme) => ({\n\tdateHighlight: {\n\t\tborderWidth: `1px`,\n\t\tborderColor: theme.palette.primary.main,\n\t\tborderStyle: \"dashed\",\n\t},\n}))\n\n/**\n * A single Date picker field used in the Range picker\n *\n * @export\n * @param {SinglePickerProps} {\n * \tvalue,\n * \tonChange,\n * \topen,\n * \tonOpen,\n * \tonClose,\n * \tlabel,\n * \tcompareDay,\n * \tid,\n * \tminDate = new Date(1900, 1, 1),\n * }\n * @returns {ReactElement}\n */\nfunction SinglePicker({\n\tvalue,\n\tonChange,\n\topen,\n\tonOpen,\n\tonClose,\n\tlabel,\n\tcompareDay,\n\tid,\n\tminDate,\n}: SinglePickerProps): ReactElement {\n\tconst curStyles = useDayStyles()\n\tconst customCls = useStyles()\n\n\t/**\n\t * Renders the day components based on the current date selected\n\t *\n\t * @param {Date} compare\n\t * @returns\n\t */\n\tfunction renderDay(compare: Date) {\n\t\treturn (\n\t\t\tday: Date | null,\n\t\t\tselectedDate: Date | null,\n\t\t\tisInCurrentMonth: boolean,\n\t\t\tdayComponent: ReactElement\n\t\t): ReactElement => {\n\t\t\tif (day && isSameDay(day, compare)) {\n\t\t\t\treturn cloneElement(dayComponent, {\n\t\t\t\t\tclassName: `${curStyles.day} ${customCls.dateHighlight}`,\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn dayComponent\n\t\t}\n\t}\n\n\tfunction onDateChange(date: Date | null): void {\n\t\tonChange(date, id)\n\t}\n\n\treturn (\n\t\t<KeyboardDatePicker\n\t\t\tvalue={value}\n\t\t\tdisableToolbar\n\t\t\tvariant=\"inline\"\n\t\t\tinputVariant=\"outlined\"\n\t\t\tonChange={onDateChange}\n\t\t\tminDate={minDate}\n\t\t\topen={open}\n\t\t\tformat=\"dd/MM/yyyy\"\n\t\t\tonOpen={onOpen}\n\t\t\tonClose={onClose}\n\t\t\tlabel={label}\n\t\t\trenderDay={renderDay(compareDay)}\n\t\t\tfullWidth\n\t\t/>\n\t)\n}\n\nexport default memo(SinglePicker)\n","import React, {\n\tReactElement,\n\tuseState,\n\tuseEffect,\n\tmemo,\n\tuseCallback,\n} from \"react\"\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\"\nimport DateFnsUtils from \"@date-io/date-fns\"\nimport { Typography, makeStyles, Box } from \"@material-ui/core\"\nimport { DateRangeProps, OpenState } from \"./__config/shape\"\nimport { SinglePicker } from \"./__partials\"\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"row\",\n\t\talignItems: \"flex-start\",\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tflexDirection: \"column\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t},\n\tseparator: {\n\t\tpaddingRight: theme.spacing(1),\n\t\tpaddingLeft: theme.spacing(1),\n\t\tcolor: theme.palette.grey[500],\n\t\ttextTransform: \"uppercase\",\n\t\tfontSize: theme.typography.fontSize,\n\t\tlineHeight: \"56px\",\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tlineHeight: \"40px\",\n\t\t},\n\t},\n}))\n\n/**\n * Date range selector\n *\n * @export\n * @param {DateRangeProps} {\n * \tstartDate,\n * \tendDate,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nconst DateRange = memo(function DateRange({\n\tstartDate,\n\tendDate,\n\tonChange,\n}: DateRangeProps): ReactElement {\n\tconst [open, setOpen] = useState<OpenState>({ start: false, end: false })\n\tconst classes = useStyles()\n\n\t/**\n\t * Change the open state of the datepicker modal\n\t *\n\t * @param {keyof OpenState} key\n\t */\n\tfunction onOpen(key: keyof OpenState): void {\n\t\tsetOpen({\n\t\t\tstart: false,\n\t\t\tend: false,\n\t\t\t[key]: true,\n\t\t})\n\t}\n\n\tconst openStart = useCallback(() => onOpen(\"start\"), [])\n\tconst openEnd = useCallback(() => onOpen(\"end\"), [])\n\n\t/**\n\t * Closes the datepickers\n\t *\n\t */\n\tconst onClose = useCallback((): void => {\n\t\tsetOpen({\n\t\t\tstart: false,\n\t\t\tend: false,\n\t\t})\n\t}, [])\n\n\t/**\n\t * Triggers the passed in onChange method\n\t *\n\t * @param {(Date | null)} date\n\t * @param {keyof OpenState} key\n\t */\n\tconst onDateChange = useCallback(\n\t\t(date: Date | null, key: keyof OpenState): void => {\n\t\t\tif (date) {\n\t\t\t\tif (key === \"start\") {\n\t\t\t\t\tonChange(\"canvasStartDate\", date)\n\t\t\t\t} else {\n\t\t\t\t\tonChange(\"canvasEndDate\", date)\n\t\t\t\t\tonClose()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[onChange, onClose]\n\t)\n\n\t// When the start date is edited and the panel is still open\n\t// Change to the end date panel\n\tuseEffect(() => {\n\t\tif (open.start) {\n\t\t\tonOpen(\"end\")\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [startDate])\n\n\treturn (\n\t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\n\t\t\t<Box className={classes.root}>\n\t\t\t\t<SinglePicker\n\t\t\t\t\tvalue={startDate}\n\t\t\t\t\tonChange={onDateChange}\n\t\t\t\t\topen={open.start}\n\t\t\t\t\tonOpen={openStart}\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tlabel=\"Start Date\"\n\t\t\t\t\tcompareDay={endDate}\n\t\t\t\t\tid=\"start\"\n\t\t\t\t/>\n\t\t\t\t<Typography component=\"span\" className={classes.separator}>\n\t\t\t\t\tto\n\t\t\t\t</Typography>\n\t\t\t\t<SinglePicker\n\t\t\t\t\tvalue={endDate}\n\t\t\t\t\tonChange={onDateChange}\n\t\t\t\t\topen={open.end}\n\t\t\t\t\tonOpen={openEnd}\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tlabel=\"End Date\"\n\t\t\t\t\tcompareDay={startDate}\n\t\t\t\t\tid=\"end\"\n\t\t\t\t\tminDate={startDate}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</MuiPickersUtilsProvider>\n\t)\n})\n\nexport default DateRange\n","import React, { ReactElement } from \"react\"\nimport {\n\tBox,\n\tFormControlLabel,\n\tCheckbox,\n\tTextField,\n\tTooltip,\n\tDivider,\n} from \"@material-ui/core\"\nimport InfoIcon from \"@material-ui/icons/Info\"\nimport { useCustomTitleStyles } from \"./__config/styles\"\n\n/**\n * Prop definition for the custom title form\n *\n * @interface UseCustomTitleProps\n */\ninterface UseCustomTitleProps {\n\tuseCustom: boolean\n\tonChange: InputChange\n\tchangeCheck: InputChange\n\ttitle: string\n}\n\nconst tipContent =\n\t\"To make idenfiying canvases easier, you are able to assign a custom title to the canvas. However, you can disable this and the canvas title will be made up of the four fields below\"\n\n/**\n * Component that allows a user to opt into a custom canvas title\n * and provides them with a input field\n *\n * @export\n * @param {UseCustomTitleProps} {\n * \tuseCustom,\n * \tonChange,\n * \tchangeCheck,\n * \ttitle,\n * }\n * @returns {ReactElement}\n */\nexport default function UseCustomTitle({\n\tuseCustom,\n\tonChange,\n\tchangeCheck,\n\ttitle,\n}: UseCustomTitleProps): ReactElement {\n\tconst cls = useCustomTitleStyles()\n\n\treturn (\n\t\t<Box>\n\t\t\t{useCustom && (\n\t\t\t\t<TextField\n\t\t\t\t\tname=\"canvasTitle\"\n\t\t\t\t\tlabel=\"Custom canvas title\"\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tvalue={title}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tfullWidth\n\t\t\t\t\tclassName={cls.textField}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Box className={cls.checkboxRoot}>\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tname=\"use-custom-title\"\n\t\t\t\t\t\t\tonChange={changeCheck}\n\t\t\t\t\t\t\tchecked={useCustom}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel=\"Use a custom title\"\n\t\t\t\t/>\n\t\t\t\t<Tooltip title={tipContent}>\n\t\t\t\t\t<InfoIcon color=\"primary\" />\n\t\t\t\t</Tooltip>\n\t\t\t</Box>\n\t\t\t<Divider className={cls.divider} />\n\t\t</Box>\n\t)\n}\n","import React, {\n\tReactElement,\n\tmemo,\n\tuseEffect,\n\tuseCallback,\n\tuseContext,\n} from \"react\"\nimport { Box, Grid } from \"@material-ui/core\"\nimport { useParams } from \"react-router-dom\"\nimport Alert from \"@material-ui/lab/Alert\"\nimport { isValid } from \"date-fns\"\nimport { useInputWrapper } from \"./__config/styles\"\nimport CanvasTypeSelect from \"./CanvasType\"\nimport CanvasTimeFrameSelect from \"./CanvasTimeFrame\"\nimport DateRange from \"../DateRange\"\nimport UseCustomTitle from \"./UseCustomTitle\"\nimport { PanelProps, CustomTitleProps } from \"./__config/shape\"\nimport useCurrentClient from \"../../state/client/useCurrentClient\"\nimport { performDupFind } from \"./__config/utilities\"\nimport CFCContext from \"../../state/CFC/context\"\nimport { CFCActionTypes } from \"../../state/CFC/shape\"\nimport Spacer from \"../Spacer\"\n\n/**\n * Prop definition for the ConfigPanel component\n *\n * @interface ConfigPanelProps\n */\ninterface ConfigPanelProps extends PanelProps, CustomTitleProps {\n\twrapped?: boolean\n\tshowDuplicateError?: boolean\n}\n\n// Duplicate canvas error message\nexport const DuplicateCanvasError = (): ReactElement => (\n\t<Alert severity=\"error\">\n\t\tA canvas with this title has already been created. Make sure that your\n\t\tcanvas title is unique.\n\t</Alert>\n)\n\n/**\n * Wraps the config panel form in memo to ensure it only\n * re-render when required\n *\n */\nconst Panel = memo(function Panel({\n\tcanvasTimeframeValue,\n\tcanvasTypeValue,\n\tstartDate,\n\tendDate,\n\tonChange,\n\tonDateChange,\n\tcustomTitle,\n\tuseCustomTitle,\n}: PanelProps) {\n\tconst [currentClient, clientSynced] = useCurrentClient()\n\tconst { id } = useParams()\n\tconst { dispatch } = useContext(CFCContext)\n\tconst fetchPossibleDups = useCallback(async () => {\n\t\tif (currentClient?.id) {\n\t\t\tconst dup = await performDupFind(\n\t\t\t\t{\n\t\t\t\t\tcanvasEndDate: endDate,\n\t\t\t\t\tcanvasStartDate: startDate,\n\t\t\t\t\tcanvasTitle: customTitle,\n\t\t\t\t\tcanvasTimeFrame: canvasTimeframeValue,\n\t\t\t\t\tcanvasType: canvasTypeValue,\n\t\t\t\t},\n\t\t\t\tcurrentClient.id,\n\t\t\t\tuseCustomTitle,\n\t\t\t\tid || undefined\n\t\t\t)\n\n\t\t\tdispatch({\n\t\t\t\ttype: CFCActionTypes.ChangeDuplicateError,\n\t\t\t\tpayload: dup !== false,\n\t\t\t})\n\t\t}\n\t}, [\n\t\tcanvasTypeValue,\n\t\tcanvasTimeframeValue,\n\t\tcurrentClient,\n\t\tendDate,\n\t\tstartDate,\n\t\tcustomTitle,\n\t\tid,\n\t\tdispatch,\n\t\tuseCustomTitle,\n\t])\n\n\tuseEffect(() => {\n\t\tif (clientSynced) {\n\t\t\tfetchPossibleDups()\n\t\t}\n\t}, [fetchPossibleDups, clientSynced, id])\n\n\t// Checks if the start and end date is valid\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: CFCActionTypes.ChangeInvalidDateError,\n\t\t\tpayload: !isValid(startDate) || !isValid(endDate),\n\t\t})\n\t}, [startDate, endDate, dispatch])\n\n\treturn (\n\t\t<>\n\t\t\t<Grid container spacing={2}>\n\t\t\t\t<Grid item xs={12} md={3}>\n\t\t\t\t\t<CanvasTypeSelect value={canvasTypeValue} onChange={onChange} />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12} md={3}>\n\t\t\t\t\t<CanvasTimeFrameSelect\n\t\t\t\t\t\tvalue={canvasTimeframeValue}\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t<DateRange\n\t\t\t\t\t\tstartDate={startDate}\n\t\t\t\t\t\tendDate={endDate}\n\t\t\t\t\t\tonChange={onDateChange}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</>\n\t)\n})\n\n/**\n * Config panel component found at the top of the CFC form\n *\n * @export\n * @param {ConfigPanelProps} {\n * \tcanvasTimeframeValue,\n * \tcanvasTypeValue,\n * \tstartDate,\n * \tendDate,\n * \tonChange,\n * \tonDateChange,\n * \tcustomTitle,\n * \tchangeCheck,\n * \tuseCustomTitle,\n * }\n * @returns {ReactElement}\n */\nfunction ConfigPanel({\n\tcanvasTimeframeValue,\n\tcanvasTypeValue,\n\tstartDate,\n\tendDate,\n\tonChange,\n\tonDateChange,\n\tcustomTitle,\n\tchangeCheck,\n\tuseCustomTitle,\n\twrapped = true,\n\tshowDuplicateError = true,\n}: ConfigPanelProps): ReactElement {\n\tconst wrapperCls = useInputWrapper()\n\tconst { duplicateError } = useContext(CFCContext)\n\n\treturn (\n\t\t<Box className={`${wrapped ? wrapperCls.wrapper : \"\"}`}>\n\t\t\t<UseCustomTitle\n\t\t\t\ttitle={customTitle}\n\t\t\t\tonChange={onChange}\n\t\t\t\tuseCustom={useCustomTitle}\n\t\t\t\tchangeCheck={changeCheck}\n\t\t\t/>\n\t\t\t<Panel\n\t\t\t\tcanvasTypeValue={canvasTypeValue}\n\t\t\t\tcanvasTimeframeValue={canvasTimeframeValue}\n\t\t\t\tstartDate={startDate}\n\t\t\t\tendDate={endDate}\n\t\t\t\tonDateChange={onDateChange}\n\t\t\t\tonChange={onChange}\n\t\t\t\tcustomTitle={customTitle}\n\t\t\t\tuseCustomTitle={useCustomTitle}\n\t\t\t/>\n\t\t\t{showDuplicateError && duplicateError && (\n\t\t\t\t<>\n\t\t\t\t\t<Spacer />\n\t\t\t\t\t<DuplicateCanvasError />\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Box>\n\t)\n}\n\nexport default memo(ConfigPanel)\n","import React, { ReactElement } from \"react\"\nimport { FormControl, InputLabel, Select, MenuItem } from \"@material-ui/core\"\n\ntype SelectValue = string | number\n\nexport type SelectFieldOpt = { value: SelectValue; label: string }\n\nexport type SelectFieldOptions = SelectFieldOpt[]\n\n/**\n * Prop definition for the SelectField component\n *\n * @interface SelectFieldProps\n */\ninterface SelectFieldProps {\n\tname: string\n\tlabel: string\n\tvalue: SelectValue\n\tonChange: InputChange\n\toptions: SelectFieldOptions\n}\n\n/**\n * Abstraction used for a select field\n *\n * @export\n * @param {SelectFieldProps} {\n * \tname,\n * \tlabel,\n * \tvalue,\n * \tonChange,\n * \toptions,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function SelectField({\n\tname,\n\tlabel,\n\tvalue,\n\tonChange,\n\toptions,\n}: SelectFieldProps): ReactElement {\n\treturn (\n\t\t<FormControl variant=\"outlined\" fullWidth>\n\t\t\t<InputLabel id={`${name}--label`}>{label}</InputLabel>\n\t\t\t<Select\n\t\t\t\tlabelId={`${name}--label`}\n\t\t\t\tid={name}\n\t\t\t\tname={name}\n\t\t\t\tvalue={value}\n\t\t\t\tonChange={onChange}\n\t\t\t\tlabel={label}\n\t\t\t>\n\t\t\t\t{options.map((opt) => (\n\t\t\t\t\t<MenuItem value={opt.value} key={`${name}--${opt.label}`}>\n\t\t\t\t\t\t{opt.label}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t))}\n\t\t\t</Select>\n\t\t</FormControl>\n\t)\n})\n","import { makeStyles } from \"@material-ui/core\"\n\nconst usePrimaryStyles = makeStyles((theme) => ({\n\tclientCaption: {\n\t\ttextTransform: \"uppercase\",\n\t\tlineHeight: 1,\n\t\tdisplay: \"block\",\n\t},\n\tclientName: {\n\t\tlineHeight: 1,\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tfontSize: theme.typography.pxToRem(18),\n\t\t},\n\t},\n\tclientGridItem: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t},\n}))\n\nexport default usePrimaryStyles\n","/* eslint-disable import/prefer-default-export */\nimport RecentActorsIcon from \"@material-ui/icons/RecentActors\"\nimport DescriptionIcon from \"@material-ui/icons/Description\"\nimport { PrivateRoutes } from \"../../../../util/routes/routes\"\nimport { INavRoutes } from \"../../_config/shape\"\n\n// Nav routes definition for the Primary navigation\nexport const routes: INavRoutes[] = [\n\t{\n\t\troute: PrivateRoutes.ClientList,\n\t\ttitle: \"Client List\",\n\t\tIcon: RecentActorsIcon,\n\t},\n\t{\n\t\troute: PrivateRoutes.SessionFiles,\n\t\ttitle: \"Downloads\",\n\t\tIcon: DescriptionIcon,\n\t},\n]\n","/* eslint-disable import/prefer-default-export */\nimport {\n\tPrivateRoutes,\n\trouteVarReplacement,\n} from \"../../../../util/routes/routes\"\nimport { INavRoutes } from \"../../_config/shape\"\n\n// Nav routes definition for the Secondary navigation\nexport const routes: INavRoutes[] = [\n\t{\n\t\troute: PrivateRoutes.CoachingKit,\n\t\ttitle: \"Get Started\",\n\t},\n\t{\n\t\troute: routeVarReplacement(PrivateRoutes.HealthCheckQuiz, [[\":id?\", \"\"]]),\n\t\ttitle: \"Health Check\",\n\t},\n\t{\n\t\troute: PrivateRoutes.DiscoverTopics,\n\t\ttitle: \"Discover Topics\",\n\t},\n\t{\n\t\troute: PrivateRoutes.CFC,\n\t\ttitle: \"Cash Flow Canvas\",\n\t},\n\t{\n\t\troute: PrivateRoutes.ChangeLevers,\n\t\ttitle: \"Change Levers\",\n\t},\n\t{\n\t\troute: PrivateRoutes.ActionChecklist,\n\t\ttitle: \"Action Checklist\",\n\t},\n]\n","import React, { ReactElement, useState } from \"react\"\nimport PowerSettingsNewIcon from \"@material-ui/icons/PowerSettingsNew\"\nimport {\n\tButton,\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tDialogContentText,\n\tDialogActions,\n\tmakeStyles,\n\tTheme,\n\tcreateStyles,\n\tBackdrop,\n\tCircularProgress,\n} from \"@material-ui/core\"\nimport { useSharedNavStyles } from \"../Navbar/_config/style\"\nimport ClientDB from \"../../data/client/ClientDatabase\"\nimport HealthCheckDB from \"../../data/healthChecks/HealthCheckDatabase\"\nimport ActionChecklistDB from \"../../data/ActionChecklist/ActionChecklistDatabase\"\nimport CFCDB from \"../../data/CFC/CFCDatabase\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\tbackdrop: {\n\t\t\tzIndex: theme.zIndex.drawer + 1,\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t})\n)\n\ninterface LogoutProps {\n\tcolor?: \"inherit\" | \"primary\" | \"secondary\" | \"default\"\n\tvariant?: \"text\" | \"outlined\" | \"contained\"\n}\n\nexport default function Logout({\n\tcolor = \"inherit\",\n\tvariant = \"text\",\n}: LogoutProps): ReactElement {\n\tconst sharedStyle = useSharedNavStyles()\n\tconst classes = useStyles()\n\tconst [open, setOpen] = useState(false)\n\tconst [loading, setLoading] = useState(false)\n\n\tconst handleOpen = (): void => setOpen(true)\n\tconst handleClose = (): void => setOpen(false)\n\n\tconst exitApplication = async (): Promise<void> => {\n\t\tsetLoading(true)\n\t\tClientDB.close()\n\t\tHealthCheckDB.close()\n\t\tActionChecklistDB.close()\n\t\tCFCDB.close()\n\n\t\tawait ClientDB.delete()\n\t\tawait HealthCheckDB.delete()\n\t\tawait ActionChecklistDB.delete()\n\t\tawait CFCDB.delete()\n\n\t\twindow.location.replace(\"/\")\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tclassName={sharedStyle.button}\n\t\t\t\tcolor={color}\n\t\t\t\tstartIcon={<PowerSettingsNewIcon />}\n\t\t\t\tonClick={handleOpen}\n\t\t\t\tvariant={variant}\n\t\t\t>\n\t\t\t\tExit\n\t\t\t</Button>\n\t\t\t<Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"sm\">\n\t\t\t\t<DialogTitle>Are you sure you want to exit?</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText>\n\t\t\t\t\t\tMake sure you have saved all your data before you leave as all\n\t\t\t\t\t\texisting data will be deleted.\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={handleClose} disabled={loading}>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={exitApplication}\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t>\n\t\t\t\t\t\tExit\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t\t<Backdrop className={classes.backdrop} open={loading}>\n\t\t\t\t\t<CircularProgress color=\"inherit\" />\n\t\t\t\t</Backdrop>\n\t\t\t</Dialog>\n\t\t</>\n\t)\n}\n","import React, {\n\tReactElement,\n\tmemo,\n\tChangeEvent,\n\tuseState,\n\tuseRef,\n\tMouseEvent,\n} from \"react\"\nimport {\n\tTextField,\n\tInputAdornment,\n\tOutlinedTextFieldProps,\n} from \"@material-ui/core\"\nimport { formatNumber } from \"../../util/money/formatting\"\n\n/**\n * Abstraction for a textfield used to input money\n *\n * @export\n * @param {TextFieldProps} props\n * @returns {ReactElement}\n */\nexport default memo(function MoneyInput({\n\tonChange,\n\tvalue,\n\t// eslint-disable-next-line\n\t...props\n}: OutlinedTextFieldProps): ReactElement {\n\tconst [useMimic, setUseMimic] = useState(true)\n\tconst [error, setError] = useState(\"\")\n\tconst input = useRef<HTMLInputElement>()\n\n\t/**\n\t * Does some input value checks before firing the onChange method\n\t *\n\t * @param {ChangeEvent<HTMLInputElement>} e\n\t */\n\tfunction onChangePreCheck(e: ChangeEvent<HTMLInputElement>): void {\n\t\tconst inputVal: string = e.target.value === \"\" ? \"0\" : e.target.value\n\t\tif (\n\t\t\t`${inputVal}`.startsWith(\"00\") ||\n\t\t\t(`${value}`.startsWith(\"0\") && `${inputVal}`.length > 1)\n\t\t) {\n\t\t\tsetError(\"Amount can't start with a zero\")\n\t\t\treturn\n\t\t}\n\n\t\tif (inputVal.match(/\\D/g)) {\n\t\t\tsetError(\"Amount can only include digits\")\n\t\t\treturn\n\t\t}\n\n\t\tconst val = parseInt(inputVal, 10)\n\t\t// eslint-disable-next-line no-restricted-globals\n\t\tif (isNaN(val) || val > 999999999) {\n\t\t\tsetError(\"Please enter a valid number between 0 and 999,999,999\")\n\t\t\treturn\n\t\t}\n\t\tsetError(\"\")\n\n\t\tif (typeof onChange !== \"undefined\") {\n\t\t\tonChange(e)\n\t\t}\n\t}\n\n\tfunction onBlur(): void {\n\t\tsetUseMimic(true)\n\t}\n\n\tfunction onFocus(): void {\n\t\tsetUseMimic(false)\n\t\tif (value === 0 && input.current) {\n\t\t\t// input.current.select()\n\t\t\tinput.current.setSelectionRange(0, 9999)\n\t\t}\n\t}\n\n\tfunction onMouseUp(e: MouseEvent): void {\n\t\te.preventDefault()\n\t}\n\n\treturn (\n\t\t<TextField\n\t\t\tfullWidth\n\t\t\tInputProps={{\n\t\t\t\tstartAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n\t\t\t\tendAdornment: <InputAdornment position=\"end\">.00</InputAdornment>,\n\t\t\t\tinputProps: {\n\t\t\t\t\tmin: 0,\n\t\t\t\t\tmax: 999999999,\n\t\t\t\t\tstep: 1,\n\t\t\t\t\tref: input,\n\t\t\t\t},\n\t\t\t}}\n\t\t\tlabel=\"Amount\"\n\t\t\tplaceholder=\"0\"\n\t\t\tonChange={onChangePreCheck}\n\t\t\tonBlur={onBlur}\n\t\t\tonFocus={onFocus}\n\t\t\tonMouseUp={onMouseUp}\n\t\t\tvalue={useMimic ? formatNumber(`${value}`) : value}\n\t\t\terror={error !== \"\"}\n\t\t\thelperText={error}\n\t\t\t// eslint-disable-next-line react/jsx-props-no-spreading\n\t\t\t{...props}\n\t\t/>\n\t)\n})\n","import { RouteProps } from \"react-router-dom\"\nimport { PublicRoutes } from \"./routes\"\n\n/**\n * Checks if the current location path is in the Public Routes enum\n *\n * @param {RouteProps[\"location\"]} location\n * @returns boolean\n */\nconst checkIfPublic = (location: RouteProps[\"location\"]): boolean => {\n\tif (location) {\n\t\treturn (\n\t\t\t(Object.values(PublicRoutes) as string[]).indexOf(location.pathname) !==\n\t\t\t-1\n\t\t)\n\t}\n\n\treturn false\n}\n\nexport default checkIfPublic\n","import React, { ReactElement, useState, Fragment, useEffect } from \"react\"\nimport {\n\tAppBar,\n\tToolbar,\n\tIconButton,\n\tDrawer,\n\tmakeStyles,\n\tList,\n\tListItem,\n\tListItemText,\n\tDivider,\n\tListItemIcon,\n\tBox,\n\tTypography,\n} from \"@material-ui/core\"\nimport MenuIcon from \"@material-ui/icons/Menu\"\nimport { NavLink, useLocation } from \"react-router-dom\"\nimport Logo from \"../../Logo\"\nimport { PublicRoutes } from \"../../../util/routes/routes\"\nimport { routes as secondaryRoutes } from \"../Secondary/_config/data\"\nimport { routes as primaryRoutes } from \"../Primary/_config/data\"\nimport { INavRoutes } from \"../_config/shape\"\nimport useCurrentClient from \"../../../state/client/useCurrentClient\"\nimport usePrimaryStyles from \"../Primary/_config/styles\"\nimport Logout from \"../../Logout\"\nimport Spacer from \"../../Spacer\"\n\nconst useStyles = makeStyles((theme) => ({\n\tdrawer: {\n\t\tmaxWidth: \"300px\",\n\t\twidth: \"100%\",\n\t},\n\ttoolbar: {\n\t\tmaxWidth: \"100%\",\n\t\toverflow: \"hidden\",\n\t},\n\tlogo: {\n\t\t\"& h6\": {\n\t\t\tcolor: \"white\",\n\t\t},\n\t},\n\tdivider: {\n\t\tmargin: `0 ${theme.spacing(2)}px 0 ${theme.spacing(1)}px`,\n\t},\n\tclientBox: {\n\t\tflexGrow: 2,\n\t\tminWidth: 0,\n\t},\n\tchildList: {\n\t\tmarginLeft: theme.spacing(3),\n\t\tmarginBottom: theme.spacing(1),\n\t\tpaddingTop: 0,\n\t\tborderBottom: `1px solid ${theme.palette.divider}`,\n\t},\n\titem: {\n\t\tcolor: \"inherit\",\n\t\t\"&.active\": {\n\t\t\tfontWeight: theme.typography.fontWeightBold,\n\t\t\t\"& *\": {\n\t\t\t\tfontWeight: \"inherit\",\n\t\t\t},\n\t\t},\n\t},\n}))\n\n/**\n * Renders the mobile navigation for the Private side of the app\n *\n * @export\n * @returns {ReactElement}\n */\nexport default function MobileNavbar(): ReactElement {\n\tconst [currentClient] = useCurrentClient()\n\tconst [open, setOpen] = useState(false)\n\tconst cls = useStyles()\n\tconst primaryStyle = usePrimaryStyles()\n\tconst location = useLocation()\n\n\tconst openDrawer = (): void => setOpen(true)\n\tconst closeDrawer = (): void => setOpen(false)\n\n\tuseEffect(() => {\n\t\tcloseDrawer()\n\t}, [location.pathname])\n\n\tconst renderRoutes = (route: INavRoutes): ReactElement => {\n\t\treturn (\n\t\t\t<Fragment key={route.route}>\n\t\t\t\t<ListItem component={NavLink} to={route.route} className={cls.item}>\n\t\t\t\t\t{route.Icon && (\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<route.Icon />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t)}\n\t\t\t\t\t<ListItemText primary={route.title} />\n\t\t\t\t</ListItem>\n\n\t\t\t\t{route.children ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<List className={cls.childList}>\n\t\t\t\t\t\t\t{route.children.map(renderRoutes)}\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<></>\n\t\t\t\t)}\n\t\t\t</Fragment>\n\t\t)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<AppBar position=\"static\">\n\t\t\t\t<Toolbar className={cls.toolbar}>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\taria-label=\"open drawer\"\n\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\tonClick={openDrawer}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Box className={cls.logo}>\n\t\t\t\t\t\t<Logo to={PublicRoutes.Home} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Divider orientation=\"vertical\" flexItem className={cls.divider} />\n\t\t\t\t\t<Box className={cls.clientBox}>\n\t\t\t\t\t\t{currentClient && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tclassName={primaryStyle.clientCaption}\n\t\t\t\t\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tClient\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tclassName={`${primaryStyle.clientName} truncate`}\n\t\t\t\t\t\t\t\t\tvariant=\"h6\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>{currentClient?.name || \"\"}</span>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Box>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<Drawer\n\t\t\t\tanchor=\"left\"\n\t\t\t\topen={open}\n\t\t\t\tonClose={closeDrawer}\n\t\t\t\tclasses={{ paper: cls.drawer }}\n\t\t\t>\n\t\t\t\t<List>{secondaryRoutes.map(renderRoutes)}</List>\n\t\t\t\t<Divider />\n\t\t\t\t<List>{primaryRoutes.map(renderRoutes)}</List>\n\t\t\t\t<Divider />\n\t\t\t\t<Spacer />\n\t\t\t\t<Box style={{ padding: \"0 16px\" }}>\n\t\t\t\t\t<Logout color=\"primary\" variant=\"contained\" />\n\t\t\t\t</Box>\n\t\t\t</Drawer>\n\t\t</>\n\t)\n}\n","import { ThemeOptions, createMuiTheme } from \"@material-ui/core\"\nimport {\n\tgreen,\n\tdeepOrange,\n\tlightBlue,\n\tpurple,\n\tindigo,\n} from \"@material-ui/core/colors\"\n\nexport const defaultTheme: ThemeOptions = {\n\t...createMuiTheme(),\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: indigo[\"500\"],\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: indigo[\"300\"],\n\t\t},\n\t},\n}\n\nexport const applyTheme: ThemeOptions = {\n\t...defaultTheme,\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: green[\"600\"],\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: green[\"200\"],\n\t\t},\n\t},\n}\n\nexport const discoverTheme: ThemeOptions = {\n\t...defaultTheme,\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: purple[\"500\"],\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: purple[\"200\"],\n\t\t},\n\t},\n}\n\nexport const planActionTheme: ThemeOptions = {\n\t...defaultTheme,\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: lightBlue.A700,\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: lightBlue[\"200\"],\n\t\t},\n\t},\n}\n\nexport const settingsTheme: ThemeOptions = {\n\t...defaultTheme,\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: deepOrange.A400,\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: deepOrange[\"300\"],\n\t\t},\n\t},\n}\n","import { Theme, createMuiTheme } from \"@material-ui/core\"\nimport {\n\tapplyTheme,\n\tdefaultTheme,\n\tdiscoverTheme,\n\tplanActionTheme,\n\tsettingsTheme,\n} from \"../../theme/mui/themes\"\nimport { PrivateRoutes, routeVarReplacement } from \"./routes\"\n\nconst applyThemeRoutes: string[] = [\n\tPrivateRoutes.CFC,\n\tPrivateRoutes.CFCCompare,\n\trouteVarReplacement(PrivateRoutes.CFCEdit, [[\":id\", \"\"]]),\n\tPrivateRoutes.CFCListing,\n\tPrivateRoutes.ChangeLevers,\n]\nconst discoverThemeRoutes: string[] = [\n\tPrivateRoutes.ClientList,\n\tPrivateRoutes.DiscoverTopics,\n\tPrivateRoutes.DTTrackingPerformance,\n\tPrivateRoutes.DTSellingClosingSuccession,\n\tPrivateRoutes.DTRecordKeeping,\n\tPrivateRoutes.DTPlanningFinanicalCommitments,\n\tPrivateRoutes.DTPlanningBusiness,\n\tPrivateRoutes.DTManagingCashFlow,\n\tPrivateRoutes.DTFundingBusiness,\n\tPrivateRoutes.HealthCheckList,\n\trouteVarReplacement(PrivateRoutes.HealthCheckQuiz, [[\":id?\", \"\"]]),\n\trouteVarReplacement(PrivateRoutes.HealthCheckSummary, [[\":id\", \"\"]]),\n]\nconst planActionThemeRoutes: string[] = [PrivateRoutes.ActionChecklist]\nconst settingsThemeRoutes: string[] = [PrivateRoutes.SessionFiles]\n\nfunction determineTheme(pathname: string): Theme {\n\tconst path = `${pathname.replace(/[\\d]+?$/g, \"\")}`\n\n\tif (applyThemeRoutes.indexOf(path) !== -1) {\n\t\treturn createMuiTheme(applyTheme)\n\t}\n\n\tif (discoverThemeRoutes.indexOf(path) !== -1) {\n\t\treturn createMuiTheme(discoverTheme)\n\t}\n\n\tif (planActionThemeRoutes.indexOf(path) !== -1) {\n\t\treturn createMuiTheme(planActionTheme)\n\t}\n\n\tif (settingsThemeRoutes.indexOf(path) !== -1) {\n\t\treturn createMuiTheme(settingsTheme)\n\t}\n\n\treturn createMuiTheme(defaultTheme)\n}\n\nexport default determineTheme\n","import React, { ReactElement, useEffect, useMemo } from \"react\"\nimport { useLocation, RouteProps, useHistory } from \"react-router-dom\"\nimport { makeStyles, Box, ThemeProvider } from \"@material-ui/core\"\nimport { PrimaryNavbar, SecondaryNavbar } from \"../../Navbar\"\nimport { IPrivatePage } from \"./_config/shape\"\nimport checkIfPublic from \"../../../util/routes/checkIfPublic\"\nimport MobileNavbar from \"../../Navbar/Mobile\"\nimport useCurrentClient from \"../../../state/client/useCurrentClient\"\nimport { PrivateRoutes, PublicRoutes } from \"../../../util/routes/routes\"\nimport determineTheme from \"../../../util/routes/routeTheming\"\n\nconst useStyles = makeStyles((theme) => ({\n\tdesktop: {\n\t\tdisplay: \"none\",\n\t\t[theme.breakpoints.up(\"md\")]: {\n\t\t\tdisplay: \"block\",\n\t\t},\n\t},\n\tmobile: {\n\t\tdisplay: \"block\",\n\t\t[theme.breakpoints.up(\"md\")]: {\n\t\t\tdisplay: \"none\",\n\t\t},\n\t},\n}))\n\n/**\n * Private page layout, renders the navigation and the children provided to it.\n *\n * @param {ReactNode} { children } Page content to render below the navigation\n * @returns {ReactElement}\n */\nconst PrivatePage = ({ children }: IPrivatePage): ReactElement => {\n\tconst location: RouteProps[\"location\"] = useLocation()\n\tconst styles = useStyles()\n\tconst history = useHistory()\n\tconst [currentClient, clientSynced] = useCurrentClient()\n\n\tuseEffect(() => {\n\t\tif (clientSynced) {\n\t\t\tif (!currentClient || !currentClient?.id) {\n\t\t\t\tconst allowed = [\n\t\t\t\t\tPrivateRoutes.ClientList as string,\n\t\t\t\t\tPublicRoutes.Home as string,\n\t\t\t\t]\n\t\t\t\tif (allowed.indexOf(location.pathname) === -1) {\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\thistory.push(PublicRoutes.Home)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [clientSynced, currentClient, location, history])\n\n\tconst theme = useMemo(() => {\n\t\treturn determineTheme(location.pathname)\n\t}, [location])\n\n\treturn (\n\t\t<>\n\t\t\t{!checkIfPublic(location) && (\n\t\t\t\t<>\n\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t<Box className={styles.desktop}>\n\t\t\t\t\t\t\t<PrimaryNavbar />\n\t\t\t\t\t\t\t<SecondaryNavbar />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box className={styles.mobile}>\n\t\t\t\t\t\t\t<MobileNavbar />\n\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t<div className=\"private-page\">{children}</div>\n\t\t\t\t\t</ThemeProvider>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default PrivatePage\n","import { makeStyles } from \"@material-ui/core\"\n\n// Styles for the Page Container\nconst usePCStyles = makeStyles((theme) => ({\n\tcontainer: {\n\t\tpaddingTop: theme.spacing(5),\n\t\tpaddingBottom: theme.spacing(15),\n\t},\n}))\n\nexport default usePCStyles\n","import React, { ReactElement } from \"react\"\nimport { Container } from \"@material-ui/core\"\nimport { IPageContainer } from \"./_config/shape\"\nimport usePCStyles from \"./_config/styles\"\n\n/**\n * Abstraction on the `<Container>` component for a consistent page spacing\n *\n * @param {IPageContainer} props Default props for the material-ui Container component\n */\nconst PageContainer = ({\n\tchildren,\n\tclassName,\n\t...rest\n}: IPageContainer): ReactElement => {\n\tconst styles = usePCStyles()\n\n\treturn (\n\t\t// eslint-disable-next-line react/jsx-props-no-spreading\n\t\t<Container className={`${styles.container} ${className}`} {...rest}>\n\t\t\t{children}\n\t\t</Container>\n\t)\n}\n\nexport default PageContainer\n","import React, { ReactElement } from \"react\"\nimport { Box } from \"@material-ui/core\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\nimport { useInputWrapper } from \"./__config/styles\"\nimport { ControlProps } from \"./__config/shape\"\n\n/**\n * Component for the opening balance field used in the CFC form\n *\n * @export\n * @param {OBProps} { onChange }\n * @returns {ReactElement}\n */\nexport default function OpeningBalance({\n\tonChange,\n\tvalue,\n}: ControlProps<number>): ReactElement {\n\tconst wrapperCls = useInputWrapper()\n\n\treturn (\n\t\t<Box className={`${wrapperCls.wrapper}`}>\n\t\t\t<DescriptiveMoneyInput\n\t\t\t\ttitle=\"Opening Balance\"\n\t\t\t\tdescription=\"Your cash at bank at the start of the period\"\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tname=\"openingBalance\"\n\t\t\t\tonChange={onChange}\n\t\t\t\tvalue={value}\n\t\t\t/>\n\t\t</Box>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { Box, Typography, makeStyles } from \"@material-ui/core\"\nimport { useInputWrapper } from \"../CFC/__config/styles\"\nimport useStyles from \"../DescriptiveMoneyInput/__config/styles\"\n\n/**\n * Prop definition for the ComputedPanels component\n *\n * @interface ComputedPanelsProps\n */\ninterface ComputedPanelsProps {\n\ttitle: string\n\tdescription?: string\n\tvalue: string\n\tmini?: boolean\n\twrapped?: boolean\n}\n\nconst useComputedStyles = makeStyles((theme) => ({\n\troot: {\n\t\t[theme.breakpoints.up(\"md\")]: {\n\t\t\talignItems: \"center\",\n\t\t},\n\t},\n}))\n\n/**\n * Displays a title, description and a computed value\n *\n * @export\n * @param {ComputedPanelsProps} {\n * \ttitle,\n * \tdescription,\n * \tvalue,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function ComputedPanels({\n\ttitle,\n\tdescription,\n\tvalue,\n\tmini = false,\n\twrapped = true,\n}: ComputedPanelsProps): ReactElement {\n\tconst wrapperCls = useInputWrapper()\n\tconst dmiCls = useStyles({ stacked: false, mini })\n\tconst computedCls = useComputedStyles()\n\n\treturn (\n\t\t<Box\n\t\t\tclassName={`${wrapped ? wrapperCls.wrapper : \"\"} ${dmiCls.root} ${\n\t\t\t\tcomputedCls.root\n\t\t\t}`}\n\t\t>\n\t\t\t<Box className={dmiCls.type}>\n\t\t\t\t<Typography variant=\"h6\">{title}</Typography>\n\t\t\t\t{description && <Typography>{description}</Typography>}\n\t\t\t</Box>\n\t\t\t<Typography variant=\"h6\">{value}</Typography>\n\t\t</Box>\n\t)\n})\n","import React, { ReactElement } from \"react\"\nimport { ComputedProps } from \"./__config/shape\"\nimport ComputedPanels from \"../ComputedPanels\"\nimport { addDollarSign, formatNumber } from \"../../util/money/formatting\"\n\n/**\n * Component used to display the Cash Surplus value\n *\n * @export\n * @param {ComputedProps} { value }\n * @returns {ReactElement}\n */\nexport default function CashSurplus({ value }: ComputedProps): ReactElement {\n\treturn (\n\t\t<ComputedPanels\n\t\t\ttitle=\"Cash Surplus\"\n\t\t\tdescription=\"The difference between Cash IN and Cash OUT (excluding GST amounts).\"\n\t\t\tvalue={addDollarSign(formatNumber(value))}\n\t\t/>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { ComputedProps } from \"./__config/shape\"\nimport ComputedPanels from \"../ComputedPanels\"\nimport { addDollarSign, formatNumber } from \"../../util/money/formatting\"\n\n/**\n * Component used to display the Available to Spend value\n *\n * @export\n * @param {ComputedProps} {\n * \tvalue,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function AvailableToSpend({\n\tvalue,\n}: ComputedProps): ReactElement {\n\treturn (\n\t\t<ComputedPanels\n\t\t\ttitle=\"Available to Spend (exc GST and Tax)\"\n\t\t\tdescription=\"The Opening Balance plus any Cash Surplus.\"\n\t\t\tvalue={addDollarSign(formatNumber(value))}\n\t\t/>\n\t)\n})\n","import React, { ReactElement } from \"react\"\nimport { Typography, makeStyles } from \"@material-ui/core\"\nimport { CFCTimeFrame, CanvasType } from \"../../data/_config/shape\"\nimport { generateTitle } from \"./__config/utilities\"\n\n/**\n * Prop definition for the CanvasTitle component\n *\n * @interface CanvasTitleProps\n */\ninterface CanvasTitleProps {\n\ttype: CanvasType\n\ttimeframe: CFCTimeFrame\n\tstartDate: Date\n\tendDate: Date\n\tcustomTitle: string\n\tuseCustomTitle: boolean\n}\n\n// Canvas title styles\nconst useStyles = makeStyles((theme) => ({\n\tcaption: {\n\t\tlineHeight: 1.2,\n\t},\n\ttitle: {\n\t\tmarginBottom: theme.spacing(2),\n\t},\n\tnoTitle: {\n\t\tcolor: theme.palette.grey[500],\n\t},\n}))\n\n/**\n * Displays the compiled canvas title or the custom title\n *\n * @export\n * @param {CanvasTitleProps} {\n * \ttype,\n * \ttimeframe,\n * \tstartDate,\n * \tendDate,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function CanvasTitle({\n\ttype,\n\ttimeframe,\n\tstartDate,\n\tendDate,\n\tcustomTitle,\n\tuseCustomTitle,\n}: CanvasTitleProps): ReactElement {\n\tconst cls = useStyles()\n\n\t/**\n\t * Placeholder component when there is no custom title\n\t *\n\t * @returns {ReactElement}\n\t */\n\tfunction AddTitle(): ReactElement {\n\t\treturn (\n\t\t\t<Typography variant=\"h5\" className={`${cls.title} ${cls.noTitle}`}>\n\t\t\t\tAdd a title below\n\t\t\t</Typography>\n\t\t)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Typography variant=\"overline\" className={cls.caption}>\n\t\t\t\tCanvas title\n\t\t\t</Typography>\n\t\t\t<Typography variant=\"h5\" className={cls.title}>\n\t\t\t\t{useCustomTitle\n\t\t\t\t\t? customTitle || <AddTitle />\n\t\t\t\t\t: generateTitle(type, timeframe, startDate, endDate)}\n\t\t\t</Typography>\n\t\t</>\n\t)\n})\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\n\n/**\n * Input field for the Cash To Owner value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default function CashToOwner({\n\tvalue,\n\tonChange,\n}: ControlProps<number>): ReactElement {\n\treturn (\n\t\t<DescriptiveMoneyInput\n\t\t\tvariant=\"outlined\"\n\t\t\ttitle=\"Cash to Owner\"\n\t\t\tdescription=\"The amounts you withdraw from the business.\"\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tname=\"cashToOwner\"\n\t\t\tmini\n\t\t/>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { ComputedProps } from \"./__config/shape\"\nimport ComputedPanels from \"../ComputedPanels\"\n\n/**\n * Computed panel for the Closing Balance value\n *\n * @export\n * @param {ComputedProps} { value }\n * @returns {ReactElement}\n */\nexport default function ClosingBalance({ value }: ComputedProps): ReactElement {\n\treturn (\n\t\t<ComputedPanels\n\t\t\tvalue={value}\n\t\t\ttitle=\"Your Closing Cash Balance\"\n\t\t\tdescription=\"The amount of cash you have left at the bank\"\n\t\t\tmini\n\t\t\twrapped={false}\n\t\t/>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { Box, Typography, Grid, Divider } from \"@material-ui/core\"\nimport { useInputWrapper } from \"./__config/styles\"\nimport { ClosingBalance, CashToOwner } from \".\"\nimport { addDollarSign, formatNumber } from \"../../util/money/formatting\"\nimport Spacer from \"../Spacer/Spacer\"\n\n/**\n * Prop definition for the CashBalance component\n *\n * @interface CashBalanceProps\n */\ninterface CashBalanceProps {\n\tcashToOwner: number\n\tclosingBalance: number\n\tonChange: InputChange\n}\n\n/**\n * Component for the \"Your Cash Balance\" panel\n *\n * @export\n * @param {CashBalanceProps} {\n * \tcashToOwner,\n * \tclosingBalance,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default function CashBalance({\n\tcashToOwner,\n\tclosingBalance,\n\tonChange,\n}: CashBalanceProps): ReactElement {\n\tconst cls = useInputWrapper()\n\n\treturn (\n\t\t<Box className={cls.wrapper}>\n\t\t\t<Typography variant=\"h6\">Your Cash Balance</Typography>\n\t\t\t<Spacer />\n\t\t\t<Grid container spacing={2}>\n\t\t\t\t<Grid item sm={12}>\n\t\t\t\t\t<CashToOwner value={cashToOwner} onChange={onChange} />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item sm={12}>\n\t\t\t\t\t<Divider />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item sm={12}>\n\t\t\t\t\t<ClosingBalance\n\t\t\t\t\t\tvalue={addDollarSign(formatNumber(`${closingBalance}`))}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Box>\n\t)\n}\n","import React, { ReactElement, ChangeEvent, useState } from \"react\"\nimport {\n\tBox,\n\tTypography,\n\tTextField,\n\tInputAdornment,\n\tmakeStyles,\n} from \"@material-ui/core\"\nimport { ControlProps } from \"./__config/shape\"\nimport { useInputWrapper } from \"./__config/styles\"\nimport useStyles from \"../DescriptiveMoneyInput/__config/styles\"\nimport { addDollarSign, formatNumber } from \"../../util/money/formatting\"\n\ntype IncomeTaxProps = {\n\tcalculated: number\n} & ControlProps<number>\n\nconst useCustomStyles = makeStyles((theme) => ({\n\tbox: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t\t\"& > div\": {\n\t\t\tmargin: 0,\n\t\t\tmarginRight: theme.spacing(1),\n\t\t},\n\t},\n\ttextfield: {\n\t\tmarginTop: theme.spacing(2),\n\t},\n}))\n\n/**\n * Input field for the Income tax value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function IncomeTax({\n\tvalue,\n\tonChange,\n\tcalculated,\n}: IncomeTaxProps): ReactElement {\n\tconst cls = useInputWrapper()\n\tconst [error, setError] = useState(\"\")\n\tconst styles = useStyles({ stacked: true, mini: true, fullHeight: false })\n\tconst cusCls = useCustomStyles()\n\n\tfunction onPercentageChange(e: ChangeEvent<HTMLInputElement>): void {\n\t\tconst inputVal = e.target.value.trim() === \"\" ? \"0\" : e.target.value.trim()\n\t\tif (\n\t\t\t`${inputVal}`.startsWith(\"00\") ||\n\t\t\t(`${value}`.startsWith(\"0\") && `${inputVal}`.length > 1)\n\t\t) {\n\t\t\tsetError(\"Amount can't start with a zero\")\n\t\t\treturn\n\t\t}\n\n\t\tif (inputVal.match(/\\D/g)) {\n\t\t\tsetError(\"Amount can only include digits\")\n\t\t\treturn\n\t\t}\n\n\t\tconst val = parseInt(inputVal, 10)\n\t\t// eslint-disable-next-line no-restricted-globals\n\t\tif (isNaN(val) || val > 100 || val < 0) {\n\t\t\tsetError(\"Please enter a valid number between 0 and 100\")\n\t\t\treturn\n\t\t}\n\t\tsetError(\"\")\n\n\t\tif (typeof onChange !== \"undefined\") {\n\t\t\tonChange(e)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Box\n\t\t\tclassName={`${cls.wrapper} ${cls.highlight} ${styles.root} ${cusCls.box}`}\n\t\t>\n\t\t\t<Box className={styles.type}>\n\t\t\t\t<Typography variant=\"h6\">Income Tax or Company Tax</Typography>\n\t\t\t\t<Typography>\n\t\t\t\t\tEstimated amount to pay your tax; approximately {value}% of your Cash\n\t\t\t\t\tSurplus.\n\t\t\t\t</Typography>\n\t\t\t\t<TextField\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={onPercentageChange}\n\t\t\t\t\tname=\"incomeTax\"\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tlabel=\"Income tax percent\"\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={cusCls.textfield}\n\t\t\t\t\terror={error !== \"\"}\n\t\t\t\t\thelperText={error}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t\t<Typography variant=\"h6\">\n\t\t\t\t{/* eslint-disable-next-line no-restricted-globals */}\n\t\t\t\t{addDollarSign(formatNumber(`${isNaN(calculated) ? 0 : calculated}`))}\n\t\t\t</Typography>\n\t\t</Box>\n\t)\n})\n","import React, { ReactElement } from \"react\"\nimport { Box, makeStyles, Grid } from \"@material-ui/core\"\nimport ExpandableNav from \"../ExpandableNav\"\nimport { Debtors, Creditors, Assets, Loans, Stock } from \".\"\nimport ComputedPanels from \"../ComputedPanels\"\nimport { addDollarSign, formatNumber } from \"../../util/money/formatting\"\n\n/**\n * Prop definition for the FallingBehind component\n *\n * @interface FallingBehindProps\n */\ninterface FallingBehindProps {\n\tstock: number\n\tcreditors: number\n\tdebtors: number\n\tassets: number\n\tloans: number\n\ttotalNetAssets: number\n\tonChange: InputChange\n}\n\nconst useStyles = makeStyles((theme) => ({\n\tbox: {\n\t\tpaddingRight: theme.spacing(2),\n\t\tpaddingLeft: theme.spacing(2),\n\t\tpaddingBottom: theme.spacing(2),\n\t},\n\ttotal: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"flex-end\",\n\t\t\"& > div\": {\n\t\t\twidth: \"100%\",\n\t\t},\n\t},\n}))\n\n/**\n * Component to wrap all the inputs in the Falling Behind section of the CFC\n * form\n *\n * @export\n * @param {FallingBehindProps} {\n * \tstock,\n * \tcreditors,\n * \tdebtors,\n * \tassets,\n * \tloans,\n * \ttotalNetAssets,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function FallingBehind({\n\tstock,\n\tcreditors,\n\tdebtors,\n\tassets,\n\tloans,\n\ttotalNetAssets,\n\tonChange,\n}: FallingBehindProps): ReactElement {\n\tconst cls = useStyles()\n\n\treturn (\n\t\t<ExpandableNav\n\t\t\ttitle=\"Is my business improving its financial position?\"\n\t\t\tsubHeading=\"Complete these fields to record your net asset position.\"\n\t\t\tdefaultExpanded={false}\n\t\t>\n\t\t\t<Box className={cls.box}>\n\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t<Debtors value={debtors} onChange={onChange} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t<Creditors value={creditors} onChange={onChange} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t<Assets value={assets} onChange={onChange} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t<Loans value={loans} onChange={onChange} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={6}>\n\t\t\t\t\t\t<Stock value={stock} onChange={onChange} />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} sm={6} className={cls.total}>\n\t\t\t\t\t\t<ComputedPanels\n\t\t\t\t\t\t\ttitle=\"Total net assets\"\n\t\t\t\t\t\t\tvalue={addDollarSign(formatNumber(`${totalNetAssets}`))}\n\t\t\t\t\t\t\twrapped={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Box>\n\t\t</ExpandableNav>\n\t)\n})\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\n\n/**\n * Input field for the Debtors value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default function Debtors({\n\tvalue,\n\tonChange,\n}: ControlProps<number>): ReactElement {\n\treturn (\n\t\t<DescriptiveMoneyInput\n\t\t\tmini\n\t\t\tstacked\n\t\t\tfullHeight\n\t\t\tvariant=\"outlined\"\n\t\t\tonChange={onChange}\n\t\t\tvalue={value}\n\t\t\tname=\"debtors\"\n\t\t\ttitle=\"Debtors\"\n\t\t\tdescription=\"The amount others owe to your business at the close of the period.\"\n\t\t/>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\n\n/**\n * Input field for the Creditors value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default function Creditors({\n\tvalue,\n\tonChange,\n}: ControlProps<number>): ReactElement {\n\treturn (\n\t\t<DescriptiveMoneyInput\n\t\t\tmini\n\t\t\tstacked\n\t\t\tfullHeight\n\t\t\tvariant=\"outlined\"\n\t\t\tonChange={onChange}\n\t\t\tvalue={value}\n\t\t\tname=\"creditors\"\n\t\t\ttitle=\"Creditors\"\n\t\t\tdescription=\"The amount your business owes to others at the close of the period.\"\n\t\t/>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\n\n/**\n * Input field for the Assets value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function Assets({\n\tvalue,\n\tonChange,\n}: ControlProps<number>): ReactElement {\n\treturn (\n\t\t<DescriptiveMoneyInput\n\t\t\tmini\n\t\t\tstacked\n\t\t\tfullHeight\n\t\t\tvariant=\"outlined\"\n\t\t\tonChange={onChange}\n\t\t\tvalue={value}\n\t\t\tname=\"assets\"\n\t\t\ttitle=\"Assets\"\n\t\t\tdescription=\"The value of your business assets at the close of the period.\"\n\t\t/>\n\t)\n})\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\n\n/**\n * Input field for the Loans value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default function Loans({\n\tvalue,\n\tonChange,\n}: ControlProps<number>): ReactElement {\n\treturn (\n\t\t<DescriptiveMoneyInput\n\t\t\tmini\n\t\t\tstacked\n\t\t\tfullHeight\n\t\t\tvariant=\"outlined\"\n\t\t\tonChange={onChange}\n\t\t\tvalue={value}\n\t\t\tname=\"loans\"\n\t\t\ttitle=\"Loans\"\n\t\t\tdescription=\"The amount outstanding on your loans at the close of the period.\"\n\t\t/>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\n\n/**\n * Input field for the Stock value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default function Stock({\n\tvalue,\n\tonChange,\n}: ControlProps<number>): ReactElement {\n\treturn (\n\t\t<DescriptiveMoneyInput\n\t\t\tmini\n\t\t\tstacked\n\t\t\tfullHeight\n\t\t\tvariant=\"outlined\"\n\t\t\tonChange={onChange}\n\t\t\tvalue={value}\n\t\t\tname=\"stock\"\n\t\t\ttitle=\"Stock\"\n\t\t\tdescription=\"The value of your stock on hand at the close of the period.\"\n\t\t/>\n\t)\n}\n","import React, { ReactElement, memo } from \"react\"\nimport { Grid, Typography, makeStyles, Divider } from \"@material-ui/core\"\nimport {\n\tDescriptionSize,\n\tAmountSize,\n\tApplyGSTSize,\n\tActionsSize,\n} from \"./__config/utilities\"\nimport Spacer from \"../Spacer/Spacer\"\n\nconst useStyles = makeStyles((theme) => ({\n\tlabel: {\n\t\tfontWeight: theme.typography.fontWeightMedium,\n\t\tfontSize: theme.typography.fontSize,\n\t\tpaddingBottom: \"4px\",\n\t},\n}))\n\n/**\n * Component to render the header of the form\n *\n * @export\n * @returns {ReactElement}\n */\nexport default memo(function FormHeader(): ReactElement {\n\tconst cls = useStyles()\n\n\treturn (\n\t\t<>\n\t\t\t<Grid container spacing={2}>\n\t\t\t\t<Grid item xs={DescriptionSize}>\n\t\t\t\t\t<Typography className={cls.label}>Description</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={AmountSize}>\n\t\t\t\t\t<Typography className={cls.label}>Amount</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={ApplyGSTSize}>\n\t\t\t\t\t<Typography className={cls.label}>Apply GST</Typography>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={ActionsSize}>\n\t\t\t\t\t<Typography className={cls.label}>Actions</Typography>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<Divider />\n\t\t\t<Spacer />\n\t\t</>\n\t)\n})\n","import React, { ReactElement, MouseEvent } from \"react\"\nimport { Box, Button } from \"@material-ui/core\"\nimport AddIcon from \"@material-ui/icons/Add\"\n\n/**\n * Prop definition for the Form Actions component\n *\n * @interface FormActionsProps\n */\ninterface FormActionsProps {\n\taddItem: () => void\n\taddDisabled: boolean\n}\n\n/**\n * Form actions for the repeater form. This triggers a method to add a item to\n * a particular group\n *\n * @export\n * @param {FormActionsProps} {\n * \taddItem,\n * \taddDisabled\n * }\n * @returns {ReactElement}\n */\nexport default function FormActions({\n\taddItem,\n\taddDisabled,\n}: FormActionsProps): ReactElement {\n\treturn (\n\t\t<Box style={{ display: \"flex\" }} justifyContent=\"flex-end\">\n\t\t\t<Button\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tstartIcon={<AddIcon />}\n\t\t\t\tonClick={(e: MouseEvent<HTMLButtonElement>): void => {\n\t\t\t\t\te.preventDefault()\n\t\t\t\t\taddItem()\n\t\t\t\t}}\n\t\t\t\tdisabled={addDisabled}\n\t\t\t>\n\t\t\t\tAdd new\n\t\t\t</Button>\n\t\t</Box>\n\t)\n}\n","import React, { ReactElement, MouseEvent, useState } from \"react\"\nimport {\n\tGrid,\n\tTextField,\n\tCheckbox,\n\tTooltip,\n\tIconButton,\n\tmakeStyles,\n} from \"@material-ui/core\"\nimport GroupWorkIcon from \"@material-ui/icons/GroupWork\"\nimport { RepeaterFormProps } from \"./__config/shape\"\nimport { CashFlow } from \"../../data/_config/shape\"\nimport {\n\tDescriptionSize,\n\tActionsSize,\n\tAmountSize,\n\tApplyGSTSize,\n} from \"./__config/utilities\"\nimport MoneyInput from \"../MoneyInput\"\nimport IconDeleteButton from \"../IconDeleteButton\"\nimport ConfirmDialogue from \"../ConfirmDialogue\"\n\n/**\n * Prop definition for the form item component\n *\n * @interface FormItemProps\n */\ninterface FormItemProps {\n\tname: RepeaterFormProps[\"name\"]\n\tvalue: CashFlow\n\tonChange: InputChange\n\tremoveItem: (e: MouseEvent<HTMLButtonElement>) => void\n\tindex: number\n}\n\nconst useStyles = makeStyles((theme) => ({\n\tactionGridItem: {\n\t\theight: theme.typography.pxToRem(72),\n\t\tdisplay: \"flex\",\n\t},\n}))\n\n/**\n * A single form item in the repeater form\n *\n * @export\n * @param {FormItemProps} {\n * \tname,\n * \tvalue,\n * \tonChange,\n * \tindex,\n * \tremoveItem,\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function FormItem({\n\tname,\n\tvalue,\n\tonChange,\n\tindex,\n\tremoveItem,\n}: FormItemProps): ReactElement {\n\tconst cls = useStyles()\n\tconst [dialogOpen, setDialogOpen] = useState<boolean>(false)\n\tconst onDialogClose = (): void => {\n\t\tsetDialogOpen(false)\n\t}\n\tconst onDialogConfirm = (e: MouseEvent<HTMLButtonElement>): void => {\n\t\tremoveItem(e)\n\t\tsetDialogOpen(false)\n\t}\n\tconst triggerDialog = (e: MouseEvent<HTMLButtonElement>): void => {\n\t\te.preventDefault()\n\t\tsetDialogOpen(true)\n\t}\n\n\treturn (\n\t\t<Grid container spacing={2} alignItems=\"stretch\">\n\t\t\t<Grid item xs={DescriptionSize}>\n\t\t\t\t<TextField\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tname={`${name}[${index}].description`}\n\t\t\t\t\tvalue={value.description}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tlabel=\"Description\"\n\t\t\t\t\tfullWidth\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={AmountSize}>\n\t\t\t\t<MoneyInput\n\t\t\t\t\tvalue={value.amount}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tname={`${name}[${index}].amount`}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={ApplyGSTSize} className={cls.actionGridItem}>\n\t\t\t\t<Checkbox\n\t\t\t\t\tchecked={value.gstApplicable}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tname={`${name}[${index}].gstApplicable`}\n\t\t\t\t\tinputProps={{ \"aria-label\": \"Apply GST\" }}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={ActionsSize} className={cls.actionGridItem}>\n\t\t\t\t<IconDeleteButton onClick={triggerDialog} />\n\t\t\t\t<ConfirmDialogue\n\t\t\t\t\topen={dialogOpen}\n\t\t\t\t\tonClose={onDialogClose}\n\t\t\t\t\tonCancel={onDialogClose}\n\t\t\t\t\tonConfirm={onDialogConfirm}\n\t\t\t\t>\n\t\t\t\t\tAre you sure you want to remove this item?\n\t\t\t\t</ConfirmDialogue>\n\t\t\t\t<Tooltip title=\"Group data\">\n\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t<GroupWorkIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t</Grid>\n\t\t</Grid>\n\t)\n})\n","import React, { ReactElement, memo, useCallback, MouseEvent } from \"react\"\nimport { Divider, Box, Typography } from \"@material-ui/core\"\nimport Spacer from \"../Spacer/Spacer\"\nimport ComputedPanels from \"../ComputedPanels\"\nimport { addDollarSign, formatNumber } from \"../../util/money/formatting\"\nimport FormHeader from \"./FormHeader\"\nimport { RepeaterFormProps } from \"./__config/shape\"\nimport { useRepeaterStyles as useStyles } from \"./__config/styles\"\nimport FormActions from \"./FormActions\"\nimport FormItem from \"./FormItem\"\nimport { CashFlow } from \"../../data/_config/shape\"\n\n/**\n * Repeater form using for Cash Flow items\n *\n * @export\n * @param {RepeaterFormProps} {\n * \tname,\n * \tvalues,\n * \tonChange,\n * \ttotal,\n * \tgst,\n * \taddItem,\n * \tremoveItem,\n * }\n * @returns {ReactElement}\n */\nexport default memo(function RepeaterForm({\n\tname,\n\tvalues,\n\tonChange,\n\ttotal,\n\tgst,\n\taddItem,\n\tremoveItem,\n\tbeforeTotalChild,\n}: RepeaterFormProps): ReactElement {\n\tconst cls = useStyles()\n\n\t/**\n\t * Method to remove a item from the form\n\t *\n\t * @param {CashFlow[\"id\"]} id\n\t * @returns {void}\n\t */\n\tconst removeFormItem = useCallback(\n\t\t(id: CashFlow[\"id\"]) => (e: MouseEvent<HTMLButtonElement>): void => {\n\t\t\te.preventDefault()\n\t\t\tremoveItem(id)\n\t\t},\n\t\t[removeItem]\n\t)\n\n\t/**\n\t * Checks if the add new button should be disabled\n\t *\n\t * @returns {boolean}\n\t */\n\tconst isAddDisabled = useCallback(() => {\n\t\treturn values.findIndex((item) => item.description === \"\") !== -1\n\t}, [values])\n\n\treturn (\n\t\t<>\n\t\t\t<Box className={cls.body}>\n\t\t\t\t<Typography\n\t\t\t\t\tclassName={cls.mobileNotice}\n\t\t\t\t\tstyle={{ fontStyle: \"italic\" }}\n\t\t\t\t>\n\t\t\t\t\tIt appears that you are using a mobile device. Remember to scroll to\n\t\t\t\t\tview the full form below\n\t\t\t\t\t<Spacer />\n\t\t\t\t</Typography>\n\t\t\t\t<Box className={cls.form}>\n\t\t\t\t\t<Box className={cls.formInner}>\n\t\t\t\t\t\t<FormHeader />\n\t\t\t\t\t\t{values.map((item, idx) => (\n\t\t\t\t\t\t\t<FormItem\n\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\tvalue={item}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tindex={idx}\n\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\tremoveItem={removeFormItem(item.id)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Spacer />\n\t\t\t\t<FormActions addItem={addItem} addDisabled={isAddDisabled()} />\n\t\t\t</Box>\n\t\t\t{typeof beforeTotalChild !== \"undefined\" && (\n\t\t\t\t<>\n\t\t\t\t\t<Spacer />\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<Spacer />\n\t\t\t\t\t{beforeTotalChild()}\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<Spacer />\n\t\t\t<Divider />\n\t\t\t<Spacer />\n\t\t\t<Box className={cls.body}>\n\t\t\t\t<ComputedPanels\n\t\t\t\t\ttitle=\"Total (exc GST)\"\n\t\t\t\t\twrapped={false}\n\t\t\t\t\tvalue={addDollarSign(formatNumber(`${total}`))}\n\t\t\t\t/>\n\t\t\t\t<ComputedPanels\n\t\t\t\t\ttitle=\"GST\"\n\t\t\t\t\tmini\n\t\t\t\t\twrapped={false}\n\t\t\t\t\tvalue={addDollarSign(formatNumber(`${gst}`))}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</>\n\t)\n})\n","import React, { ReactElement } from \"react\"\nimport {\n\tBox,\n\tList,\n\tListItem,\n\tListItemText,\n\tTypography,\n\tmakeStyles,\n\tTooltip,\n} from \"@material-ui/core\"\nimport InfoIcon from \"@material-ui/icons/Info\"\nimport orange from \"@material-ui/core/colors/orange\"\nimport useFourQsStyles from \"../HealthCheck/FourQuestions/_config/styles\"\nimport ExpandableNav from \"../ExpandableNav\"\nimport { fourQuestionsContent } from \"../HealthCheck/_config/data\"\nimport { ICFCState } from \"../../state/CFC/shape\"\nimport { addDollarSign, formatNumber } from \"../../util/money/formatting\"\n\ntype CFC4QsProps = {\n\tvalues: ICFCState[\"questionValues\"]\n}\n\nconst tooltipContent = [\n\t\"Total Cash In (exc GST)  Total Cash Out (exc GST).\",\n\t\"GST on Sales  GST on Purchases + PAYG Withholding + Super + Income Tax or Company Tax.\",\n\t\"Opening Balance + Cash Surplus (exc GST)  Income Tax or Company Tax.\",\n\t\"Total net assets (later period, eg. Forecast)  Total net assets (earlier period, eg. Review).\",\n]\n\nconst useStyles = makeStyles((theme) => ({\n\tvalueText: {\n\t\tfontWeight: theme.typography.fontWeightMedium,\n\t\tmarginTop: \"4px\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\t\"& svg\": {\n\t\t\tmarginLeft: theme.spacing(1),\n\t\t},\n\t},\n\tquestionTwo: {\n\t\tposition: \"relative\",\n\t\t\"&:before\": {\n\t\t\tcontent: \"''\",\n\t\t\twidth: \"5px\",\n\t\t\tbackground: orange[500],\n\t\t\theight: \"100%\",\n\t\t\tposition: \"absolute\",\n\t\t\ttop: \"0px\",\n\t\t\tleft: `-${theme.spacing(2)}px`,\n\t\t},\n\t},\n}))\n\nexport default function CFCFourQuestions({\n\tvalues,\n}: CFC4QsProps): ReactElement {\n\tconst styles = useFourQsStyles()\n\tconst cls = useStyles()\n\n\tfunction getValueText(idx: number): string {\n\t\tconst vals = Object.values(values)\n\t\tif (typeof vals[idx] !== \"undefined\") {\n\t\t\treturn addDollarSign(formatNumber(`${vals[idx]}`))\n\t\t}\n\t\treturn idx === 3\n\t\t\t? \"Compare two canvasses for different dates to find out.\"\n\t\t\t: addDollarSign(\"0\")\n\t}\n\n\treturn (\n\t\t<ExpandableNav title=\"Four key questions\">\n\t\t\t<Box className={styles.box}>\n\t\t\t\t<List className={styles.list}>\n\t\t\t\t\t{fourQuestionsContent.map(\n\t\t\t\t\t\t(content: string, idx: number): ReactElement => (\n\t\t\t\t\t\t\t<Box key={content} component=\"li\">\n\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\t\t\t\t\tclassName={`${styles.listItem} ${\n\t\t\t\t\t\t\t\t\t\tidx === 0 ? styles.listItemFirst : \"\"\n\t\t\t\t\t\t\t\t\t} ${idx === 1 ? cls.questionTwo : \"\"}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ListItemText className={styles.listItemText}>\n\t\t\t\t\t\t\t\t\t\t{`${idx + 1}. ${content}`}\n\t\t\t\t\t\t\t\t\t\t<Typography className={cls.valueText}>\n\t\t\t\t\t\t\t\t\t\t\t{getValueText(idx)}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={tooltipContent[idx]}>\n\t\t\t\t\t\t\t\t\t\t\t\t<InfoIcon color=\"primary\" />\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t</ListItemText>\n\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t</List>\n\t\t\t</Box>\n\t\t</ExpandableNav>\n\t)\n}\n","import { pipe } from \"../reduce/math\"\n\n/**\n * Removes unused decimal points to a certain value\n * Value must be between 0 - 20\n *\n * @param {number} val\n * @returns {NumToStrHOF}\n */\nexport function toFixed(val: number): NumToStrHOF {\n\treturn (x: number): string => {\n\t\treturn x.toFixed(val)\n\t}\n}\n\n/**\n * Converts a number to a string\n *\n * @param {number} val\n * @returns {string}\n */\nexport function toString(val: number): string {\n\treturn `${val}`\n}\n\n/**\n * Takes a string value and returns a number with 2 decimal points\n *\n * @param {string} num\n * @returns {string}\n */\nexport function toTwoDecimal(num: string): string {\n\treturn pipe<string, string, [StrToNumHOF, NumToStrHOF]>(\n\t\tNumber.parseFloat,\n\t\ttoFixed(2)\n\t)(num)\n}\n\n/**\n * Appends a value to a another value\n *\n * @param {string} c\n * @returns {StrToStrHOF}\n */\nexport function appendWith(c: string): StrToStrHOF {\n\treturn (s: string): string => {\n\t\tif (!s.startsWith(c)) {\n\t\t\treturn `${c}${s}`\n\t\t}\n\t\treturn s\n\t}\n}\n\n/**\n * Adds a dollar sign ($) to the front of a string\n *\n * @param {string} val\n * @returns {string}\n */\nexport function addDollarSign(val: string): string {\n\treturn appendWith(\"$\")(val)\n}\n\n/**\n * Removed trailing zeros and dots\n *\n * ## Example\n *\n * * 100.00 -> 100\n * * 100.0 -> 100\n * * 10. -> 10\n * * 6.00000000 -> 6\n *\n * @export\n * @param {string} val\n * @returns {string}\n */\nexport function removeTrailingZeros(val: string): string {\n\tconst re = new RegExp(/\\.(0+)?$/, \"g\")\n\treturn val.replace(re, \"\")\n}\n\n/**\n * Takes a number value and formats it to be a dollar value\n *\n * @param {number} num\n * @returns {string}\n */\nexport function formatMoney(num: number): string {\n\treturn pipe<number, string, [NumToStrHOF, StrToStrHOF, StrToStrHOF]>(\n\t\ttoString,\n\t\ttoTwoDecimal,\n\t\taddDollarSign\n\t)(num)\n}\n\n/**\n * Transforms a number to the decimal version\n * 1000 -> 1,000\n *\n * @param {string} n\n * @returns {string}\n */\nexport function formatNumber(n: string): string {\n\t// format number 1000000 to 1,234,567\n\treturn n.replace(/\\D/g, \"\").replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n}\n","import EmojiEmotionsOutlinedIcon from \"@material-ui/icons/EmojiEmotionsOutlined\"\nimport SentimentDissatisfiedIcon from \"@material-ui/icons/SentimentDissatisfied\"\nimport SentimentVeryDissatisfiedIcon from \"@material-ui/icons/SentimentVeryDissatisfied\"\nimport { green, red, orange } from \"@material-ui/core/colors\"\nimport {\n\tIQuestionStructure,\n\tIAnswerTheme,\n\tQuestionOptionsRecord,\n} from \"./shape\"\nimport { PrivateRoutes } from \"../../../util/routes/routes\"\nimport { questionOptionsMap } from \"./utilities\"\n\n/**\n * Four key questions\n *\n * @exports\n */\nexport const fourQuestionsContent = [\n\t\"Am I trading profitably?\",\n\t\"Have I put enough aside to meet my regular financial commitments?\",\n\t\"Does my business have enough to spend on myself and pay others?\",\n\t\"Is my business improving its financial position?\",\n]\n\n/**\n * Options for the four key questions\n *\n */\nconst fourQuestionOptions: QuestionOptionsRecord = {\n\tpositive: \"Yes\",\n\tnegative: \"No\",\n\tneutral: \"I don't know\",\n}\n\n/**\n * Generic options for the questions in the health check\n *\n */\nconst additionalQuestionsOptions: QuestionOptionsRecord = {\n\tpositive: \"Confident\",\n\tnegative: \"Not Confident\",\n\tneutral: \"Unsure\",\n}\n\n/**\n * Defines a list of questions used in the health check\n *\n */\nexport const questions: IQuestionStructure[] = [\n\t...questionOptionsMap(fourQuestionsContent, fourQuestionOptions),\n\t{\n\t\tquestion: \"How do you feel about planning your business?\",\n\t\toptions: { ...additionalQuestionsOptions },\n\t\tlearnMore: PrivateRoutes.DTPlanningBusiness,\n\t},\n\t{\n\t\tquestion: \"How do you feel about understanding your cash flow?\",\n\t\toptions: { ...additionalQuestionsOptions },\n\t\tlearnMore: PrivateRoutes.DTManagingCashFlow,\n\t},\n\t{\n\t\tquestion: \"How do you feel about keeping your books and records?\",\n\t\toptions: { ...additionalQuestionsOptions },\n\t\tlearnMore: PrivateRoutes.DTRecordKeeping,\n\t},\n\t{\n\t\tquestion:\n\t\t\t\"How do you feel about meeting your regular financial commitments?\",\n\t\toptions: { ...additionalQuestionsOptions },\n\t\tlearnMore: PrivateRoutes.DTPlanningFinanicalCommitments,\n\t},\n\t{\n\t\tquestion: \"How do you feel about funding your business?\",\n\t\toptions: { ...additionalQuestionsOptions },\n\t\tlearnMore: PrivateRoutes.DTFundingBusiness,\n\t},\n\t{\n\t\tquestion: \"How do you feel about tracking your business performance?\",\n\t\toptions: { ...additionalQuestionsOptions },\n\t\tlearnMore: PrivateRoutes.DTTrackingPerformance,\n\t},\n]\n\n/**\n * Theming for the different health check answers\n *\n * @exports\n */\nexport const answerTheming: IAnswerTheme[] = [\n\t{\n\t\tIcon: EmojiEmotionsOutlinedIcon,\n\t\tcolor: green[500],\n\t\tanswer: \"positive\",\n\t},\n\t{\n\t\tIcon: SentimentVeryDissatisfiedIcon,\n\t\tcolor: red[500],\n\t\tanswer: \"negative\",\n\t},\n\t{\n\t\tIcon: SentimentDissatisfiedIcon,\n\t\tcolor: orange[500],\n\t\tanswer: \"neutral\",\n\t},\n]\n","import { createContext } from \"react\"\nimport { IActionChecklistState } from \"./shape\"\n\n// Default context for action checklist\nexport const defaultActionChecklistState: IActionChecklistState = {\n\tdispatch: () => null,\n\thideCompleted: false,\n\tdatabaseSyced: false,\n\tpriority: [],\n\tchecklistCollection: [],\n\tnotes: [],\n}\n\n// Creates the context\nconst ActionChecklistContext = createContext(defaultActionChecklistState)\n\nexport default ActionChecklistContext\n","import { IActionChecklistState } from \"../shape\"\n\n/**\n * Change the state for the hide completed value\n *\n * @param {IActionChecklistState} state\n * @param {boolean} payload\n * @returns IActionChecklistState\n */\nconst changeHideCompleted = (\n\tstate: IActionChecklistState,\n\tpayload: boolean\n): IActionChecklistState => {\n\treturn {\n\t\t...state,\n\t\thideCompleted: payload,\n\t}\n}\n\nexport default changeHideCompleted\n","import { IActionChecklistState, IUpdateDatabaseSyncPayload } from \"../shape\"\n\n/**\n * Updates the state when data is synced from the database\n *\n * @param {IActionChecklistState} state\n * @param {IUpdateDatabaseSyncPayload} payload\n * @returns IActionChecklistState\n */\nconst updateDatabaseSync = (\n\tstate: IActionChecklistState,\n\tpayload: IUpdateDatabaseSyncPayload\n): IActionChecklistState => {\n\tconst { notes, priority, data: checklistCollection } = payload\n\n\treturn {\n\t\t...state,\n\t\tdatabaseSyced: true,\n\t\tnotes,\n\t\tpriority,\n\t\tchecklistCollection,\n\t}\n}\n\nexport default updateDatabaseSync\n","import { uniq } from \"lodash-es\"\nimport { IActionChecklistState, IAddNewActionItemPayload } from \"../shape\"\nimport { ActionChecklistPriorityStruct } from \"../../../data/_config/shape\"\nimport filterById from \"../../../util/filters/ById\"\nimport { newPriorityItem } from \"../../../data/ActionChecklist/_config/utilities\"\n\n/**\n * Adds a new action item and appends the id to the\n * related priority item\n *\n * @param {IActionChecklistState} state\n * @param {IAddNewActionItemPayload} payload\n * @returns IActionChecklistState\n */\nconst addNewActionItem = (\n\tstate: IActionChecklistState,\n\tpayload: IAddNewActionItemPayload\n): IActionChecklistState => {\n\tconst { checklist, priority: pID } = payload\n\n\tconst newPriority = state.priority.reduce(\n\t\t(collection: ActionChecklistPriorityStruct[], item) => {\n\t\t\treturn collection.concat(\n\t\t\t\titem.id === pID\n\t\t\t\t\t? { ...item, order: uniq([...item.order, checklist?.id || \"\"]) }\n\t\t\t\t\t: item\n\t\t\t)\n\t\t},\n\t\t[]\n\t)\n\n\tconst hasPriority = state.priority.filter(filterById(pID))\n\tif (hasPriority.length === 0) {\n\t\t// eslint-disable-next-line\n\t\tnewPriority.push({\n\t\t\t...newPriorityItem(checklist.clientId, checklist.actionContainer),\n\t\t\torder: [checklist?.id || \"\"],\n\t\t\tid: pID,\n\t\t})\n\t}\n\n\treturn {\n\t\t...state,\n\t\tchecklistCollection: [...state.checklistCollection, checklist],\n\t\tpriority: newPriority,\n\t}\n}\n\nexport default addNewActionItem\n","import { IActionChecklistState, IUpdateActionItemPayload } from \"../shape\"\nimport { ActionChecklistStruct } from \"../../../data/_config/shape\"\n\n/**\n * Updates the data for a specific action item\n *\n * @param {IActionChecklistState} state\n * @param {IUpdateActionItemPayload} payload\n * @returns IActionChecklistState\n */\nconst updateActionItem = (\n\tstate: IActionChecklistState,\n\tpayload: IUpdateActionItemPayload\n): IActionChecklistState => {\n\tconst { data, id } = payload\n\n\tconst newChecklist = state.checklistCollection.reduce(\n\t\t(checklists: ActionChecklistStruct[], current) => {\n\t\t\treturn checklists.concat(\n\t\t\t\tcurrent.id === id ? { ...current, ...data, id: current.id } : current\n\t\t\t)\n\t\t},\n\t\t[]\n\t)\n\n\treturn {\n\t\t...state,\n\t\tchecklistCollection: newChecklist,\n\t}\n}\n\nexport default updateActionItem\n","import { IActionChecklistState } from \"../shape\"\nimport { ActionChecklistPriorityStruct } from \"../../../data/_config/shape\"\n\n/**\n * Updates the priority order\n *\n * @param {IActionChecklistState} state\n * @param {ActionChecklistPriorityStruct} payload\n * @returns IActionChecklistState\n */\nconst updatePriorityOrder = (\n\tstate: IActionChecklistState,\n\tpayload: ActionChecklistPriorityStruct\n): IActionChecklistState => {\n\tconst newPriority = state.priority.reduce(\n\t\t(collection: ActionChecklistPriorityStruct[], item) => {\n\t\t\treturn collection.concat(item.id === payload.id ? payload : item)\n\t\t},\n\t\t[]\n\t)\n\n\treturn {\n\t\t...state,\n\t\tpriority: newPriority,\n\t}\n}\n\nexport default updatePriorityOrder\n","/**\n * Used with the array `filter` method, this allows you to\n * filter based on the item and value being the same\n *\n * [1, 2, 3, 4].filter(filterByEquals(4)) -> [4]\n * [1, 2, 3, 4].filter(filterByEquals(4, true)) -> [1, 2, 3]\n *\n * @param {T} val\n * @param {boolean} reject If reject is true, then it will return the opposite.\n * @returns T[]\n */\nconst filterByEquals = <T>(val: T, reject = false) => (item: T): boolean => {\n\tconst res = item === val\n\treturn reject ? !res : res\n}\n\nexport default filterByEquals\n","import { uniq } from \"lodash-es\"\nimport { IActionChecklistState, IRemoveActionItemPayload } from \"../shape\"\nimport filterById from \"../../../util/filters/ById\"\nimport { ActionChecklistPriorityStruct } from \"../../../data/_config/shape\"\nimport filterByEquals from \"../../../util/filters/ByEquals\"\n\n/**\n * Removes an action item from state and removes\n * the items id from the priority array\n *\n * @param {IActionChecklistState} state\n * @param {IRemoveActionItemPayload} payload\n * @returns IActionChecklistState\n */\nconst removeActionItem = (\n\tstate: IActionChecklistState,\n\tpayload: IRemoveActionItemPayload\n): IActionChecklistState => {\n\tconst { targetId, priorityId } = payload\n\n\tconst newChecklist = state.checklistCollection.filter(\n\t\tfilterById(targetId, true)\n\t)\n\n\tconst newPriority = state.priority.reduce(\n\t\t(collection: ActionChecklistPriorityStruct[], item) => {\n\t\t\tif (item.id === priorityId) {\n\t\t\t\tconst newOrder = item.order.filter(filterByEquals(targetId, true))\n\t\t\t\tif (newOrder.length > 0) {\n\t\t\t\t\treturn collection.concat({\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\torder: uniq(newOrder),\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn collection\n\t\t\t}\n\n\t\t\treturn collection.concat(item)\n\t\t},\n\t\t[]\n\t)\n\n\treturn {\n\t\t...state,\n\t\tchecklistCollection: [...newChecklist],\n\t\tpriority: newPriority,\n\t}\n}\n\nexport default removeActionItem\n","import { IActionChecklistState } from \"../shape\"\nimport { ActionChecklistNotesStruct } from \"../../../data/_config/shape\"\n\n/**\n * Adds a note to state\n *\n * @param {IActionChecklistState} state\n * @param {ActionChecklistNotesStruct} payload\n * @returns IActionChecklistState\n */\nconst addNote = (\n\tstate: IActionChecklistState,\n\tpayload: ActionChecklistNotesStruct\n): IActionChecklistState => {\n\treturn {\n\t\t...state,\n\t\tnotes: [...state.notes, payload],\n\t}\n}\n\nexport default addNote\n","import { IActionChecklistState, IUpdateNotesPayload } from \"../shape\"\nimport { ActionChecklistNotesStruct } from \"../../../data/_config/shape\"\n\n/**\n * Updates the data for a specific note\n *\n * @param {IActionChecklistState} state\n * @param {IUpdateNotesPayload} payload\n * @returns IActionChecklistState\n */\nconst updateNote = (\n\tstate: IActionChecklistState,\n\tpayload: IUpdateNotesPayload\n): IActionChecklistState => {\n\tconst { data, id } = payload\n\tconst newNotes = state.notes.reduce(\n\t\t(collection: ActionChecklistNotesStruct[], current) => {\n\t\t\treturn collection.concat(\n\t\t\t\tcurrent.id === id ? { ...current, ...data, id: current.id } : current\n\t\t\t)\n\t\t},\n\t\t[]\n\t)\n\n\treturn {\n\t\t...state,\n\t\tnotes: newNotes,\n\t}\n}\n\nexport default updateNote\n","import { IActionChecklistState } from \"../shape\"\nimport { ActionChecklistNotesId } from \"../../../data/_config/shape\"\nimport filterById from \"../../../util/filters/ById\"\n\n/**\n * Removes a note from state\n *\n * @param {IActionChecklistState} state\n * @param {ActionChecklistNotesId} payload\n * @returns IActionChecklistState\n */\nconst removeNote = (\n\tstate: IActionChecklistState,\n\tpayload: ActionChecklistNotesId\n): IActionChecklistState => {\n\tconst filteredNotes = state.notes.filter(filterById(payload, true))\n\n\treturn {\n\t\t...state,\n\t\tnotes: filteredNotes,\n\t}\n}\n\nexport default removeNote\n","import { uniq } from \"lodash-es\"\nimport {\n\tIActionChecklistState,\n\tIBulkAddActionItemsPayload,\n\tPossibleActionItems,\n} from \"../shape\"\nimport {\n\tActionChecklistPriorityStruct,\n\tClientId,\n\tActionChecklistPriorityId,\n\tActionChecklistId,\n} from \"../../../data/_config/shape\"\nimport filterById from \"../../../util/filters/ById\"\nimport { newPriorityItem } from \"../../../data/ActionChecklist/_config/utilities\"\n\n/**\n * Append a new priority item to state if it can't be found\n * OR\n * Append the additional order items to the priority it can find\n *\n * @param {ActionChecklistPriorityStruct[]} priorities\n * @param {ClientId} client\n * @param {PossibleActionItems} container\n * @param {ActionChecklistId[]} order\n * @param {ActionChecklistPriorityId} priorityId\n * @returns ActionChecklistPriorityStruct[]\n */\nconst appendOrCreatePriority = (\n\tpriorities: ActionChecklistPriorityStruct[],\n\tclient: ClientId,\n\tcontainer: PossibleActionItems,\n\torder: ActionChecklistId[],\n\tpriorityId: ActionChecklistPriorityId\n): ActionChecklistPriorityStruct[] => {\n\tconst canFind = priorities.find(filterById(priorityId))\n\tif (typeof canFind !== \"undefined\") {\n\t\treturn priorities.reduce(\n\t\t\t(collection: ActionChecklistPriorityStruct[], current) => {\n\t\t\t\treturn collection.concat(\n\t\t\t\t\tcurrent.id === priorityId\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t...current,\n\t\t\t\t\t\t\t\torder: uniq([...current.order, ...order]),\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: current\n\t\t\t\t)\n\t\t\t},\n\t\t\t[]\n\t\t)\n\t}\n\treturn priorities.concat({\n\t\t...newPriorityItem(client, container),\n\t\tid: priorityId,\n\t\torder: uniq(order),\n\t})\n}\n\n/**\n * Action to add actions in bulk to the current state\n *\n * @param {IActionChecklistState} state\n * @param {IBulkAddActionItemsPayload} payload\n * @returns IActionChecklistState\n */\nconst bulkAddActionItem = (\n\tstate: IActionChecklistState,\n\tpayload: IBulkAddActionItemsPayload\n): IActionChecklistState => {\n\tconst { items, priorityId } = payload\n\n\tconst newChecklist = [...state.checklistCollection, ...items]\n\tconst additionalOrders = items.reduce((arr: string[], item) => {\n\t\treturn typeof item.id === \"string\" ? [...arr, item.id] : arr\n\t}, [])\n\n\tconst newPriority = appendOrCreatePriority(\n\t\tstate.priority,\n\t\titems[0].clientId,\n\t\titems[0].actionContainer,\n\t\tadditionalOrders,\n\t\tpriorityId\n\t)\n\n\treturn {\n\t\t...state,\n\t\tchecklistCollection: newChecklist,\n\t\tpriority: newPriority,\n\t}\n}\n\nexport default bulkAddActionItem\n","import { Reducer } from \"react\"\nimport {\n\tIActionChecklistState,\n\tActionChecklistReducerActions,\n\tActionChecklistActionTypes,\n} from \"./shape\"\nimport {\n\tchangeHideCompleted,\n\tupdateDatabaseSync,\n\taddNewActionItem,\n\tupdateActionItem,\n\tupdatePriorityOrder,\n\tremoveActionItem,\n\taddNote,\n\tupdateNote,\n\tremoveNote,\n} from \"./actions\"\nimport bulkAddActionItem from \"./actions/bulkAddActionItems\"\n\n/**\n * Reducer method for the Action Checklist context\n *\n * @param {IActionChecklistState} state\n * @param {ActionChecklistReducerActions} action\n * @returns {IActionChecklistState}\n */\nconst ActionChecklistReducer: Reducer<\n\tIActionChecklistState,\n\tActionChecklistReducerActions\n> = (\n\tstate: IActionChecklistState,\n\taction: ActionChecklistReducerActions\n): IActionChecklistState => {\n\tswitch (action.type) {\n\t\tcase ActionChecklistActionTypes.ChangeHideCompleted: {\n\t\t\treturn changeHideCompleted(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.UpdateDatabaseSync: {\n\t\t\treturn updateDatabaseSync(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.AddNewActionItem: {\n\t\t\treturn addNewActionItem(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.UpdateActionItem: {\n\t\t\treturn updateActionItem(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.UpdatePriorityOrder: {\n\t\t\treturn updatePriorityOrder(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.RemoveActionItem: {\n\t\t\treturn removeActionItem(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.AddNotes: {\n\t\t\treturn addNote(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.UpdateNotes: {\n\t\t\treturn updateNote(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.RemoveNote: {\n\t\t\treturn removeNote(state, action.payload)\n\t\t}\n\t\tcase ActionChecklistActionTypes.BulkAddActionItems: {\n\t\t\treturn bulkAddActionItem(state, action.payload)\n\t\t}\n\t\tdefault: {\n\t\t\treturn state\n\t\t}\n\t}\n}\n\nexport default ActionChecklistReducer\n","import React, {\n\tReactElement,\n\tuseReducer,\n\tReducer,\n\tuseMemo,\n\tReactNode,\n\tuseEffect,\n\tDispatch,\n\tuseContext,\n} from \"react\"\nimport {\n\tIActionChecklistState,\n\tActionChecklistReducerActions,\n\tActionChecklistActionTypes,\n\tPossibleActionItems,\n} from \"./shape\"\nimport ActionChecklistReducer from \"./reducer\"\nimport ActionChecklistContext, { defaultActionChecklistState } from \"./context\"\nimport ActionChecklistUseCase from \"../../data/ActionChecklist/ChecklistLogic\"\nimport ActionPriorityUseCase from \"../../data/ActionChecklist/PriorityLogic\"\nimport {\n\tActionChecklistStruct,\n\tActionChecklistPriorityStruct,\n\tClientId,\n\tActionChecklistNotesStruct,\n} from \"../../data/_config/shape\"\nimport { ClientContext } from \"../client\"\nimport {\n\tnewChecklistItem,\n\tnewPriorityItem,\n} from \"../../data/ActionChecklist/_config/utilities\"\nimport filterByActionContainer from \"../../util/filters/ByActionContainer\"\nimport ActionNotesUseCase from \"../../data/ActionChecklist/NotesLogic\"\n\ntype SyncResponse = [\n\tActionChecklistStruct[],\n\tActionChecklistPriorityStruct[],\n\tActionChecklistNotesStruct[]\n]\n\n/**\n * Checks if a container has data and adds it into a db,\n * if required\n *\n * @param {ActionChecklistStruct[]} curData\n * @param {ActionChecklistPriorityStruct[]} curPriority\n * @param {PossibleActionItems} action\n * @param {ClientId} clientId\n * @returns Promise<SyncResponse>\n */\nconst createChecklistIfNeeded = async (\n\tcurData: ActionChecklistStruct[],\n\tcurPriority: ActionChecklistPriorityStruct[],\n\tcurNotes: ActionChecklistNotesStruct[],\n\taction: PossibleActionItems,\n\tclientId: ClientId\n): Promise<SyncResponse> => {\n\tconst find = curData.filter(filterByActionContainer(action))\n\n\tif (find.length === 0) {\n\t\tconst data = [...curData]\n\t\tconst priority = [...curPriority]\n\t\tconst newItem: ActionChecklistStruct = newChecklistItem(clientId, action)\n\n\t\tconst id = await ActionChecklistUseCase.create(newItem)\n\t\tconst newPriority: ActionChecklistPriorityStruct = newPriorityItem(\n\t\t\tclientId,\n\t\t\taction\n\t\t)\n\n\t\tconst priorityId = await ActionPriorityUseCase.create(newPriority)\n\t\tconst priorityWithItem = priority.concat({\n\t\t\t...newPriority,\n\t\t\tid: priorityId,\n\t\t\torder: [id],\n\t\t})\n\t\tawait ActionPriorityUseCase.update(priorityId, {\n\t\t\t...newPriority,\n\t\t\torder: [id],\n\t\t})\n\t\tconst dataWithItem = data.concat({ ...newItem, id })\n\n\t\treturn [dataWithItem, priorityWithItem, curNotes]\n\t}\n\n\treturn [curData, curPriority, curNotes]\n}\n\n/**\n * Complete the database sync. This will check if there\n * are any items in cash IN/OUT actions and if there isn't,\n * then create and update the state\n *\n * @param {Dispatch<ActionChecklistReducerActions>} dispatch\n * @param {ClientId} clientId\n * @returns Promise<void>\n */\nconst completeSyncing = (\n\tdispatch: Dispatch<ActionChecklistReducerActions>,\n\tclientId: ClientId\n) => async (response: SyncResponse): Promise<void> => {\n\tconst [data, priority, notes] = response\n\tconst CIA = await createChecklistIfNeeded(\n\t\tdata,\n\t\tpriority,\n\t\tnotes,\n\t\t\"cashInActions\",\n\t\tclientId\n\t)\n\tconst COA = await createChecklistIfNeeded(\n\t\tCIA[0],\n\t\tCIA[1],\n\t\tCIA[2],\n\t\t\"cashOutActions\",\n\t\tclientId\n\t)\n\n\tdispatch({\n\t\ttype: ActionChecklistActionTypes.UpdateDatabaseSync,\n\t\tpayload: {\n\t\t\tdata: [...COA[0]],\n\t\t\tpriority: [...COA[1]],\n\t\t\tnotes: [...COA[2]],\n\t\t},\n\t})\n}\n\n/**\n * Context state provider element\n *\n * @param {ReactNode} {children}\n * @returns ReactElement\n */\nconst ActionChecklistProvider = (props: {\n\tchildren: ReactNode\n}): ReactElement => {\n\tconst {\n\t\tstate: { currentClient },\n\t} = useContext(ClientContext)\n\n\ttype ACReducer = Reducer<IActionChecklistState, ActionChecklistReducerActions>\n\n\tconst [state, dispatch] = useReducer<ACReducer>(\n\t\tActionChecklistReducer,\n\t\tdefaultActionChecklistState\n\t)\n\n\tuseEffect(() => {\n\t\tif (currentClient?.id) {\n\t\t\t// Get all checklist and priority items and\n\t\t\t// then complete the sync with that data\n\t\t\tPromise.all([\n\t\t\t\tActionChecklistUseCase.findByClient(currentClient.id),\n\t\t\t\tActionPriorityUseCase.findByClient(currentClient.id),\n\t\t\t\tActionNotesUseCase.findByClient(currentClient.id),\n\t\t\t]).then(completeSyncing(dispatch, currentClient.id))\n\t\t}\n\t}, [currentClient])\n\n\tconst value = useMemo(\n\t\t(): IActionChecklistState => ({\n\t\t\t...state,\n\t\t\tdispatch,\n\t\t}),\n\t\t[state]\n\t)\n\n\t// eslint-disable-next-line react/jsx-props-no-spreading\n\treturn <ActionChecklistContext.Provider value={value} {...props} />\n}\n\nexport default ActionChecklistProvider\n","import ILogicLayer from \"../_config/logicLayer\"\nimport ActionChecklistDB from \"./ActionChecklistDatabase\"\nimport {\n\tActionChecklistNotesStruct,\n\tBaseActionChecklistNotesStruct,\n\tActionChecklistNotesId,\n} from \"../_config/shape\"\n\n/**\n * Logic implementation for note items for the\n * Action Checklist databasea\n *\n * @class ActionChecklistNotesLogic\n * @extends {ILogicLayer<ActionChecklistNotesStruct, BaseActionChecklistNotesStruct>}\n */\nclass ActionChecklistNotesLogic extends ILogicLayer<\n\tActionChecklistNotesStruct,\n\tBaseActionChecklistNotesStruct\n> {\n\t/**\n\t * Creates an instance of ActionChecklistNotesLogic.\n\t *\n\t * @memberof ActionChecklistNotesLogic\n\t */\n\tconstructor() {\n\t\tsuper(ActionChecklistDB, ActionChecklistDB.notes)\n\t}\n\n\t/**\n\t * Default put functionality for the notes table\n\t *\n\t * @param {ActionChecklistNotesStruct} data\n\t * @returns {Promise<ActionChecklistNotesId>}\n\t * @memberof ActionChecklistNotesLogic\n\t */\n\tput(data: ActionChecklistNotesStruct): Promise<ActionChecklistNotesId> {\n\t\treturn this.database.transaction(\"rw\", this.table.name, () => {\n\t\t\treturn this.table.put(data)\n\t\t})\n\t}\n}\n\n// Creates a instance of the logic class and exports the instance\nconst ActionNotesUseCase = new ActionChecklistNotesLogic()\n\nexport default ActionNotesUseCase\n","/* eslint-disable import/prefer-default-export */\nimport {\n\tIAnswerTheme,\n\tQuestionOptions,\n\tQuestionOptionsRecord,\n\tIQuestionStructure,\n} from \"./shape\"\nimport findObjectIndexByValue from \"../../../util/array/findObjectIndexByValue\"\n\n/**\n * Gets the theme for a specific answer type\n *\n * @param {QuestionOptions} answer Answer needed\n * @param {IAnswerTheme[]} options A config object with the answer theme\n * @returns IAnswerTheme\n */\nexport const getOptionByAnswer = (\n\tanswer: QuestionOptions,\n\toptions: IAnswerTheme[]\n): IAnswerTheme => {\n\treturn options[findObjectIndexByValue(options, \"answer\", answer)]\n}\n\n/**\n * Merges a list of questions with a set of answer options\n *\n * @param {string[]} questions Questions to merge with the option set\n * @param {QuestionOptionsRecord} options object of options\n * @returns {IQuestionStructure[]}\n */\nexport const questionOptionsMap = (\n\tquestions: string[],\n\toptions: QuestionOptionsRecord\n): IQuestionStructure[] => {\n\treturn questions.map(\n\t\t(q: string): IQuestionStructure => ({\n\t\t\tquestion: q,\n\t\t\toptions,\n\t\t})\n\t)\n}\n","import { PossibleActionItems } from \"../../state/action-checklist/shape\"\nimport { WithActionContainer } from \"../../data/_config/shape\"\n\n/**\n * Used with the array `filter` method, this allows you to\n * filter a object using the `actionContainer` property.\n * The objects interface must use `WithActionContainer`\n * to work\n *\n * [{actionContainer: \"...\"}, ...].filter(filterByActionContainer(\"...\"))\n *\n * @param {PossibleActionItems} container\n * @returns WithActionContainer[]\n */\nconst filterByActionContainer = (container: PossibleActionItems) => (\n\titem: WithActionContainer\n): boolean => {\n\treturn item.actionContainer === container\n}\n\nexport default filterByActionContainer\n","import { CashFlow } from \"../../data/_config/shape\"\n\n/**\n * Used with the array `filter` method, this allows you to\n * filter a object using the `gstApplicable` property.\n * The objects interface must use `CashFlow`\n * to work\n *\n * @param {boolean} reject\n * @returns CashFlow[]\n */\nconst GSTApplicable = (reject = false) => (item: CashFlow): boolean => {\n\tconst res = item.gstApplicable\n\treturn reject ? !res : res\n}\n\nexport default GSTApplicable\n","import { divideBy, minusBy, pipe } from \"../reduce/math\"\n\n/**\n * Calculates a GST value\n *\n * @param {number} x\n * @returns {number}\n */\nfunction calculateGST(x: number): number {\n\treturn divideBy(11)(x)\n}\n\n/**\n * Removes the GST value from a given value\n *\n * @param {number} x\n * @returns {number}\n */\nfunction removeGST(x: number): number {\n\tconst gst = calculateGST(x)\n\treturn pipe<number, number, [MathHOF, MathHOF]>(minusBy(gst), Math.round)(x)\n}\n\nexport { calculateGST, removeGST }\n","/* eslint-disable no-restricted-globals */\nimport { BaseCFCStruct, CashFlow } from \"../../data/_config/shape\"\nimport GSTApplicable from \"../../util/filters/ByGSTApplicable\"\nimport { sum, pipe, add, minusBy, numOrZero } from \"../../util/reduce/math\"\nimport { removeGST, calculateGST } from \"../../util/money/gst\"\n\n/**\n * Extracts the values for a specific key\n *\n * @export\n * @template T\n * @template K\n * @param {K} k\n * @returns {ReducerHOF<T[K][], T>}\n */\nexport function getKeyValue<T, K extends keyof T>(k: K): ReducerHOF<T[K][], T> {\n\treturn (acc, cur): T[K][] => acc.concat(cur[k])\n}\n\n/**\n * Calcultes the GST value for a cash flow group\n *\n * @export\n * @param {CashFlow[]} values\n * @returns {number}\n */\nexport function calcCashFlowGST(values: CashFlow[]): number {\n\tconst total = values\n\t\t.filter(GSTApplicable())\n\t\t.reduce(getKeyValue(\"amount\"), [])\n\t\t.reduce(sum(), 0)\n\n\treturn Math.round(calculateGST(total))\n}\n\n/**\n * Calculates the sum for a cash flow group (exec GST) for the items that\n * GST is applied to\n *\n * @export\n * @param {CashFlow[]} values\n * @returns {number}\n */\nexport function calcCashFlowGSTTotal(values: CashFlow[]): number {\n\tconst total = values\n\t\t.filter(GSTApplicable())\n\t\t.reduce(getKeyValue(\"amount\"), [])\n\t\t.reduce(sum(), 0)\n\n\treturn removeGST(total)\n}\n\n/**\n * Calculates the sum for a cash flow group for items that GST is not applied\n * to\n *\n * @export\n * @param {CashFlow[]} values\n * @returns {number}\n */\nexport function calcCashFlowNonGSTTotal(values: CashFlow[]): number {\n\treturn values\n\t\t.filter(GSTApplicable(true)) // rejects gstApplicable: true\n\t\t.reduce(getKeyValue(\"amount\"), [])\n\t\t.reduce(sum(), 0)\n}\n\n/**\n * Calculates the sum total for a cash flow group\n *\n * @export\n * @param {CashFlow[]} values\n * @returns {number}\n */\nexport function calcCashFlowTotal(values: CashFlow[]): number {\n\treturn numOrZero(\n\t\tpipe(\n\t\t\tadd(calcCashFlowGSTTotal(values)),\n\t\t\tadd(calcCashFlowNonGSTTotal(values))\n\t\t)(0)\n\t)\n}\n\nexport function calcTotalCashOut(values: BaseCFCStruct): number {\n\treturn numOrZero(\n\t\tpipe(\n\t\t\tadd(values.paygWithholding),\n\t\t\tadd(values.superAmount)\n\t\t)(calcCashFlowTotal(values.cashOutItems))\n\t)\n}\n\n/**\n * Calculates the Cash Surplus value\n *\n * @export\n * @param {BaseCFCStruct} values\n * @returns {number}\n */\nexport function calcCashSurplus(values: BaseCFCStruct): number {\n\treturn calcCashFlowTotal(values.cashInItems) - calcTotalCashOut(values)\n}\n\n/**\n * Calculates the income/company tax based on the form incomeTax percentage\n *\n * @export\n * @param {BaseCFCStruct} values\n * @returns {number}\n */\nexport function calcIncomeTaxPer(values: BaseCFCStruct): number {\n\tconst num = parseInt(`${values.incomeTax}`, 10)\n\tif (isNaN(num) || num === 0) {\n\t\treturn 0\n\t}\n\n\treturn Math.round(calcCashSurplus(values) * (num / 100))\n}\n\n/**\n * Calculates the amount available to spend\n *\n * @export\n * @param {BaseCFCStruct} values\n * @returns {number}\n */\nexport function calcAvailableToSpend(values: BaseCFCStruct): number {\n\treturn numOrZero(\n\t\tpipe(\n\t\t\tadd(values.openingBalance),\n\t\t\tminusBy(calcIncomeTaxPer(values))\n\t\t)(calcCashSurplus(values))\n\t)\n}\n\n/**\n * Calculates the closing balance\n *\n * @export\n * @param {BaseCFCStruct} values\n * @returns {number}\n */\nexport function calcClosingBalance(values: BaseCFCStruct): number {\n\treturn calcAvailableToSpend(values) - numOrZero(values.cashToOwner)\n}\n\n/**\n * Calculates the Total net assets value\n *\n * @export\n * @param {BaseCFCStruct} values\n * @returns {number}\n */\nexport function calcTotalNetAssets(values: BaseCFCStruct): number {\n\treturn numOrZero(\n\t\tpipe(\n\t\t\tadd(values.stock),\n\t\t\tminusBy(values.creditors),\n\t\t\tadd(values.assets),\n\t\t\tadd(values.debtors),\n\t\t\tminusBy(values.loans)\n\t\t)(calcClosingBalance(values))\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport {\n\tDialog,\n\tDialogTitle,\n\tDialogActions,\n\tButton,\n\tDialogContent,\n\tDialogContentText,\n} from \"@material-ui/core\"\nimport { ConfirmDialogueProps } from \"./_config/shape\"\n\nconst ConfirmDialogue = ({\n\topen,\n\tonClose,\n\tonCancel,\n\tonConfirm,\n\tchildren,\n\tconfirmText = \"Confirm\",\n\tcancelText = \"Cancel\",\n\ttitle = \"Proceed?\",\n}: ConfirmDialogueProps): ReactElement => {\n\treturn (\n\t\t<Dialog open={open} onClose={onClose} fullWidth maxWidth=\"sm\">\n\t\t\t<DialogTitle>{title}</DialogTitle>\n\t\t\t{React.Children.count(children) > 0 ? (\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText>{children}</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t) : (\n\t\t\t\t<></>\n\t\t\t)}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={onConfirm} color=\"primary\" autoFocus>\n\t\t\t\t\t{confirmText}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={onCancel}>{cancelText}</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t)\n}\n\nexport default ConfirmDialogue\n","import { makeStyles } from \"@material-ui/core\"\n\n// Four question styling\nconst useFourQsStyles = makeStyles((theme) => ({\n\tlist: {\n\t\twidth: \"100%\",\n\t\tpadding: 0,\n\t},\n\tbox: {\n\t\tpaddingRight: theme.spacing(2),\n\t\tpaddingLeft: theme.spacing(2),\n\t},\n\tlistItem: {\n\t\tpadding: `${theme.spacing(1)}px 0`,\n\t\tborderTop: `1px solid ${theme.palette.divider}`,\n\t},\n\tlistItemFirst: {\n\t\tpaddingTop: 0,\n\t\tborder: \"none\",\n\t},\n\tlistItemText: {\n\t\tmargin: 0,\n\t},\n\tanswerIconRoot: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"row\",\n\t\talignItems: \"center\",\n\t\t\"& p\": {\n\t\t\tmarginLeft: theme.spacing(1),\n\t\t},\n\t},\n}))\n\nexport default useFourQsStyles\n","import React, { ReactElement, MouseEvent } from \"react\"\nimport DeleteIcon from \"@material-ui/icons/Delete\"\nimport { Tooltip, IconButton } from \"@material-ui/core\"\n\n/**\n * Prop definition for the IconDeleteButton\n *\n * @export\n * @interface ButtonProps\n */\nexport interface ButtonProps {\n\tonClick: (e: MouseEvent<HTMLButtonElement>) => void\n}\n\n/**\n * A abstraction for a Icon button used for deleting\n *\n * @export\n * @param {ButtonProps} {\n * \tonClick,\n * }\n * @returns {ReactElement}\n */\nexport default function IconDeleteButton({\n\tonClick,\n}: ButtonProps): ReactElement {\n\treturn (\n\t\t<Tooltip title=\"Delete\">\n\t\t\t<IconButton onClick={onClick}>\n\t\t\t\t<DeleteIcon />\n\t\t\t</IconButton>\n\t\t</Tooltip>\n\t)\n}\n","import { Machine } from \"xstate\"\n\ninterface Schema {\n\tstates: {\n\t\tloading: {}\n\t\tsuccess: {}\n\t\tfailure: {}\n\t}\n}\ntype Events = { type: \"RESOLVE\" } | { type: \"REJECT\" } | { type: \"RETRY\" }\n\nconst fetchMachine = Machine<null, Schema, Events>({\n\tid: \"fetch\",\n\tinitial: \"loading\",\n\tstates: {\n\t\tloading: {\n\t\t\ton: {\n\t\t\t\tRESOLVE: \"success\",\n\t\t\t\tREJECT: \"failure\",\n\t\t\t},\n\t\t},\n\t\tsuccess: {\n\t\t\ton: {\n\t\t\t\tREJECT: \"failure\",\n\t\t\t},\n\t\t},\n\t\tfailure: {\n\t\t\ton: {\n\t\t\t\tRETRY: {\n\t\t\t\t\ttarget: \"loading\",\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n})\n\nexport default fetchMachine\n","import { Dispatch } from \"react\"\nimport {\n\tClientActionTypes,\n\tIClientReducerAction,\n} from \"../../state/client/client-outline\"\nimport { ClientDataStruct } from \"../_config/shape\"\nimport ClientUseCase from \"./ClientLogic\"\n\n/**\n * Method for adding a new client to the application\n *\n * @param {Dispatch<IClientReducerAction>} dispatch Dispatch method for the client state\n * @param {IBaseClient} client client to be added\n * @returns Promise<void>\n */\nconst addClient = async (\n\tdispatch: Dispatch<IClientReducerAction>,\n\tclient: ClientDataStruct\n): Promise<boolean> => {\n\tconst key = await ClientUseCase.create({\n\t\tname: client.name,\n\t})\n\n\tconst newclient: ClientDataStruct = {\n\t\t...client,\n\t\tid: key,\n\t}\n\n\tdispatch({\n\t\ttype: ClientActionTypes.AddClient,\n\t\tpayload: newclient,\n\t})\n\n\tdispatch({\n\t\ttype: ClientActionTypes.ChangeCurrentClient,\n\t\t// Defined on line 26\n\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\tpayload: newclient.id!,\n\t})\n\n\treturn true\n}\n\nexport default addClient\n","import { makeStyles } from \"@material-ui/core\"\n\n// Client form styles definition\nconst useClientFormStyles = makeStyles((theme) => ({\n\tinput: {\n\t\twidth: \"100%\",\n\t\tmarginBottom: theme.spacing(2),\n\t},\n}))\n\nexport default useClientFormStyles\n","import React, {\n\tReactElement,\n\tuseContext,\n\tuseState,\n\tuseEffect,\n\tChangeEvent,\n} from \"react\"\nimport { TextField, Button, Box } from \"@material-ui/core\"\nimport { useFormik } from \"formik\"\nimport { useHistory } from \"react-router-dom\"\nimport { v4 as uuidv4 } from \"uuid\"\nimport addClient from \"../../../data/client/addClient\"\nimport { ClientContext } from \"../../../state/client\"\nimport useClientFormStyles from \"./_config/styles\"\nimport { INCFormValues, INCFormErrors } from \"./_config/shape\"\nimport { PrivateRoutes } from \"../../../util/routes/routes\"\n\nconst MAX_LENGTH = 40\n\ninterface NewClientFormProps {\n\tcloseDialog: (cb: () => void) => void\n}\n\n/**\n * Form used to register a new client. Uses Formik\n *\n * @returns ReactElement\n */\nconst NewClientForm = ({ closeDialog }: NewClientFormProps): ReactElement => {\n\tconst { dispatch } = useContext(ClientContext)\n\tconst styles = useClientFormStyles()\n\tconst initialValues: INCFormValues = {\n\t\tbusinessName: \"\",\n\t}\n\tconst history = useHistory()\n\tconst [characters, setCharacters] = useState(0)\n\n\t// Defines the Formik form\n\tconst form = useFormik({\n\t\tinitialValues,\n\t\tvalidate: (values): INCFormErrors => {\n\t\t\tconst errors: INCFormErrors = {}\n\n\t\t\t// Minor validation\n\t\t\tif (values.businessName === \"\") {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\terrors.businessName = \"Please enter a business name\"\n\t\t\t}\n\n\t\t\treturn errors\n\t\t},\n\t\tonSubmit: async (values) => {\n\t\t\t// Adds a client to the db + state\n\t\t\tawait addClient(dispatch, {\n\t\t\t\tid: uuidv4(),\n\t\t\t\tname: values.businessName,\n\t\t\t})\n\n\t\t\t// resets the form\n\t\t\tform.resetForm()\n\t\t\tcloseDialog((): void => {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\thistory.push(PrivateRoutes.CoachingKit)\n\t\t\t})\n\t\t},\n\t})\n\n\tfunction handleChange(e: ChangeEvent<HTMLInputElement>): void {\n\t\tif (e.target.value.length > MAX_LENGTH) {\n\t\t\te.preventDefault()\n\t\t\treturn\n\t\t}\n\n\t\tform.setFieldValue(\"businessName\", e.target.value)\n\t}\n\n\tuseEffect(() => {\n\t\tsetCharacters(form.values.businessName.length)\n\t}, [form.values.businessName])\n\n\t/**\n\t * Checks if there is a error for a specific field\n\t *\n\t * @param {INCFormErrors} errors Form error object\n\t * @param {keyof INCFormErrors} key Error item to look for\n\t * @returns boolean\n\t */\n\tconst hasError = (\n\t\terrors: INCFormErrors,\n\t\tkey: keyof INCFormErrors\n\t): boolean => {\n\t\treturn typeof errors[key] !== \"undefined\" && errors[key] !== \"\"\n\t}\n\n\treturn (\n\t\t<form noValidate autoComplete=\"off\" onSubmit={form.handleSubmit}>\n\t\t\t<TextField\n\t\t\t\tid=\"businessName\"\n\t\t\t\tname=\"businessName\"\n\t\t\t\tlabel=\"Business name\"\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tclassName={styles.input}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tvalue={form.values.businessName}\n\t\t\t\terror={hasError(form.errors, \"businessName\")}\n\t\t\t\thelperText={\n\t\t\t\t\thasError(form.errors, \"businessName\")\n\t\t\t\t\t\t? form.errors.businessName\n\t\t\t\t\t\t: `${characters}/${MAX_LENGTH}`\n\t\t\t\t}\n\t\t\t\tautoFocus\n\t\t\t/>\n\t\t\t<Box>\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tdisabled={form.isSubmitting}\n\t\t\t\t>\n\t\t\t\t\tAdd business\n\t\t\t\t</Button>\n\t\t\t</Box>\n\t\t</form>\n\t)\n}\n\nexport default NewClientForm\n","import React, { ReactElement, useState } from \"react\"\nimport {\n\tButton,\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tDialogActions,\n\tDialogContentText,\n\tmakeStyles,\n\tButtonProps,\n\tButtonClassKey,\n\tStandardProps,\n} from \"@material-ui/core\"\nimport NewClientForm from \"../../components/Forms/NewClient\"\n\n// New client styling\nconst useNCDStyles = makeStyles((theme) => ({\n\tcontent: {\n\t\tborderStyle: \"solid\",\n\t\tborderColor: theme.palette.divider,\n\t\tborderWidth: \"1px 0 1px 0\",\n\t\tmarginTop: theme.spacing(2),\n\t},\n}))\n\n/**\n * Prop definition for the `<NewClientDialog>` component\n *\n * @interface INewClientDialogProps\n * @extends {StandardProps<ButtonProps, ButtonClassKey>}\n */\ninterface INewClientDialogProps\n\textends StandardProps<ButtonProps, ButtonClassKey> {\n\ttriggerText: string\n}\n\n/**\n * Modal used when creating a new client. Props extends the default\n * Button props and are applied to the trigger\n *\n * @param {INewClientDialogProps} {props}\n * @returns ReactElement\n */\nconst NewClientDialog = ({\n\ttriggerText,\n\t// eslint-disable-next-line\n\t...props\n}: INewClientDialogProps): ReactElement => {\n\tconst [open, setOpen] = useState<boolean>(false)\n\tconst styles = useNCDStyles()\n\n\t/**\n\t * Handles the opening of the modal\n\t *\n\t * @returns void\n\t */\n\tconst handleOpen = (): void => {\n\t\tsetOpen(true)\n\t}\n\n\t/**\n\t * Handles the closing of the modal\n\t *\n\t * @returns void\n\t */\n\tconst handleClose = (): void => {\n\t\tsetOpen(false)\n\t}\n\n\tconst onFormCloseTrigger = (cb: () => void): void => {\n\t\thandleClose()\n\t\tcb()\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tcolor=\"primary\"\n\t\t\t\tvariant=\"contained\"\n\t\t\t\tsize=\"large\"\n\t\t\t\tonClick={handleOpen}\n\t\t\t\t// eslint-disable-next-line react/jsx-props-no-spreading\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{triggerText}\n\t\t\t</Button>\n\t\t\t<Dialog\n\t\t\t\topen={open}\n\t\t\t\tonClose={handleClose}\n\t\t\t\taria-labelledby=\"new-client-dialog-title\"\n\t\t\t\tfullWidth\n\t\t\t\tmaxWidth=\"sm\"\n\t\t\t>\n\t\t\t\t<DialogTitle id=\"new-client-dialog-title\">Add a client</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<NewClientForm closeDialog={onFormCloseTrigger} />\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogContent className={styles.content}>\n\t\t\t\t\t<DialogContentText>\n\t\t\t\t\t\tDisclaimer: This website does not collect or store any personal\n\t\t\t\t\t\tinformation, including the business name.\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t<DialogContentText>\n\t\t\t\t\t\tPlease refer to the Terms & Conditions of use and our Data usage and\n\t\t\t\t\t\tprivacy statement.\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={handleClose} color=\"primary\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</>\n\t)\n}\n\nexport default NewClientDialog\n","import { CanvasType } from \"../../../data/_config/shape\"\n\n/**\n * Checks if a type is in plan or forecast\n *\n * @export\n * @param {CanvasType} type\n * @returns {boolean}\n */\nexport default function inPlanOrForecast(type: CanvasType): boolean {\n\treturn [\"plan\", \"forecast\"].indexOf(type) !== -1\n}\n","import React, { ReactElement, useState, useCallback, useEffect } from \"react\"\nimport {\n\tDialog,\n\tDialogTitle,\n\tTypography,\n\tDialogActions,\n\tDialogContent,\n\tButton,\n} from \"@material-ui/core\"\nimport { useMachine } from \"@xstate/react\"\nimport { useHistory, useParams } from \"react-router-dom\"\nimport { useFormik } from \"formik\"\nimport { omit } from \"lodash-es\"\nimport { isValid } from \"date-fns\"\nimport fetchMachine from \"../../components/Forms/CFC/__config/machine\"\nimport useCurrentClient from \"../../state/client/useCurrentClient\"\nimport { CFCStruct, CFCPanelSlice, CanvasType } from \"../../data/_config/shape\"\nimport CFCUseCase from \"../../data/CFC/CFCLogic\"\nimport DataNotFound from \"../../components/CFC/DataNotFound\"\nimport Loading from \"../../components/Loading\"\nimport { CanvasTitle, ConfigPanel } from \"../../components/CFC\"\nimport { newTimestamp } from \"../../util/dates\"\nimport Spacer from \"../../components/Spacer\"\nimport changeDate, {\n\tCanvasDateKeys,\n} from \"../../components/Forms/CFC/changeDate\"\nimport inPlanOrForecast from \"../../components/Forms/CFC/inPlanOrForecast\"\nimport { calcClosingBalance } from \"../../state/CFC/accumulators\"\nimport createURLParams from \"../../components/Forms/CFC/createURLParams\"\nimport { routeVarReplacement, PrivateRoutes } from \"../../util/routes/routes\"\nimport { performDupFind } from \"../../components/CFC/__config/utilities\"\nimport { DuplicateCanvasError } from \"../../components/CFC/ConfigPanel\"\n\n/**\n * Prop definition for the CopyCanvasDialog component\n *\n * @interface CopyCanvasDialogProps\n */\ninterface CopyCanvasDialogProps {\n\topen: boolean\n\tonClose: () => void\n}\n\n/**\n * Dialog component to handle copying of a canvas\n *\n * @export\n * @returns {ReactElement}\n */\nexport default function CopyCanvasDialog({\n\topen,\n\tonClose,\n}: CopyCanvasDialogProps): ReactElement {\n\t// #region State Management\n\tconst [stateMachine, changeState] = useMachine(fetchMachine)\n\tconst [useCustomTitle, setUseCustomTitle] = useState(false)\n\tconst history = useHistory()\n\tconst { id } = useParams()\n\tconst [currentClient] = useCurrentClient()\n\tconst [canvasData, setCanvasData] = useState<CFCStruct>()\n\tconst [isDuplicate, setIsDuplicate] = useState(false)\n\t// #endregion\n\n\t// #region Formik\n\t/**\n\t * Checks if the opening balance should be replaced\n\t *\n\t * @param {CanvasType} oldType\n\t * @param {CanvasType} type\n\t * @returns {boolean}\n\t */\n\tfunction replaceOpening(oldType: CanvasType, type: CanvasType): boolean {\n\t\treturn !inPlanOrForecast(oldType) && inPlanOrForecast(type)\n\t}\n\n\tconst {\n\t\tsetValues,\n\t\thandleChange,\n\t\tvalues,\n\t\thandleSubmit,\n\t\tsetFieldValue,\n\t} = useFormik<CFCPanelSlice>({\n\t\tinitialValues: {\n\t\t\tcanvasTitle: \"\",\n\t\t\tcanvasType: \"review\",\n\t\t\tcanvasTimeFrame: \"biannually\",\n\t\t\tcanvasStartDate: new Date(),\n\t\t\tcanvasEndDate: new Date(),\n\t\t},\n\t\tonSubmit: async (formValues: CFCPanelSlice) => {\n\t\t\tif (canvasData && currentClient?.id) {\n\t\t\t\t// Merge the form and canvas data\n\t\t\t\tconst data: CFCStruct = {\n\t\t\t\t\t...canvasData,\n\t\t\t\t\t...formValues,\n\t\t\t\t\topeningBalance: replaceOpening(\n\t\t\t\t\t\tcanvasData.canvasType,\n\t\t\t\t\t\tformValues.canvasType\n\t\t\t\t\t)\n\t\t\t\t\t\t? calcClosingBalance(canvasData)\n\t\t\t\t\t\t: canvasData.openingBalance,\n\t\t\t\t\tcreatedAt: newTimestamp(),\n\t\t\t\t\tcanvasTitle: useCustomTitle ? formValues.canvasTitle : \"\",\n\t\t\t\t}\n\t\t\t\t// remove the id & clientid field form data\n\t\t\t\tconst cleaned = omit(data, [\"id\"])\n\t\t\t\t// create the new canvas\n\t\t\t\tconst newCanvasId = await CFCUseCase.create(cleaned)\n\t\t\t\t// redirect to the edit page for the new canvas\n\t\t\t\tconst query = createURLParams(cleaned, useCustomTitle)\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\thistory.push(\n\t\t\t\t\t`${routeVarReplacement(PrivateRoutes.CFCEdit, [\n\t\t\t\t\t\t[\":id\", `${newCanvasId}`],\n\t\t\t\t\t])}?${query}`\n\t\t\t\t)\n\t\t\t\t// close the modal\n\t\t\t\tonClose()\n\t\t\t}\n\t\t},\n\t})\n\n\tuseEffect(() => {\n\t\tif (!useCustomTitle) {\n\t\t\tsetFieldValue(\"canvasTitle\", \"\")\n\t\t}\n\t}, [useCustomTitle, setFieldValue])\n\t// #endregion\n\n\t// #region Data Fetching\n\tconst fetchCanvasData = useCallback(async () => {\n\t\tif (currentClient?.id) {\n\t\t\t// fetches the data\n\t\t\tconst data = await CFCUseCase.findById(id)\n\t\t\t// If it can't be found move to reject\n\t\t\tif (!data) {\n\t\t\t\tchangeState(\"REJECT\")\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// set the canvas data and the new form values\n\t\t\tsetCanvasData(data)\n\t\t\tsetValues({\n\t\t\t\tcanvasTitle: data.canvasTitle,\n\t\t\t\tcanvasType: data.canvasType,\n\t\t\t\tcanvasTimeFrame: data.canvasTimeFrame,\n\t\t\t\tcanvasStartDate: data.canvasStartDate,\n\t\t\t\tcanvasEndDate: data.canvasEndDate,\n\t\t\t})\n\n\t\t\tconst isDup = await performDupFind(data, currentClient.id, useCustomTitle)\n\t\t\tsetIsDuplicate(isDup !== false)\n\n\t\t\t// check if the canvas is using a custom title\n\t\t\tif (data.canvasTitle !== \"\") {\n\t\t\t\tsetUseCustomTitle(true)\n\t\t\t}\n\t\t\t// Move to resolve\n\t\t\tchangeState(\"RESOLVE\")\n\t\t}\n\t}, [currentClient, changeState, id, setValues, useCustomTitle])\n\n\tuseEffect(() => {\n\t\t// If component moves to `open` fetch the new data\n\t\tif (open) {\n\t\t\tfetchCanvasData()\n\t\t}\n\t}, [fetchCanvasData, open])\n\t// #endregion\n\n\t// #region Form Change Events\n\tconst checkDuplicate = useCallback(async () => {\n\t\tif (currentClient?.id) {\n\t\t\tconst isDup = await performDupFind(\n\t\t\t\tvalues,\n\t\t\t\tcurrentClient.id,\n\t\t\t\tuseCustomTitle\n\t\t\t)\n\t\t\tsetIsDuplicate(isDup !== false)\n\t\t}\n\t}, [values, currentClient, useCustomTitle])\n\n\tuseEffect(() => {\n\t\tcheckDuplicate()\n\t}, [checkDuplicate])\n\n\tfunction disableSave(): boolean {\n\t\treturn (\n\t\t\t!isValid(values.canvasStartDate) ||\n\t\t\t!isValid(values.canvasEndDate) ||\n\t\t\tisDuplicate ||\n\t\t\t(useCustomTitle && values.canvasTitle === \"\")\n\t\t)\n\t}\n\n\t/**\n\t * A custom change handler for the datepicker\n\t *\n\t * @template K\n\t * @param {K} k\n\t * @param {BaseCFCStruct[K]} v\n\t */\n\tconst changeDateValue = (k: CanvasDateKeys, v: Date): void => {\n\t\tconst { canvasStartDate, canvasEndDate } = changeDate<CFCPanelSlice>(\n\t\t\tk,\n\t\t\tv,\n\t\t\tvalues\n\t\t)\n\n\t\t// Sets the field value\n\t\tsetFieldValue(\"canvasStartDate\", canvasStartDate, false)\n\t\tsetFieldValue(\"canvasEndDate\", canvasEndDate, false)\n\t}\n\n\tuseEffect(() => {\n\t\tchangeDateValue(\"canvasStartDate\", values.canvasStartDate)\n\t}, [values.canvasTimeFrame, values.canvasStartDate])\n\t// #endregion\n\n\t// #region Component rendering\n\t/**\n\t * Renders the component based on the state machine state\n\t *\n\t * @returns {ReactElement}\n\t */\n\tfunction renderForStateMachine(): ReactElement {\n\t\tswitch (stateMachine.value) {\n\t\t\tcase \"failure\":\n\t\t\t\treturn <DataNotFound />\n\t\t\tcase \"success\":\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<CanvasTitle\n\t\t\t\t\t\t\ttype={values.canvasType}\n\t\t\t\t\t\t\ttimeframe={values.canvasTimeFrame}\n\t\t\t\t\t\t\tstartDate={values.canvasStartDate}\n\t\t\t\t\t\t\tendDate={values.canvasEndDate}\n\t\t\t\t\t\t\tcustomTitle={values.canvasTitle}\n\t\t\t\t\t\t\tuseCustomTitle={useCustomTitle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ConfigPanel\n\t\t\t\t\t\t\tcanvasTypeValue={values.canvasType}\n\t\t\t\t\t\t\tcanvasTimeframeValue={values.canvasTimeFrame}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tstartDate={values.canvasStartDate}\n\t\t\t\t\t\t\tendDate={values.canvasEndDate}\n\t\t\t\t\t\t\tonDateChange={changeDateValue}\n\t\t\t\t\t\t\tcustomTitle={values.canvasTitle}\n\t\t\t\t\t\t\tchangeCheck={(e: InputChange): void => {\n\t\t\t\t\t\t\t\tsetUseCustomTitle(e.target.checked)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tuseCustomTitle={useCustomTitle}\n\t\t\t\t\t\t\twrapped={false}\n\t\t\t\t\t\t\tshowDuplicateError={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{isDuplicate && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Spacer />\n\t\t\t\t\t\t\t\t<DuplicateCanvasError />\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Spacer space={4} />\n\t\t\t\t\t\t<Typography component=\"em\">\n\t\t\t\t\t\t\tCopying will copy your values over to the new canvas\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Typography component=\"em\">\n\t\t\t\t\t\t\tCopying to either a Plan or Forecast will move the closing balance\n\t\t\t\t\t\t\tto the opening\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\tcase \"loading\":\n\t\t\tdefault:\n\t\t\t\treturn <Loading />\n\t\t}\n\t}\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={onClose}\n\t\t\taria-labelledby=\"copy-canvas-dialog-title\"\n\t\t\tfullWidth\n\t\t\tmaxWidth=\"md\"\n\t\t>\n\t\t\t<DialogTitle id=\"copy-canvas-dialog-title\">Copy Canvas</DialogTitle>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<DialogContent>{renderForStateMachine()}</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={onClose}>Cancel</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tdisabled={stateMachine.value !== \"success\" || disableSave()}\n\t\t\t\t\t>\n\t\t\t\t\t\tCopy\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</form>\n\t\t</Dialog>\n\t)\n\t// #endregion\n}\n","import Dexie from \"dexie\"\nimport { isEqual, set } from \"lodash-es\"\nimport { DexieExportJsonStructure } from \"dexie-export-import/dist/json-structure\"\nimport { importInto } from \"dexie-export-import\"\nimport { v4 as uuidv4 } from \"uuid\"\nimport {\n\tExportClientResult,\n\tDatabaseNames,\n\tImportResponse,\n} from \"../__config/shape\"\nimport readFile from \"../../util/readFile\"\nimport ClientDB from \"../../data/client/ClientDatabase\"\nimport HealthCheckDB from \"../../data/healthChecks/HealthCheckDatabase\"\nimport ActionChecklistDB from \"../../data/ActionChecklist/ActionChecklistDatabase\"\nimport CFCDB from \"../../data/CFC/CFCDatabase\"\nimport { PossibleActionItems } from \"../../state/action-checklist/shape\"\nimport { DatabaseId } from \"../../data/_config/shape\"\n\n/**\n * Reads a blob into text\n *\n * @export\n * @param {Blob} blob\n * @returns {(Promise<ExportClientResult | Error>)}\n */\nexport async function loadBlobAsJSON(\n\tblob: Blob\n): Promise<ExportClientResult | Error> {\n\ttry {\n\t\tconst file = await readFile(blob)\n\t\tif (typeof file !== \"string\") {\n\t\t\t// eslint-disable-next-line\n\t\t\tthrow new Error(\n\t\t\t\t\"Unable to process file, ensure you have uploaded the correct file.\"\n\t\t\t)\n\t\t}\n\n\t\tconst json: ExportClientResult = JSON.parse(file)\n\t\treturn json\n\t} catch (e) {\n\t\t// eslint-disable-next-line\n\t\tthrow new Error(e.message)\n\t}\n}\n\n/**\n * Validates the blob JSON data. This does some minor validation to catch possible\n * issues. When importing the data, we'll let Dexie import handle the proper\n * error handling for the data structure.\n *\n * @export\n * @param {*} data\n * @returns {boolean}\n */\nexport function validateJSONData(data: any): boolean {\n\tconst keys = Object.keys(data)\n\tconst validKeys: DatabaseNames[] = [\n\t\t\"ClientDatabase\",\n\t\t\"HealthCheckDatabase\",\n\t\t\"ActionChecklistDatabase\",\n\t\t\"CFCDatabase\",\n\t]\n\n\t// ensures there are 4 keys\n\tif (keys.length !== 4) return false\n\n\t// checks that the keys matchs the valid keys\n\tif (!isEqual(keys, validKeys)) return false\n\n\t// Ensures each key data uses the dexie format\n\t// eslint-disable-next-line\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tif (data[keys[i]] !== null) {\n\t\t\tif (!data[keys[i]].formatName || data[keys[i]].formatName !== \"dexie\") {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true\n}\n\nexport async function importToDatabase(\n\tdb: Dexie,\n\tdata: DexieExportJsonStructure\n): Promise<Error | boolean> {\n\tconst blob = new Blob([JSON.stringify(data)])\n\ttry {\n\t\tawait importInto(db, blob, {\n\t\t\toverwriteValues: true,\n\t\t})\n\t\treturn true\n\t} catch (e) {\n\t\treturn e\n\t}\n}\n\n/**\n * Estimates a new client id and replaces the client ids in the imported json\n * data\n *\n * @export\n * @param {ExportClientResult} json\n * @returns {Promise<ExportClientResult>}\n */\nexport async function overwriteClientIds(\n\tjson: ExportClientResult\n): Promise<ExportClientResult> {\n\t// Get a new id for the client\n\tconst newId = uuidv4()\n\n\t// Ser the client database client record\n\tset(json, \"ClientDatabase.data.data[0].rows[0].id\", newId)\n\n\tconst objectPaths: DatabaseNames[] = [\n\t\t\"HealthCheckDatabase\",\n\t\t\"ActionChecklistDatabase\",\n\t\t\"CFCDatabase\",\n\t]\n\tconst newPriorityIds: Record<PossibleActionItems, DatabaseId[]> = {\n\t\tcashInActions: [],\n\t\tcashOutActions: [],\n\t\tplanningBusiness: [],\n\t\tplanningCommitments: [],\n\t\tfunding: [],\n\t\trecordKeeping: [],\n\t\tmanaging: [],\n\t\ttracking: [],\n\t\ttransition: [],\n\t}\n\n\t// Goes through the other keys and replaces the key for each of the client\n\t// ids with the estimated id\n\tobjectPaths.forEach((key) => {\n\t\tif (json[key] !== null) {\n\t\t\tconst dataArr = json[key]?.data.data\n\t\t\tif (dataArr) {\n\t\t\t\tdataArr.forEach((data, dIdx) => {\n\t\t\t\t\tconst { rows } = data\n\t\t\t\t\tif (rows) {\n\t\t\t\t\t\trows.forEach((row, rIdx) => {\n\t\t\t\t\t\t\tconst id = uuidv4()\n\t\t\t\t\t\t\tset(\n\t\t\t\t\t\t\t\tjson,\n\t\t\t\t\t\t\t\t`${key}.data.data[${dIdx}].rows[${rIdx}].clientId`,\n\t\t\t\t\t\t\t\tnewId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t// Remove the record id to avoid key duplications\n\t\t\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\t\t\tset(json, `${key}.data.data[${dIdx}].rows[${rIdx}].id`, id)\n\n\t\t\t\t\t\t\t// Replace the priority order with the new action item ids\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tdata.tableName === \"actionItems\" ||\n\t\t\t\t\t\t\t\tdata.tableName === \"priority\"\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tconst container: PossibleActionItems | undefined =\n\t\t\t\t\t\t\t\t\tjson[key]?.data.data[dIdx].rows[rIdx].actionContainer ||\n\t\t\t\t\t\t\t\t\tundefined\n\t\t\t\t\t\t\t\tif (container) {\n\t\t\t\t\t\t\t\t\tif (data.tableName === \"actionItems\") {\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\t\t\t\t\t\tnewPriorityIds[container].push(id)\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (data.tableName === \"priority\") {\n\t\t\t\t\t\t\t\t\t\tset(\n\t\t\t\t\t\t\t\t\t\t\tjson,\n\t\t\t\t\t\t\t\t\t\t\t`${key}.data.data[${dIdx}].rows[${rIdx}].order`,\n\t\t\t\t\t\t\t\t\t\t\tnewPriorityIds[container]\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t})\n\n\treturn json\n}\n\nexport default async function ImportClient(\n\tblob: Blob,\n\toverwrite = true\n): Promise<ImportResponse> {\n\ttry {\n\t\tconst json = await loadBlobAsJSON(blob)\n\n\t\tif (json instanceof Error) {\n\t\t\t// eslint-disable-next-line\n\t\t\tthrow new Error(json.message)\n\t\t}\n\n\t\tif (!validateJSONData(json)) {\n\t\t\t// eslint-disable-next-line\n\t\t\tthrow new Error(\n\t\t\t\t\"Imported data doesn't follow the correct structure. Ensure you have selected the correct export file\"\n\t\t\t)\n\t\t}\n\n\t\tconst data = !overwrite ? await overwriteClientIds(json) : json\n\n\t\tconst promises = [\n\t\t\tdata.ClientDatabase\n\t\t\t\t? importToDatabase(ClientDB, data.ClientDatabase)\n\t\t\t\t: Promise.resolve(false),\n\t\t\tdata.HealthCheckDatabase\n\t\t\t\t? importToDatabase(HealthCheckDB, data.HealthCheckDatabase)\n\t\t\t\t: Promise.resolve(false),\n\t\t\tdata.ActionChecklistDatabase\n\t\t\t\t? importToDatabase(ActionChecklistDB, data.ActionChecklistDatabase)\n\t\t\t\t: Promise.resolve(false),\n\t\t\tdata.CFCDatabase\n\t\t\t\t? importToDatabase(CFCDB, data.CFCDatabase)\n\t\t\t\t: Promise.resolve(false),\n\t\t]\n\n\t\treturn Promise.all(promises)\n\t} catch (e) {\n\t\t// eslint-disable-next-line\n\t\tthrow new Error(e.message)\n\t}\n}\n","import React, {\n\tReactElement,\n\tuseState,\n\tChangeEvent,\n\tuseEffect,\n\tuseContext,\n\tuseCallback,\n} from \"react\"\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogTitle,\n\tDialogActions,\n\tButton,\n\tBox,\n\tTypography,\n\tmakeStyles,\n\tFormControlLabel,\n\tSwitch,\n} from \"@material-ui/core\"\nimport { Machine } from \"xstate\"\nimport { useMachine } from \"@xstate/react\"\nimport Alert from \"@material-ui/lab/Alert\"\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\"\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\"\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\"\nimport { green, orange } from \"@material-ui/core/colors\"\nimport { ImportResponse, DatabaseNames } from \"../../modules/__config/shape\"\nimport Loading from \"../../components/Loading\"\nimport Spacer from \"../../components/Spacer\"\nimport ImportClient, {\n\tloadBlobAsJSON,\n\tvalidateJSONData,\n} from \"../../modules/import-client\"\nimport syncClientsWithDb from \"../../data/client/syncWithDB\"\nimport { ClientContext } from \"../../state/client\"\nimport { ClientDataStruct } from \"../../data/_config/shape\"\nimport ClientUseCase from \"../../data/client/ClientLogic\"\n\ntype DialogProps = {\n\topen: boolean\n\tonClose: () => void\n}\n\nconst useStyles = makeStyles((theme) => ({\n\tfilename: {\n\t\tmarginLeft: theme.spacing(1),\n\t},\n\tfileactions: {\n\t\tmarginTop: theme.spacing(2),\n\t\t\"& > button + button\": {\n\t\t\tmarginLeft: theme.spacing(1),\n\t\t},\n\t},\n\tresult: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tmarginBottom: theme.spacing(1),\n\t\t\"& > * + *\": {\n\t\t\tmarginLeft: theme.spacing(1),\n\t\t},\n\t\t\"& > strong\": {\n\t\t\tfontWeight: theme.typography.fontWeightMedium,\n\t\t},\n\t},\n}))\n\n// #region Machine Definitions\ninterface MachineSchema {\n\tstates: {\n\t\tidle: {}\n\t\tloading: {}\n\t\tsuccess: {}\n\t\tfailure: {}\n\t}\n}\n\ntype MachineEvents =\n\t| { type: \"FETCH\" }\n\t| { type: \"RESOLVE\" }\n\t| { type: \"REJECT\" }\n\t| { type: \"RETRY\" }\n\nconst importClientMachine = Machine<null, MachineSchema, MachineEvents>({\n\tid: \"importClient\",\n\tinitial: \"idle\",\n\tstates: {\n\t\tidle: {\n\t\t\ton: {\n\t\t\t\tFETCH: \"loading\",\n\t\t\t},\n\t\t},\n\t\tloading: {\n\t\t\ton: {\n\t\t\t\tRESOLVE: \"success\",\n\t\t\t\tREJECT: \"failure\",\n\t\t\t},\n\t\t},\n\t\tsuccess: {\n\t\t\ton: {\n\t\t\t\tRETRY: \"idle\",\n\t\t\t},\n\t\t},\n\t\tfailure: {\n\t\t\ton: {\n\t\t\t\tRETRY: {\n\t\t\t\t\ttarget: \"idle\",\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n})\n// #endregion\n\nconst databaseConfig: Record<DatabaseNames, string> = {\n\tClientDatabase: \"Client data\",\n\tHealthCheckDatabase: \"Health check data\",\n\tActionChecklistDatabase: \"Action checklist data\",\n\tCFCDatabase: \"Cash flow canvas data\",\n}\n\nconst successContent = {\n\tisfalse: {\n\t\tcontent: \"No data found in the import file.\",\n\t\ticon: RemoveCircleOutlineIcon,\n\t},\n\tistrue: {\n\t\tcontent: \"Data successfully imported.\",\n\t\ticon: CheckCircleOutlineIcon,\n\t},\n\tiserror: {\n\t\tcontent: \"\",\n\t\ticon: HighlightOffIcon,\n\t},\n}\n\nexport default function ImportClientDialog({\n\topen,\n\tonClose,\n}: DialogProps): ReactElement {\n\tconst cls = useStyles()\n\tconst [machine, send] = useMachine(importClientMachine)\n\tconst { dispatch } = useContext(ClientContext)\n\n\tconst [errorMsg, setErrorMsg] = useState(\"\")\n\tconst [response, setResponse] = useState<ImportResponse>([\n\t\tfalse,\n\t\ttrue,\n\t\tnew Error(\"Help\"),\n\t])\n\tconst [file, setFile] = useState<File>()\n\tconst [dupClient, setDupClient] = useState<ClientDataStruct>()\n\tconst [overwrite, setOverwrite] = useState(true)\n\n\tconst checkForExistingClient = useCallback(async () => {\n\t\tif (file) {\n\t\t\tconst json = await loadBlobAsJSON(file)\n\n\t\t\tif (json instanceof Error || !validateJSONData(json)) {\n\t\t\t\tsetDupClient(undefined)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (json.ClientDatabase !== null) {\n\t\t\t\tconst clientId = json.ClientDatabase.data.data?.[0].rows?.[0]?.id || -1\n\n\t\t\t\tif (clientId !== -1) {\n\t\t\t\t\tconst possibleClient = await ClientUseCase.findById(clientId)\n\t\t\t\t\tsetDupClient(possibleClient)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsetDupClient(undefined)\n\t}, [file])\n\n\tuseEffect(() => {\n\t\tif (machine.value === \"idle\") {\n\t\t\tsetFile(undefined)\n\t\t\tsetDupClient(undefined)\n\t\t}\n\t}, [machine])\n\n\tuseEffect(() => {\n\t\tcheckForExistingClient()\n\t}, [file, checkForExistingClient])\n\n\tconst startImporting = async (): Promise<void> => {\n\t\tif (!file) {\n\t\t\tsetErrorMsg(\"A file is required to proceed\")\n\t\t\tsend(\"REJECT\")\n\t\t\treturn\n\t\t}\n\n\t\tsend(\"FETCH\")\n\t\ttry {\n\t\t\tconst res = await ImportClient(file, overwrite)\n\t\t\tawait syncClientsWithDb(dispatch)\n\t\t\tsetResponse(res)\n\t\t\tsend(\"RESOLVE\")\n\t\t} catch (e) {\n\t\t\tsetErrorMsg(e.message)\n\t\t\tsend(\"REJECT\")\n\t\t}\n\t}\n\n\tconst RetryButton = (title: string): ReactElement => (\n\t\t<Button\n\t\t\tonClick={(): void => {\n\t\t\t\tsend(\"RETRY\")\n\t\t\t}}\n\t\t\tvariant=\"contained\"\n\t\t\tcolor=\"primary\"\n\t\t>\n\t\t\t{title}\n\t\t</Button>\n\t)\n\n\t// Upload a file of type JSON\n\tconst FileUpload = (): ReactElement => (\n\t\t<>\n\t\t\t<label htmlFor=\"contained-button-file\">\n\t\t\t\t<input\n\t\t\t\t\taccept=\"application/json\"\n\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\tid=\"contained-button-file\"\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tonChange={(e: ChangeEvent<HTMLInputElement>): void => {\n\t\t\t\t\t\tsetFile(e.target.files?.[0] || undefined)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Button variant=\"outlined\" component=\"span\">\n\t\t\t\t\tSelect exported file\n\t\t\t\t</Button>\n\t\t\t</label>\n\t\t\t<Typography variant=\"caption\" className={cls.filename}>\n\t\t\t\t{file && file.name}\n\t\t\t</Typography>\n\t\t</>\n\t)\n\n\tconst FileActions = (): ReactElement => (\n\t\t<Box className={cls.fileactions}>\n\t\t\t<Button color=\"primary\" variant=\"contained\" onClick={startImporting}>\n\t\t\t\tImport data\n\t\t\t</Button>\n\t\t\t<Button onClick={(): void => setFile(undefined)}>Remove file</Button>\n\t\t</Box>\n\t)\n\n\tconst ShowFailure = (): ReactElement => (\n\t\t<>\n\t\t\t<Alert severity=\"error\">\n\t\t\t\t{errorMsg ||\n\t\t\t\t\t\"Something went wrong processing the request. Please check the uploaded file and try again\"}\n\t\t\t</Alert>\n\t\t\t<Spacer />\n\t\t\t{RetryButton(\"Try again\")}\n\t\t</>\n\t)\n\n\tconst ShowSuccess = (): ReactElement => {\n\t\tconst keys = Object.keys(databaseConfig) as DatabaseNames[]\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{response.map(\n\t\t\t\t\t(res, idx): ReactElement => {\n\t\t\t\t\t\tif (res instanceof Error) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Box key={keys[idx]} className={cls.result}>\n\t\t\t\t\t\t\t\t\t<successContent.iserror.icon color=\"error\" />\n\t\t\t\t\t\t\t\t\t<Typography component=\"strong\">\n\t\t\t\t\t\t\t\t\t\t{databaseConfig[keys[idx]]}:\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Typography>{res.message}</Typography>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst config = successContent[res ? \"istrue\" : \"isfalse\"]\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Box key={keys[idx]} className={cls.result}>\n\t\t\t\t\t\t\t\t<config.icon\n\t\t\t\t\t\t\t\t\tstyle={res ? { color: green[500] } : { color: orange[500] }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Typography component=\"strong\">\n\t\t\t\t\t\t\t\t\t{databaseConfig[keys[idx]]}:\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography>{config.content}</Typography>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t\t<Spacer space={3} />\n\t\t\t\t{RetryButton(\"Import another file\")}\n\t\t\t</>\n\t\t)\n\t}\n\n\tconst overwriteOnChange = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tsetOverwrite(e.target.checked)\n\t\t},\n\t\t[setOverwrite]\n\t)\n\n\tconst DuplicateOptions = (): ReactElement => {\n\t\tif (!dupClient) return <></>\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Spacer />\n\t\t\t\t<Alert severity=\"warning\">\n\t\t\t\t\tThe file you have chosen will overwrite data for client &quot;\n\t\t\t\t\t{dupClient.name}&quot;. Would you like to proceed with overwritting\n\t\t\t\t\tthe data, or do you want to create a new client? This can not be\n\t\t\t\t\tundone.\n\t\t\t\t</Alert>\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tchecked={overwrite}\n\t\t\t\t\t\t\tonChange={overwriteOnChange}\n\t\t\t\t\t\t\tname=\"overwrite-client-data\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel=\"Overwrite client data?\"\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n\n\tconst DialogBody = (): ReactElement => {\n\t\tswitch (machine.value) {\n\t\t\tcase \"failure\":\n\t\t\t\t// Consistently show error message to the user\n\t\t\t\treturn <ShowFailure />\n\t\t\tcase \"success\":\n\t\t\t\t// Show status of each of the database items\n\t\t\t\treturn <ShowSuccess />\n\t\t\tcase \"loading\":\n\t\t\t\t// Show loader while importing\n\t\t\t\treturn <Loading />\n\t\t\tcase \"idle\":\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FileUpload />\n\t\t\t\t\t\t{DuplicateOptions()}\n\t\t\t\t\t\t{file && <FileActions />}\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n\t\t\t<DialogTitle>Import client data</DialogTitle>\n\t\t\t<DialogContent>Disclaimer about file upload</DialogContent>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogBody />\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={onClose}>Close</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\n\n/**\n * Input field for the Super value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default function Super({\n\tvalue,\n\tonChange,\n}: ControlProps<number>): ReactElement {\n\treturn (\n\t\t<DescriptiveMoneyInput\n\t\t\tmini\n\t\t\tvariant=\"outlined\"\n\t\t\tonChange={onChange}\n\t\t\tvalue={value}\n\t\t\tname=\"superAmount\"\n\t\t\ttitle=\"Super\"\n\t\t\tdescription=\"Super amounts held for you and your employees for the future.\"\n\t\t/>\n\t)\n}\n","import React, { ReactElement } from \"react\"\nimport { ControlProps } from \"./__config/shape\"\nimport DescriptiveMoneyInput from \"../DescriptiveMoneyInput\"\n\n/**\n * Input field for the PAYG Witholding value\n *\n * @export\n * @param {ControlProps<number>} {\n * \tvalue,\n * \tonChange,\n * }\n * @returns {ReactElement}\n */\nexport default function PayG({\n\tvalue,\n\tonChange,\n}: ControlProps<number>): ReactElement {\n\treturn (\n\t\t<DescriptiveMoneyInput\n\t\t\tmini\n\t\t\tvariant=\"outlined\"\n\t\t\tonChange={onChange}\n\t\t\tvalue={value}\n\t\t\tname=\"paygWithholding\"\n\t\t\ttitle=\"PAYG Withholding\"\n\t\t\tdescription=\"PAYG you withhold for your staff.\"\n\t\t/>\n\t)\n}\n","import { BaseCFCStruct, CFCPanelSlice } from \"../../../data/_config/shape\"\nimport { calculatedEndDate } from \"../../../util/dates\"\n\ntype DateRtn = {\n\tcanvasStartDate: BaseCFCStruct[\"canvasStartDate\"]\n\tcanvasEndDate: BaseCFCStruct[\"canvasEndDate\"]\n}\n\nexport type CanvasDateKeys = \"canvasStartDate\" | \"canvasEndDate\"\n\nexport default function changeDate<T extends CFCPanelSlice>(\n\tk: CanvasDateKeys,\n\tv: Date,\n\tvalues: T\n): DateRtn {\n\t// Sets the field value\n\tconst val = {\n\t\tcanvasEndDate: values.canvasEndDate,\n\t\tcanvasStartDate: values.canvasStartDate,\n\t\t[k]: v,\n\t}\n\n\t// This checks if the start date is ahead of the end date\n\tif (k === \"canvasStartDate\") {\n\t\t// if it is, it will set the end date to the start date\n\t\treturn {\n\t\t\t...val,\n\t\t\tcanvasEndDate: calculatedEndDate(v, values.canvasTimeFrame),\n\t\t}\n\t}\n\n\treturn val\n}\n","import { format, isValid, isSameDay } from \"date-fns\"\nimport { SelectFieldOptions } from \"../../SelectField/SelectField\"\nimport {\n\tCanvasType,\n\tCFCTimeFrame,\n\tCFCStruct,\n\tBaseCFCStruct,\n\tCFCPanelSlice,\n\tCFCId,\n\tClientId,\n} from \"../../../data/_config/shape\"\nimport upperFirst from \"../../../util/strings/upperCaseFirst\"\nimport { pipe, minusBy, add } from \"../../../util/reduce/math\"\nimport concatStr from \"../../../util/strings/concatStr\"\nimport filterById from \"../../../util/filters/ById\"\nimport CFCUseCase from \"../../../data/CFC/CFCLogic\"\nimport { CalculatedValues } from \"../../../state/CFC/useCalculated\"\n\ntype Opts = SelectFieldOptions\n\n/**\n * Converts an array of strings into a array that can be used as options\n * for the `SelectField` component.\n *\n * Use this method with `reduce`\n *\n * ## Example\n * ```ts\n * const opts = [\"a\", \"b\", \"c\"].reduce(reduceToOptions, [])\n * ```\n *\n * @export\n * @param {Opts} acc\n * @param {string} cur\n * @returns {Opts}\n */\nexport function reduceToOptions(acc: Opts, cur: string): Opts {\n\treturn acc.concat({ value: cur, label: upperFirst(cur) })\n}\n\n/**\n * Creates options for the `CanvasTypeSelect` component\n *\n * @export\n * @returns {Opts}\n */\nexport function canvasTypeOptions(): Opts {\n\tconst x: CanvasType[] = [\"review\", \"forecast\", \"plan\", \"track\"]\n\treturn x.reduce(reduceToOptions, [])\n}\n\n/**\n * Creates options for the `CanvasTimeFrameSelect` component\n *\n * @export\n * @returns {Opts}\n */\nexport function canvasTimeFrameOptions(): Opts {\n\tconst x: CFCTimeFrame[] = [\n\t\t\"weekly\",\n\t\t\"fortnightly\",\n\t\t\"monthly\",\n\t\t\"quaterly\",\n\t\t\"biannually\",\n\t\t\"yearly\",\n\t\t\"other\",\n\t]\n\treturn x.reduce(reduceToOptions, [])\n}\n\n/**\n * Generates the automated title for the canvas\n *\n * @export\n * @param {CanvasType} type\n * @param {CFCTimeFrame} timeframe\n * @param {Date} startDate\n * @param {Date} endDate\n * @returns {string}\n */\nexport function generateTitle(\n\ttype: CanvasType,\n\ttimeframe: CFCTimeFrame,\n\tstartDate: Date,\n\tendDate: Date\n): string {\n\tif (!isValid(startDate) || !isValid(endDate)) {\n\t\treturn \"Please provide a valid date\"\n\t}\n\n\treturn pipe(\n\t\tconcatStr(upperFirst(`${timeframe} `)),\n\t\tconcatStr(format(startDate, \"dd/MM/yyyy\")),\n\t\tconcatStr(\" to \"),\n\t\tconcatStr(format(endDate, \"dd/MM/yyyy\"))\n\t)(upperFirst(`${type} `))\n}\n\n/**\n * Gets the display title for a canvas\n *\n * @export\n * @param {(CFCStruct | BaseCFCStruct)} values\n * @returns {string}\n */\nexport function canvasDisplayTitle(values: CFCStruct | BaseCFCStruct): string {\n\tif (values.canvasTitle === \"\") {\n\t\treturn generateTitle(\n\t\t\tvalues.canvasType,\n\t\t\tvalues.canvasTimeFrame,\n\t\t\tvalues.canvasStartDate,\n\t\t\tvalues.canvasEndDate\n\t\t)\n\t}\n\n\treturn values.canvasTitle\n}\n\nexport const DescriptionSize = 5\nexport const AmountSize = 3\nexport const ApplyGSTSize = 2\nexport const ActionsSize = 2\n\ntype DupResponse = false | CFCStruct\n\n/**\n * Checks if the current config setup is a duplicate of another canvas.\n *\n * It either returns the cavnas that is being duplicated or false if it isn't a\n * duplicate\n *\n * @export\n * @param {CFCStruct} dups\n * @param {CFCPanelSlice} values\n * @param {BaseCFCStruct[\"canvasTitle\"]} title\n * @returns {(boolean | CFCStruct)}\n */\nexport function identifyIfDuplicate(\n\tdups: CFCStruct[],\n\tvalues: CFCPanelSlice,\n\tusingCustom: boolean,\n\tcanvasId?: CFCId\n): DupResponse {\n\tif (dups.length === 0) return false\n\tconst { canvasTitle, canvasEndDate, canvasStartDate } = values\n\n\tconst filtered = dups.filter((item) => {\n\t\tif (!usingCustom) {\n\t\t\treturn (\n\t\t\t\tisSameDay(item.canvasStartDate, canvasStartDate) &&\n\t\t\t\tisSameDay(item.canvasEndDate, canvasEndDate)\n\t\t\t)\n\t\t}\n\n\t\treturn item.canvasTitle === \"\" ? false : item.canvasTitle === canvasTitle\n\t})\n\n\tif (!canvasId) {\n\t\treturn filtered.length < 1 ? false : filtered[0]\n\t}\n\n\tif (filtered.length < 1) return false\n\n\tconst withoutCurrentCanvas = filtered.filter(filterById(canvasId, true))\n\treturn withoutCurrentCanvas.length < 1 ? false : withoutCurrentCanvas[0]\n}\n\n/**\n * Fetches from the database and does the duplication filter\n *\n * @export\n * @param {CFCPanelSlice} slice\n * @param {ClientId} client\n * @param {CFCId} [canvasId]\n * @returns {Promise<DupResponse>}\n */\nexport async function performDupFind(\n\tslice: CFCPanelSlice,\n\tclient: ClientId,\n\tusingCustom: boolean,\n\tcanvasId?: CFCId\n): Promise<DupResponse> {\n\tconst dups = await CFCUseCase.findPossibleDuplicates(\n\t\tslice.canvasType,\n\t\tslice.canvasTimeFrame,\n\t\tclient\n\t)\n\n\treturn identifyIfDuplicate(dups, slice, usingCustom, canvasId)\n}\n\n/**\n * Calculates the value for Question 1 of 4\n *\n * @export\n * @param {CalculatedValues} calculated\n * @returns {number}\n */\nexport function calcQuestionOne(calculated: CalculatedValues): number {\n\treturn calculated.cashSurplus\n}\n\n/**\n * Calculates the value for Question 2 of 4\n *\n * @export\n * @param {CalculatedValues} calculated\n * @param {number} payg\n * @param {number} superAmount\n * @param {number} incomeTax\n * @returns {number}\n */\nexport function calcQuestionTwo(\n\tcalculated: CalculatedValues,\n\tpayg: number,\n\tsuperAmount: number,\n\tincomeTax: number\n): number {\n\treturn pipe(\n\t\tminusBy(calculated.gstOnPurchases),\n\t\tadd(payg),\n\t\tadd(superAmount),\n\t\tadd(incomeTax)\n\t)(calculated.gstOnSales)\n}\n\n/**\n * Calculates the value for Question 3 of 4\n *\n * @export\n * @param {number} openingBalance\n * @param {CalculatedValues} calculated\n * @param {number} incomeTax\n * @returns {number}\n */\nexport function calcQuestionThree(\n\topeningBalance: number,\n\tcalculated: CalculatedValues,\n\tincomeTax: number\n): number {\n\treturn pipe(add(calculated.cashSurplus), minusBy(incomeTax))(openingBalance)\n}\n\n/**\n * Calculates the value for Question 4 of 4\n *\n * @export\n * @param {CalculatedValues} left\n * @param {CalculatedValues} right\n * @returns {number}\n */\nexport function calcQuestionFour(\n\tleft: CalculatedValues,\n\tright: CalculatedValues\n): number {\n\treturn left.totalNetAssets - right.totalNetAssets\n}\n","import React, { ReactElement } from \"react\"\nimport { Typography } from \"@material-ui/core\"\nimport { Link } from \"react-router-dom\"\nimport { PrivateRoutes } from \"../../util/routes/routes\"\n\n/**\n * Component to show when no data can be found for a given canvas\n *\n * @export\n * @returns {ReactElement}\n */\nexport default function DataNotFound(): ReactElement {\n\treturn (\n\t\t<>\n\t\t\t<Typography variant=\"h5\">Canvas not found</Typography>\n\t\t\t<Typography>\n\t\t\t\tThe requested canvas could not be found. Visit the{\" \"}\n\t\t\t\t<Link to={PrivateRoutes.CFCListing}>listing</Link> page or{\" \"}\n\t\t\t\t<Link to={PrivateRoutes.ClientList}>select a different client</Link>.\n\t\t\t</Typography>\n\t\t</>\n\t)\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Finds the index of any object in an array by a value\n *\n * @param {any[]} arr\n * @param {string} key\n * @param {any} value\n */\nconst findObjectIndexByValue = (arr: any[], key: string, value: any): number =>\n\tarr.findIndex((item) => item[key] === value)\n\nexport default findObjectIndexByValue\n","import { getTime } from \"date-fns\"\nimport { BaseCFCStruct, CFCPanelSlice } from \"../../../data/_config/shape\"\n\n/**\n * Creates a search query to pass to the Canvas Edit page\n *\n * @export\n * @param {(BaseCFCStruct | CFCPanelSlice)} values\n * @param {boolean} useCustomTitle\n * @returns {string}\n */\nexport default function createURLParams(\n\tvalues: BaseCFCStruct | CFCPanelSlice,\n\tuseCustomTitle: boolean\n): string {\n\tconst n = new URLSearchParams()\n\tn.append(\"title\", values.canvasTitle)\n\tn.append(\"useCustom\", useCustomTitle ? \"1\" : \"0\")\n\tn.append(\"type\", values.canvasType)\n\tn.append(\"timeframe\", values.canvasTimeFrame)\n\tn.append(\"startDate\", getTime(values.canvasStartDate).toString())\n\tn.append(\"endDate\", getTime(values.canvasEndDate).toString())\n\n\treturn n.toString()\n}\n","export type ReadFilePromiseResult = Promise<\n\t(string | ArrayBuffer | null) | Error\n>\n\n/**\n * Promise wrapper for the file reader\n *\n * @param {Blob} blob\n * @returns {Promise<any>}\n */\nexport default function readFile(blob: Blob): ReadFilePromiseResult {\n\treturn new Promise((resolve, reject) => {\n\t\tif (!blob) {\n\t\t\treject(new Error(\"Reading a file requires a valid file to be passed\"))\n\t\t}\n\n\t\tconst fr = new FileReader()\n\t\t// eslint-disable-next-line\n\t\tfr.onerror = (event) => {\n\t\t\treject(event)\n\t\t}\n\t\t// eslint-disable-next-line\n\t\tfr.onloadend = () => {\n\t\t\tresolve(fr.result)\n\t\t}\n\t\tfr.readAsText(blob)\n\t})\n}\n","import React, { ReactElement } from \"react\"\nimport { Box, Typography } from \"@material-ui/core\"\nimport MoneyInput from \"../MoneyInput\"\nimport { DescriptiveMoneyInputProps } from \"./__config/shape\"\nimport useStyles from \"./__config/styles\"\n\n/**\n * Component that shows a money input with a title and description.\n * Defaults to displaying in a row, can be set to be stacked.\n *\n * The props extend `OutlinedTextFieldProps`, meaning any textfield props can\n * be added to the component. The only custom props are;\n *\n * * `title`\n * * `description`\n * * `stacked` - defaults to `false`\n *\n * @export\n * @param {DescriptiveMoneyInputProps} {\n * \ttitle,\n * \tdescription,\n * \tstacked = false,\n * \t// eslint-disable-next-line\n * \t...textfieldProps\n * }\n * @returns {ReactElement}\n */\nexport default React.memo(function DescriptiveMoneyInput({\n\ttitle,\n\tdescription,\n\tstacked = false,\n\tmini = false,\n\tfullHeight = false,\n\t// eslint-disable-next-line\n\t...textfieldProps\n}: DescriptiveMoneyInputProps): ReactElement {\n\tconst styles = useStyles({ stacked, mini, fullHeight })\n\n\treturn (\n\t\t<Box className={styles.root}>\n\t\t\t<Box className={styles.type}>\n\t\t\t\t<Typography variant=\"h6\">{title}</Typography>\n\t\t\t\t<Typography>{description}</Typography>\n\t\t\t</Box>\n\t\t\t<MoneyInput\n\t\t\t\t// eslint-disable-next-line react/jsx-props-no-spreading\n\t\t\t\t{...textfieldProps}\n\t\t\t\tclassName={styles.moneyInput}\n\t\t\t/>\n\t\t</Box>\n\t)\n})\n","import { BaseDatabaseStruct, DatabaseId } from \"../../data/_config/shape\"\n\n/**\n * Used with the array `filter` method, this allows you to\n * filter a object using the `id` property.\n * The objects interface must use `BaseDatabaseStruct`\n * to work\n *\n * [{id: 4}, ...].filter(filterById(4))\n *\n * @param {DatabaseId} id\n * @param {boolean} reject If reject is true, then it will return the opposite.\n * @returns BaseDatabaseStruct[]\n */\nconst filterById = (id: DatabaseId, reject = false) => (\n\titem: BaseDatabaseStruct\n): boolean => {\n\tconst res = item.id === id\n\treturn reject ? !res : res\n}\n\nexport default filterById\n","import React, { ReactElement, useContext } from \"react\"\nimport { Link as RouterLink } from \"react-router-dom\"\nimport {\n\tTypography,\n\tContainer,\n\tButton,\n\tGrid,\n\tCard,\n\tCardMedia,\n\tCardActions,\n\tBox,\n\tCardHeader,\n\tAvatar,\n} from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { PrivateRoutes } from \"../util/routes/routes\"\nimport { PublicNavbar } from \"../components/Navbar\"\nimport { NewClientDialog } from \"../content/dialog\"\nimport { ClientContext } from \"../state/client\"\n\nconst useHomepageStyles = makeStyles((theme) => ({\n\tcontainer: {\n\t\tpaddingTop: theme.spacing(5),\n\t},\n\tgrid: {\n\t\tpaddingTop: theme.spacing(5),\n\t},\n\tbuttonBox: {\n\t\tmarginTop: theme.spacing(5),\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t},\n\tembed: {\n\t\tminHeight: \"300px\",\n\t\tborder: \"none\",\n\t},\n\tcontainerIndigo: {\n\t\tbackgroundColor: \"#e8eaf6\", // indigo50\n\t\tpadding: theme.spacing(5),\n\t\tmarginTop: theme.spacing(2),\n\t},\n\tcontainerGrey: {\n\t\tbackgroundColor: \"#f5f5f5\",\n\t\tpadding: theme.spacing(2),\n\t\tmarginTop: theme.spacing(3),\n\t},\n\tcontentText: {\n\t\tmargin: theme.spacing(2, 0),\n\t},\n\talignJustifyContent: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tflexWrap: \"nowrap\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\talignContent: \"center\",\n\t\tmargin: theme.spacing(2, 0),\n\t},\n\tpurple: {\n\t\tcolor: theme.palette.getContrastText(\"#9c27b0\"),\n\t\tbackgroundColor: \"#9c27b0\",\n\t\twidth: theme.spacing(7),\n\t\theight: theme.spacing(7),\n\t\tmarginTop: theme.spacing(2),\n\t\tfontSize: \"1.8rem\",\n\t},\n\tgreen: {\n\t\tcolor: theme.palette.getContrastText(\"#43a047\"),\n\t\tbackgroundColor: \"#43a047\",\n\t\twidth: theme.spacing(7),\n\t\theight: theme.spacing(7),\n\t\tmarginTop: theme.spacing(2),\n\t\tfontSize: \"1.8rem\",\n\t},\n\tblue: {\n\t\tcolor: theme.palette.getContrastText(\"#0091ea\"),\n\t\tbackgroundColor: \"#0091ea\",\n\t\twidth: theme.spacing(7),\n\t\theight: theme.spacing(7),\n\t\tmarginTop: theme.spacing(2),\n\t\tfontSize: \"1.8rem\",\n\t},\n\tMainHeading: {\n\t\tpaddingTop: theme.spacing(2),\n\t\tpaddingBottom: theme.spacing(2),\n\t\tfontSize: \"2.2rem\",\n\t},\n\tSectionTitle: {\n\t\tpaddingTop: theme.spacing(1),\n\t\tfontSize: \"1.8rem\",\n\t},\n}))\n\nconst Homepage = (): ReactElement => {\n\tconst {\n\t\tstate: { clients },\n\t} = useContext(ClientContext)\n\tconst styles = useHomepageStyles()\n\n\tconst hasClients = (): boolean => clients.length > 0\n\n\treturn (\n\t\t<>\n\t\t\t<PublicNavbar hasClients={hasClients()} />\n\t\t\t<Box role=\"main\">\n\t\t\t\t<Container className={styles.container}>\n\t\t\t\t\t<Typography\n\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\tcomponent=\"h1\"\n\t\t\t\t\t\tclassName={styles.MainHeading}\n\t\t\t\t\t>\n\t\t\t\t\t\tCASH FLOW COACHING KIT\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Typography align=\"center\" component=\"p\" variant=\"h5\">\n\t\t\t\t\t\tHelping businesses survive and grow.\n\t\t\t\t\t</Typography>\n\t\t\t\t</Container>\n\t\t\t\t<Container\n\t\t\t\t\tmaxWidth={false}\n\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\tclassName={styles.containerGrey}\n\t\t\t\t>\n\t\t\t\t\t<Container component=\"div\" maxWidth=\"lg\">\n\t\t\t\t\t\t<Grid container spacing={3}>\n\t\t\t\t\t\t\t<Grid item xs={12} sm={4} className={styles.alignJustifyContent}>\n\t\t\t\t\t\t\t\t<Avatar className={styles.purple}>1</Avatar>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tcomponent=\"h2\"\n\t\t\t\t\t\t\t\t\tvariant=\"h5\"\n\t\t\t\t\t\t\t\t\tclassName={styles.SectionTitle}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDiscover\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\t\t\tcomponent=\"p\"\n\t\t\t\t\t\t\t\t\tclassName={styles.contentText}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDo you want to learn about cash flow fundamentals and topics\n\t\t\t\t\t\t\t\t\tto get a competitive advantage?\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12} sm={4} className={styles.alignJustifyContent}>\n\t\t\t\t\t\t\t\t<Avatar className={styles.green}>2</Avatar>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tcomponent=\"h2\"\n\t\t\t\t\t\t\t\t\tvariant=\"h5\"\n\t\t\t\t\t\t\t\t\tclassName={styles.SectionTitle}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tApply\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\t\t\tcomponent=\"p\"\n\t\t\t\t\t\t\t\t\tclassName={styles.contentText}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDo you want to understand your current cash flow and explore\n\t\t\t\t\t\t\t\t\tways to help improve it?\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12} sm={4} className={styles.alignJustifyContent}>\n\t\t\t\t\t\t\t\t<Avatar className={styles.blue}>3</Avatar>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tcomponent=\"h2\"\n\t\t\t\t\t\t\t\t\tvariant=\"h5\"\n\t\t\t\t\t\t\t\t\tclassName={styles.SectionTitle}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tPlan &amp; Action\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\t\t\tcomponent=\"p\"\n\t\t\t\t\t\t\t\t\tclassName={styles.contentText}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDo you want to create your personalised action plan to keep\n\t\t\t\t\t\t\t\t\tyourself accountable and monitor your progress?\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Container>\n\t\t\t\t</Container>\n\t\t\t\t<Container>\n\t\t\t\t\t<Box className={styles.buttonBox}>\n\t\t\t\t\t\t{hasClients() ? (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\tcomponent={RouterLink}\n\t\t\t\t\t\t\t\tto={PrivateRoutes.ClientList}\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSee client list\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<NewClientDialog triggerText=\"Get Started\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Grid container spacing={3} className={styles.grid} justify=\"center\">\n\t\t\t\t\t\t{/* <Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<Card variant=\"outlined\">\n\t\t\t\t\t\t\t\t<CardHeader title=\"Take a tour of the kit\" />\n\t\t\t\t\t\t\t\t<CardMedia\n\t\t\t\t\t\t\t\t\tclassName={styles.embed}\n\t\t\t\t\t\t\t\t\tcomponent=\"iframe\"\n\t\t\t\t\t\t\t\t\ttitle=\"Take a tour of the kit\"\n\t\t\t\t\t\t\t\t\tsrc=\"https://www.youtube.com/embed/vSoCk1sgV3M\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\thref=\"/transcripts/Take-a-tour-of-the-kit.docx\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\" rel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDownload Transcript\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</CardActions>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Grid> */}\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<Card variant=\"outlined\">\n\t\t\t\t\t\t\t\t<CardHeader title=\"What advisors think of the kit\" />\n\t\t\t\t\t\t\t\t<CardMedia\n\t\t\t\t\t\t\t\t\tclassName={styles.embed}\n\t\t\t\t\t\t\t\t\tcomponent=\"iframe\"\n\t\t\t\t\t\t\t\t\ttitle=\"What advisors think of the kit\"\n\t\t\t\t\t\t\t\t\tsrc=\"https://www.youtube.com/embed/z64Bc5K2TKo\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\thref=\"/transcripts/What-advisors-think-of-the-kit.docx\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDownload Transcript\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</CardActions>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Container>\n\n\t\t\t\t<Container\n\t\t\t\t\tcomponent=\"div\"\n\t\t\t\t\tclassName={styles.containerIndigo}\n\t\t\t\t\tmaxWidth={false}\n\t\t\t\t>\n\t\t\t\t\t<Container maxWidth=\"lg\">\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\tcomponent=\"p\"\n\t\t\t\t\t\t\tclassName={styles.contentText}\n\t\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tThis website does not collect or store any personal information,\n\t\t\t\t\t\t\tincluding the name of your business, any financial records you\n\t\t\t\t\t\t\tinput or upload, or any of the actions you are taking with your\n\t\t\t\t\t\t\tbusiness.\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\tcomponent=\"p\"\n\t\t\t\t\t\t\tclassName={styles.contentText}\n\t\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tThe data you enter into the Cash Flow Coaching Kit will be stored\n\t\t\t\t\t\t\ton this device only. Clearing your browser cache will erase all\n\t\t\t\t\t\t\tclient data.\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\tcomponent=\"p\"\n\t\t\t\t\t\t\tclassName={styles.contentText}\n\t\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWe recommend using the EXPORT function regularly to avoid data\n\t\t\t\t\t\t\tloss. Please refer to the{\" \"}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"/docs/Terms and Cond.docx\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tTerms &amp; Conditions\n\t\t\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\t\t\tof use and our Data usage and privacy statement.\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\tcomponent=\"p\"\n\t\t\t\t\t\t\tclassName={styles.contentText}\n\t\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tIf you have any questions about the kit, please use our feedback\n\t\t\t\t\t\t\tform.\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Container>\n\t\t\t\t</Container>\n\t\t\t</Box>\n\t\t</>\n\t)\n}\n\nexport default Homepage\n","import React, { ReactElement } from \"react\"\nimport { Route } from \"react-router-dom\"\nimport { PublicRoutes } from \"../../../util/routes/routes\"\nimport Homepage from \"../../../pages\"\n\n/**\n * Public route definitions, these pages should be available\n * without the user entering a client\n *\n * @returns {ReactElement}\n */\nconst PublicRoutesWrapper = (): ReactElement => (\n\t<>\n\t\t<Route exact path={PublicRoutes.Home}>\n\t\t\t<Homepage />\n\t\t</Route>\n\t</>\n)\n\nexport default PublicRoutesWrapper\n","import { Reducer } from \"react\"\nimport { ICFCState, CFCReducerActions, CFCActionTypes } from \"./shape\"\nimport setDuplicateError from \"./actions/setDuplicateError\"\nimport setInvalidDateError from \"./actions/setInvalidDateError\"\nimport setQuestionValues from \"./actions/setQuestionValues\"\nimport setCompareCanvases from \"./actions/setCompareCanvases\"\nimport setCopyCanvasActive from \"./actions/setCopyCanvasActive\"\n\ntype ICFCReducer = Reducer<ICFCState, CFCReducerActions>\n\n/**\n * Reducer used for the CFC state\n *\n * @param {ICFCState} state Current state\n * @param {CFCReducerActions} action action to perform\n * @returns ICFCState\n */\nconst CFCReducer: ICFCReducer = (\n\tstate: ICFCState,\n\taction: CFCReducerActions\n): ICFCState => {\n\tswitch (action.type) {\n\t\tcase CFCActionTypes.ChangeDuplicateError:\n\t\t\treturn setDuplicateError(state, action.payload)\n\t\tcase CFCActionTypes.ChangeInvalidDateError:\n\t\t\treturn setInvalidDateError(state, action.payload)\n\t\tcase CFCActionTypes.ChangeQuestionValues:\n\t\t\treturn setQuestionValues(state, action.payload)\n\t\tcase CFCActionTypes.ChangeCompare:\n\t\t\treturn setCompareCanvases(state, action.payload)\n\t\tcase CFCActionTypes.ChangeCopyCanvasActive:\n\t\t\treturn setCopyCanvasActive(state, action.payload)\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default CFCReducer\n","import { ICFCState } from \"../shape\"\n\n/**\n * Changes the `duplicateError` value in the state\n *\n * @export\n * @param {ICFCState} state\n * @param {ICFCState[\"duplicateError\"]} payload\n * @returns {ICFCState}\n */\nexport default function setDuplicateError(\n\tstate: ICFCState,\n\tpayload: ICFCState[\"duplicateError\"]\n): ICFCState {\n\treturn {\n\t\t...state,\n\t\tduplicateError: payload,\n\t}\n}\n","import { ICFCState } from \"../shape\"\n\n/**\n * Changes the `invalidDateError` value in the state\n *\n * @export\n * @param {ICFCState} state\n * @param {ICFCState[\"invalidDateError\"]} payload\n * @returns {ICFCState}\n */\nexport default function setInvalidDateError(\n\tstate: ICFCState,\n\tpayload: ICFCState[\"invalidDateError\"]\n): ICFCState {\n\treturn {\n\t\t...state,\n\t\tinvalidDateError: payload,\n\t}\n}\n","import { ICFCState } from \"../shape\"\n\n/**\n * Change the question values state value\n *\n * @export\n * @param {ICFCState} state\n * @param {ICFCState[\"questionValues\"]} payload\n * @returns {ICFCState}\n */\nexport default function setQuestionValues(\n\tstate: ICFCState,\n\tpayload: ICFCState[\"questionValues\"]\n): ICFCState {\n\treturn {\n\t\t...state,\n\t\tquestionValues: payload,\n\t}\n}\n","import { ICFCState, ChangeComparePayload } from \"../shape\"\n\n/**\n * Change the canvases to compare\n *\n * @export\n * @param {ICFCState} state\n * @param {ChangeComparePayload} payload\n * @returns {ICFCState}\n */\nexport default function setCompareCanvases(\n\tstate: ICFCState,\n\tpayload: ChangeComparePayload\n): ICFCState {\n\treturn {\n\t\t...state,\n\t\tleftCompare: payload.left,\n\t\trightCompare: payload.right,\n\t}\n}\n","import { ICFCState } from \"../shape\"\n\n/**\n * Changes the `copyCanvasActive` value in the state\n *\n * @export\n * @param {ICFCState} state\n * @param {ICFCState[\"copyCanvasActive\"]} payload\n * @returns {ICFCState}\n */\nexport default function setCopyCanvasActive(\n\tstate: ICFCState,\n\tpayload: ICFCState[\"copyCanvasActive\"]\n): ICFCState {\n\treturn {\n\t\t...state,\n\t\tcopyCanvasActive: payload,\n\t}\n}\n","import React, {\n\tReactNode,\n\tReactElement,\n\tuseReducer,\n\tReducer,\n\tuseMemo,\n} from \"react\"\nimport CFCReducer from \"./reducer\"\nimport { ICFCState, CFCReducerActions } from \"./shape\"\nimport CFCContext, { defaultCFCState } from \"./context\"\n\ntype ReducerMakeup = Reducer<ICFCState, CFCReducerActions>\n\n/**\n * Context state provider element\n *\n * @param {{ children: ReactNode }} props\n * @returns {ReactElement}\n */\nfunction CFCProvider(props: { children: ReactNode }): ReactElement {\n\tconst [state, dispatch] = useReducer<ReducerMakeup>(\n\t\tCFCReducer,\n\t\tdefaultCFCState\n\t)\n\n\tconst value = useMemo(\n\t\t(): ICFCState => ({\n\t\t\t...state,\n\t\t\tdispatch,\n\t\t}),\n\t\t[state]\n\t)\n\n\t// eslint-disable-next-line react/jsx-props-no-spreading\n\treturn <CFCContext.Provider value={value} {...props} />\n}\n\nexport default CFCProvider\n","import React, { ReactElement } from \"react\"\nimport { Route } from \"react-router-dom\"\nimport loadable from \"@loadable/component\"\nimport { PrivateRoutes } from \"../../../util/routes/routes\"\nimport { ActionChecklistProvider } from \"../../../state/action-checklist\"\nimport { PrivatePage, PageContainer } from \"../../Layouts\"\nimport CFCProvider from \"../../../state/CFC/provider\"\nimport Loading from \"../../Loading\"\n\nconst LoadableFallback = (): ReactElement => (\n\t<PageContainer>\n\t\t<Loading />\n\t</PageContainer>\n)\n\nconst DTFundingBusiness = loadable(\n\t() => import(\"../../../pages/DiscoverTopics/funding-business\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst DTManagingCashFlow = loadable(\n\t() => import(\"../../../pages/DiscoverTopics/managing-cash-flow\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst DTPlanningBusiness = loadable(\n\t() => import(\"../../../pages/DiscoverTopics/planning-business\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst DTPlanningFinanicalCommitments = loadable(\n\t() => import(\"../../../pages/DiscoverTopics/planning-financial-commitments\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst DTRecordKeeping = loadable(\n\t() => import(\"../../../pages/DiscoverTopics/record-keeping\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst DTSellingClosingSuccession = loadable(\n\t() => import(\"../../../pages/DiscoverTopics/selling-closing-succession\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst DTTrackingPerformance = loadable(\n\t() => import(\"../../../pages/DiscoverTopics/tracking-performance\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst ClientList = loadable(() => import(\"../../../pages/client-list\"), {\n\tfallback: <LoadableFallback />,\n})\nconst SessionFiles = loadable(() => import(\"../../../pages/session-files\"), {\n\tfallback: <LoadableFallback />,\n})\nconst HCQuestionnaire = loadable(\n\t() => import(\"../../../pages/HealthCheck/questionnaire\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst DTListing = loadable(\n\t() => import(\"../../../pages/DiscoverTopics/listing\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst CFCCanvas = loadable(\n\t() => import(\"../../../pages/CashFlowCanvas/canvas\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst ChangeLevers = loadable(() => import(\"../../../pages/change-levers\"), {\n\tfallback: <LoadableFallback />,\n})\nconst ActionChecklist = loadable(() => import(\"../../../pages/action-items\"), {\n\tfallback: <LoadableFallback />,\n})\nconst CoachingKit = loadable(() => import(\"../../../pages/coaching-kit\"), {\n\tfallback: <LoadableFallback />,\n})\nconst HCListing = loadable(() => import(\"../../../pages/HealthCheck/listing\"), {\n\tfallback: <LoadableFallback />,\n})\nconst HCSummary = loadable(() => import(\"../../../pages/HealthCheck/summary\"), {\n\tfallback: <LoadableFallback />,\n})\nconst CanvasEdit = loadable(\n\t() => import(\"../../../pages/CashFlowCanvas/canvasEdit\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst CFCListing = loadable(\n\t() => import(\"../../../pages/CashFlowCanvas/listing\"),\n\t{ fallback: <LoadableFallback /> }\n)\nconst CFCCompare = loadable(\n\t() => import(\"../../../pages/CashFlowCanvas/compare\"),\n\t{ fallback: <LoadableFallback /> }\n)\n\n/**\n * Private route definitions, these pages should not be available\n * without the user entering a client\n *\n * @returns {ReactElement}\n */\nconst PrivateRoutesWrapper = (): ReactElement => {\n\treturn (\n\t\t<PrivatePage>\n\t\t\t<Route path={PrivateRoutes.CoachingKit}>\n\t\t\t\t<CoachingKit />\n\t\t\t</Route>\n\t\t\t<Route path={PrivateRoutes.SessionFiles}>\n\t\t\t\t<SessionFiles />\n\t\t\t</Route>\n\t\t\t<Route exact path={PrivateRoutes.HealthCheckQuiz}>\n\t\t\t\t<HCQuestionnaire />\n\t\t\t</Route>\n\t\t\t<Route exact path={PrivateRoutes.HealthCheckList}>\n\t\t\t\t<HCListing />\n\t\t\t</Route>\n\t\t\t<Route exact path={PrivateRoutes.HealthCheckSummary}>\n\t\t\t\t<HCSummary />\n\t\t\t</Route>\n\t\t\t<Route path={PrivateRoutes.DiscoverTopics}>\n\t\t\t\t<DTListing />\n\t\t\t</Route>\n\n\t\t\t<CFCProvider>\n\t\t\t\t<Route path={PrivateRoutes.CFC} exact>\n\t\t\t\t\t<CFCCanvas />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.CFCEdit}>\n\t\t\t\t\t<CanvasEdit />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.CFCListing}>\n\t\t\t\t\t<CFCListing />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.CFCCompare}>\n\t\t\t\t\t<CFCCompare />\n\t\t\t\t</Route>\n\t\t\t</CFCProvider>\n\n\t\t\t{/*\n\t\t\t\tWrap change levers and action checklist in provider since\n\t\t\t\tthey require the state values provided by this context setup\n\t\t\t*/}\n\t\t\t<ActionChecklistProvider>\n\t\t\t\t<Route path={PrivateRoutes.ClientList}>\n\t\t\t\t\t<ClientList />\n\t\t\t\t</Route>\n\n\t\t\t\t<Route path={PrivateRoutes.ChangeLevers}>\n\t\t\t\t\t<ChangeLevers />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.ActionChecklist}>\n\t\t\t\t\t<ActionChecklist />\n\t\t\t\t</Route>\n\n\t\t\t\t<Route path={PrivateRoutes.DTFundingBusiness}>\n\t\t\t\t\t<DTFundingBusiness />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.DTManagingCashFlow}>\n\t\t\t\t\t<DTManagingCashFlow />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.DTPlanningBusiness}>\n\t\t\t\t\t<DTPlanningBusiness />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.DTPlanningFinanicalCommitments}>\n\t\t\t\t\t<DTPlanningFinanicalCommitments />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.DTRecordKeeping}>\n\t\t\t\t\t<DTRecordKeeping />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.DTSellingClosingSuccession}>\n\t\t\t\t\t<DTSellingClosingSuccession />\n\t\t\t\t</Route>\n\t\t\t\t<Route path={PrivateRoutes.DTTrackingPerformance}>\n\t\t\t\t\t<DTTrackingPerformance />\n\t\t\t\t</Route>\n\t\t\t</ActionChecklistProvider>\n\t\t</PrivatePage>\n\t)\n}\n\nexport default PrivateRoutesWrapper\n","import React, { ReactElement, useEffect, useContext } from \"react\"\nimport { HashRouter as Router, Switch, useLocation } from \"react-router-dom\"\nimport PublicRoutesWrapper from \"./Public\"\nimport PrivateRoutesWrapper from \"./Private\"\nimport syncClientsWithDb from \"../../data/client/syncWithDB\"\nimport { ClientContext } from \"../../state/client\"\n\n/**\n * Function to scroll to the top of the page on page change\n *\n * @see https://reacttraining.com/react-router/web/guides/scroll-restoration\n * @returns {null}\n */\nfunction ScrollToTop(): null {\n\tconst { pathname } = useLocation()\n\n\tuseEffect(() => {\n\t\twindow.scrollTo(0, 0)\n\t}, [pathname])\n\n\treturn null\n}\n\n/**\n * Application router component\n *\n * @returns {ReactElement}\n */\nconst AppRouter = (): ReactElement => {\n\tconst { dispatch } = useContext(ClientContext)\n\n\tuseEffect(() => {\n\t\t;(async function sync(): Promise<void> {\n\t\t\tawait syncClientsWithDb(dispatch)\n\t\t})()\n\t}, [dispatch])\n\n\treturn (\n\t\t<Router>\n\t\t\t<ScrollToTop />\n\t\t\t<Switch>\n\t\t\t\t<>\n\t\t\t\t\t<PublicRoutesWrapper />\n\t\t\t\t\t{/* TODO: Hide if the user does not have any clients */}\n\t\t\t\t\t<PrivateRoutesWrapper />\n\t\t\t\t</>\n\t\t\t</Switch>\n\t\t</Router>\n\t)\n}\n\nexport default AppRouter\n","import React, { ReactElement } from \"react\"\nimport { AppRouter } from \"./components/Routing\"\nimport { ClientProvider } from \"./state/client\"\n\nconst App = (): ReactElement => {\n\treturn (\n\t\t<ClientProvider>\n\t\t\t<AppRouter />\n\t\t</ClientProvider>\n\t)\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === \"localhost\" ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === \"[::1]\" ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n)\n\ntype Config = {\n\tonSuccess?: (registration: ServiceWorkerRegistration) => void\n\tonUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn\n\t\t}\n\n\t\twindow.addEventListener(\"load\", () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\"This web app is being served cache-first by a service \" +\n\t\t\t\t\t\t\t\"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\"New content is available and will be used when all \" +\n\t\t\t\t\t\t\t\t\t\"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\")\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(\"Error during service worker registration:\", error)\n\t\t})\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { \"Service-Worker\": \"script\" },\n\t})\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get(\"content-type\")\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf(\"javascript\") === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t\"No internet connection found. App is running in offline mode.\"\n\t\t\t)\n\t\t})\n}\n\nexport function unregister() {\n\tif (\"serviceWorker\" in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then((registration) => {\n\t\t\t\tregistration.unregister()\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error.message)\n\t\t\t})\n\t}\n}\n","import \"react-app-polyfill/ie11\"\nimport \"react-app-polyfill/stable\"\n\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./theme/sass/style.scss\"\nimport App from \"./App\"\nimport * as serviceWorker from \"./serviceWorker\"\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n\nif (process.env.NODE_ENV === \"production\") {\n\t// eslint-disable-next-line\n\twindow.onbeforeunload = function (e: any): any {\n\t\t// eslint-disable-next-line\n\t\te = e || window.event\n\t\t// old browsers\n\t\tif (e) {\n\t\t\t// eslint-disable-next-line\n\t\t\te.returnValue = \"Sure?\"\n\t\t}\n\t\t// safari, chrome(chrome ignores text)\n\t\treturn \"Sure?\"\n\t}\n}\n","import { Dispatch } from \"react\"\nimport {\n\tClientDataStruct,\n\tClientId,\n\tHealthCheckId,\n} from \"../../data/_config/shape\"\n\n/**\n * Actions that can be performed for state changes\n *\n * @export\n * @enum {number}\n */\nexport enum ClientActionTypes {\n\tAddClient = \"add_client\",\n\tRemoveClient = \"remove_client\",\n\tBulkAdd = \"bulk_add\",\n\tChangeCurrentClient = \"change_current_client\",\n\tUpdateClientSynced = \"change_client_syned\",\n\tUpdateLastViewedHC = \"change_last_viewed_hc\",\n}\n\nexport type LastViewedHC = HealthCheckId | null\n\n/**\n * Defines the type:payload type pairing\n * aka; what the structure of the payload should be\n * given a certain type\n *\n * @exports\n * @type IClientReducerAction\n */\nexport type IClientReducerAction =\n\t| { type: ClientActionTypes.AddClient; payload: ClientDataStruct }\n\t| { type: ClientActionTypes.RemoveClient; payload: ClientId }\n\t| { type: ClientActionTypes.BulkAdd; payload: ClientDataStruct[] }\n\t| { type: ClientActionTypes.ChangeCurrentClient; payload: ClientId }\n\t| { type: ClientActionTypes.UpdateClientSynced; payload: boolean }\n\t| {\n\t\t\ttype: ClientActionTypes.UpdateLastViewedHC\n\t\t\tpayload: LastViewedHC\n\t  }\n\n/**\n * Data structure for the state object\n *\n * @export\n * @interface IClientData\n */\nexport interface IClientData {\n\tclients: ClientDataStruct[]\n\tcurrentClient?: ClientDataStruct\n\tclientSynced: boolean\n\tlastViewedHC: LastViewedHC\n}\n\n/**\n * Strcuture for the client context\n *\n * @export\n * @interface IClientState\n */\nexport interface IClientState {\n\tstate: IClientData\n\tdispatch: Dispatch<IClientReducerAction>\n}\n","import { IClientState } from \"../client-outline\"\nimport { ClientDataStruct } from \"../../../data/_config/shape\"\n\nconst addClient = (\n\tstate: IClientState,\n\tpayload: ClientDataStruct\n): IClientState => {\n\tconst newClients = state.state.clients.concat(payload)\n\treturn {\n\t\t...state,\n\t\tstate: {\n\t\t\t...state.state,\n\t\t\tclients: newClients,\n\t\t},\n\t}\n}\n\nexport default addClient\n","import { IClientState } from \"../client-outline\"\nimport { ClientDataStruct } from \"../../../data/_config/shape\"\n\nconst bulkAdd = (\n\tstate: IClientState,\n\tpayload: ClientDataStruct[]\n): IClientState => {\n\treturn {\n\t\t...state,\n\t\tstate: {\n\t\t\t...state.state,\n\t\t\tclients: payload,\n\t\t},\n\t}\n}\n\nexport default bulkAdd\n","import { IClientState } from \"../client-outline\"\nimport { ClientId } from \"../../../data/_config/shape\"\nimport filterById from \"../../../util/filters/ById\"\nimport {\n\tsetStorageClient,\n\temptyClientValue,\n} from \"../../../util/localStorage/client\"\n\nconst changeCurrentClient = (\n\tstate: IClientState,\n\tpayload: ClientId\n): IClientState => {\n\tconst client = state.state.clients.find(filterById(payload))\n\tsetStorageClient(client?.id || emptyClientValue)\n\n\treturn {\n\t\t...state,\n\t\tstate: {\n\t\t\t...state.state,\n\t\t\tcurrentClient: client,\n\t\t},\n\t}\n}\n\nexport default changeCurrentClient\n","import { IClientState } from \"../client-outline\"\n\nconst updateClientSynced = (\n\tstate: IClientState,\n\tpayload: boolean\n): IClientState => {\n\treturn {\n\t\t...state,\n\t\tstate: {\n\t\t\t...state.state,\n\t\t\tclientSynced: payload,\n\t\t},\n\t}\n}\n\nexport default updateClientSynced\n","import { IClientState } from \"../client-outline\"\nimport { ClientId } from \"../../../data/_config/shape\"\nimport filterById from \"../../../util/filters/ById\"\nimport hasProperty from \"../../../util/object/hasProperty\"\nimport {\n\tsetStorageClient,\n\temptyClientValue,\n\tremoveStorageClient,\n} from \"../../../util/localStorage/client\"\n\nconst removeClient = (state: IClientState, payload: ClientId): IClientState => {\n\tconst clients = state.state.clients.filter(filterById(payload, true))\n\tconst currentClient =\n\t\t!hasProperty(state.state.currentClient, \"id\") ||\n\t\tstate.state.currentClient?.id === payload\n\t\t\t? clients[0]\n\t\t\t: state.state.currentClient\n\n\tsetStorageClient(currentClient?.id || emptyClientValue)\n\n\tif (clients.length === 0) {\n\t\tremoveStorageClient()\n\t}\n\n\treturn {\n\t\t...state,\n\t\tstate: {\n\t\t\t...state.state,\n\t\t\tcurrentClient,\n\t\t\tclients,\n\t\t},\n\t}\n}\n\nexport default removeClient\n","import { IClientState, LastViewedHC } from \"../client-outline\"\n\nconst changeLastViewedHC = (\n\tstate: IClientState,\n\tpayload: LastViewedHC\n): IClientState => {\n\treturn {\n\t\t...state,\n\t\tstate: {\n\t\t\t...state.state,\n\t\t\tlastViewedHC: payload,\n\t\t},\n\t}\n}\n\nexport default changeLastViewedHC\n","/* eslint-disable no-unreachable */\nimport { Reducer } from \"react\"\nimport {\n\tIClientState,\n\tIClientReducerAction,\n\tClientActionTypes,\n} from \"./client-outline\"\nimport {\n\taddClient,\n\tbulkAdd,\n\tchangeCurrentClient,\n\tupdateClientSynced,\n\tremoveClient,\n} from \"./actions\"\nimport changeLastViewedHC from \"./actions/changeLastViewedHC\"\n\n/**\n * Reducer used for the client state\n *\n * @param {IClientState} state Current state\n * @param {IClientReducerAction} action action to perform\n * @returns IClientState\n */\nconst ClientReducer: Reducer<IClientState, IClientReducerAction> = (\n\tstate: IClientState,\n\taction: IClientReducerAction\n): IClientState => {\n\tswitch (action.type) {\n\t\tcase ClientActionTypes.AddClient: {\n\t\t\treturn addClient(state, action.payload)\n\t\t}\n\t\tcase ClientActionTypes.RemoveClient: {\n\t\t\treturn removeClient(state, action.payload)\n\t\t}\n\t\tcase ClientActionTypes.BulkAdd: {\n\t\t\treturn bulkAdd(state, action.payload)\n\t\t}\n\t\tcase ClientActionTypes.ChangeCurrentClient: {\n\t\t\treturn changeCurrentClient(state, action.payload)\n\t\t}\n\t\tcase ClientActionTypes.UpdateClientSynced: {\n\t\t\treturn updateClientSynced(state, action.payload)\n\t\t}\n\t\tcase ClientActionTypes.UpdateLastViewedHC: {\n\t\t\treturn changeLastViewedHC(state, action.payload)\n\t\t}\n\t\tdefault: {\n\t\t\treturn state\n\t\t}\n\t}\n}\n\nexport default ClientReducer\n","import React, {\n\tuseReducer,\n\tReducer,\n\tReactElement,\n\tReactNode,\n\tuseMemo,\n} from \"react\"\nimport ClientReducer from \"./client-reducer\"\nimport { IClientState, IClientReducerAction } from \"./client-outline\"\nimport ClientContext, { defaultClientState } from \"./client-context\"\n\n/**\n * Context state provider element\n *\n * @param {ReactNode} {children}\n */\nconst ClientProvider = (props: { children: ReactNode }): ReactElement => {\n\tconst [state, dispatch] = useReducer<\n\t\tReducer<IClientState, IClientReducerAction>\n\t>(ClientReducer, defaultClientState)\n\n\tconst value = useMemo(\n\t\t(): IClientState => ({\n\t\t\t...state,\n\t\t\tdispatch,\n\t\t}),\n\t\t[state]\n\t)\n\n\t// eslint-disable-next-line react/jsx-props-no-spreading\n\treturn <ClientContext.Provider value={value} {...props} />\n}\n\nexport default ClientProvider\n","import { makeStyles } from \"@material-ui/core\"\nimport orange from \"@material-ui/core/colors/orange\"\n\nconst useInputWrapper = makeStyles((theme) => ({\n\twrapper: {\n\t\tbackground: \"white\",\n\t\tborderRadius: theme.shape.borderRadius,\n\t\tpadding: theme.spacing(2),\n\t\tboxShadow: theme.shadows[1],\n\t},\n\thighlight: {\n\t\tborderTop: `5px solid ${orange[500]}`,\n\t},\n\thighlightLeft: {\n\t\tborderLeft: `5px solid ${orange[500]}`,\n\t},\n\tplain: {\n\t\tboxShadow: \"none\",\n\t},\n}))\n\nconst useCustomTitleStyles = makeStyles((theme) => ({\n\tcheckboxRoot: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\ttextField: {\n\t\tmarginBottom: theme.spacing(1),\n\t},\n\tdivider: {\n\t\tmargin: `${theme.spacing(2)}px 0`,\n\t},\n}))\n\nconst useRepeaterStyles = makeStyles((theme) => ({\n\tbody: {\n\t\tpaddingRight: theme.spacing(0),\n\t\tpaddingLeft: theme.spacing(0),\n\t},\n\tform: {\n\t\toverflow: \"hidden\",\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\toverflowX: \"scroll\",\n\t\t},\n\t},\n\tformInner: {\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tminWidth: theme.breakpoints.values.md,\n\t\t\tpaddingBottom: theme.spacing(1),\n\t\t},\n\t},\n\tmobileNotice: {\n\t\tdisplay: \"block\",\n\t\t[theme.breakpoints.up(\"sm\")]: {\n\t\t\tdisplay: \"none\",\n\t\t},\n\t},\n}))\n\n// eslint-disable-next-line import/prefer-default-export\nexport { useInputWrapper, useCustomTitleStyles, useRepeaterStyles }\n","import Dexie from \"dexie\"\nimport {\n\tActionChecklistStruct,\n\tActionChecklistId,\n\tActionChecklistPriorityStruct,\n\tActionChecklistPriorityId,\n\tActionChecklistNotesStruct,\n\tActionChecklistNotesId,\n} from \"../_config/shape\"\n\n/**\n * Database definition for the Action checklist data\n *\n * @class ActionChecklistDatabase\n * @extends {Dexie}\n */\nclass ActionChecklistDatabase extends Dexie {\n\t/**\n\t * Table used to store action item data\n\t *\n\t * @type {Dexie.Table<ActionChecklistStruct, ActionChecklistId>}\n\t * @memberof ActionChecklistDatabase\n\t */\n\tactionItems!: Dexie.Table<ActionChecklistStruct, ActionChecklistId>\n\n\t/**\n\t * Table used to store action item priority\n\t *\n\t * @type {Dexie.Table<\n\t * \t\tActionChecklistPriorityStruct,\n\t * \t\tActionChecklistPriorityId\n\t * \t>}\n\t * @memberof ActionChecklistDatabase\n\t */\n\tpriority!: Dexie.Table<\n\t\tActionChecklistPriorityStruct,\n\t\tActionChecklistPriorityId\n\t>\n\n\t/**\n\t * Table used to store action item notes\n\t *\n\t * @type {Dexie.Table<ActionChecklistNotesStruct, ActionChecklistNotesId>}\n\t * @memberof ActionChecklistDatabase\n\t */\n\tnotes!: Dexie.Table<ActionChecklistNotesStruct, ActionChecklistNotesId>\n\n\t/**\n\t * Creates an instance of ActionChecklistDatabase.\n\t *\n\t * @memberof ActionChecklistDatabase\n\t */\n\tconstructor() {\n\t\tsuper(\"ActionChecklistDatabase\")\n\t\tthis.applyMigrations()\n\n\t\tthis.actionItems = this.table(\"actionItems\")\n\t\tthis.priority = this.table(\"priority\")\n\t\tthis.notes = this.table(\"notes\")\n\n\t\tthis.replaceIdsWithStrings()\n\t}\n\n\t/**\n\t * Applys the migration for the database.\n\t * Add new migrations when the database needs to update\n\t *\n\t * @private\n\t * @memberof ActionChecklistDatabase\n\t */\n\tprivate applyMigrations(): void {\n\t\t// Version 1\n\t\t// Initial migration\n\t\tthis.version(1).stores({\n\t\t\tactionItems: \"++id, clientId, actionContainer, completed, description\",\n\t\t\tpriority: \"++id, actionContainer, *order\",\n\t\t})\n\n\t\t// Version 1.1\n\t\t// Add reviewBy to actionItems\n\t\tthis.version(1.1).stores({\n\t\t\tactionItems:\n\t\t\t\t\"++id, clientId, actionContainer, completed, description, reviewBy\",\n\t\t\tpriority: \"++id, actionContainer, *order\",\n\t\t})\n\n\t\t// Version 1.2\n\t\t// Add notes\n\t\tthis.version(1.2).stores({\n\t\t\tactionItems:\n\t\t\t\t\"++id, clientId, actionContainer, completed, description, reviewBy\",\n\t\t\tpriority: \"++id, actionContainer, *order, clientId\",\n\t\t\tnotes: \"++id, actionContainer, notes, clientId\",\n\t\t})\n\n\t\t// Version 1.3\n\t\t// Add compound index for [actionContainer+clientId]\n\t\tthis.version(1.3).stores({\n\t\t\tactionItems:\n\t\t\t\t\"++id, [actionContainer+clientId], completed, description, reviewBy\",\n\t\t\tpriority: \"++id, [actionContainer+clientId], *order\",\n\t\t\tnotes: \"++id, actionContainer, notes, clientId\",\n\t\t})\n\n\t\t// Version 2\n\t\t// Add compound index for [actionContainer+clientId]\n\t\tthis.version(2).stores({\n\t\t\tactionItems:\n\t\t\t\t\"++id, [actionContainer+clientId], clientId, completed, description, reviewBy\",\n\t\t\tpriority: \"++id, [actionContainer+clientId], clientId, *order\",\n\t\t\tnotes: \"++id, actionContainer, notes, clientId\",\n\t\t})\n\n\t\t// Version 2.1\n\t\t// Add compound index for [actionContainer+clientId]\n\t\tthis.version(2.1).stores({\n\t\t\tactionItems:\n\t\t\t\t\"++id, [actionContainer+clientId], clientId, completed, description, reviewBy\",\n\t\t\tpriority: \"++id, [actionContainer+clientId], clientId, *order\",\n\t\t\tnotes: \"++id, [actionContainer+clientId], notes, clientId\",\n\t\t})\n\t}\n\n\tprivate replaceIdsWithStrings(): void {\n\t\tthis.actionItems.toCollection().modify((items) => {\n\t\t\tif (typeof items.id === \"number\") {\n\t\t\t\titems.id = `${items.id}`\n\t\t\t}\n\t\t\tif (typeof items.clientId === \"number\") {\n\t\t\t\titems.clientId = `${items.clientId}`\n\t\t\t}\n\t\t})\n\n\t\tthis.notes.toCollection().modify((note) => {\n\t\t\tif (typeof note.id === \"number\") {\n\t\t\t\tnote.id = `${note.id}`\n\t\t\t}\n\t\t\tif (typeof note.clientId === \"number\") {\n\t\t\t\tnote.clientId = `${note.clientId}`\n\t\t\t}\n\t\t})\n\n\t\tthis.priority.toCollection().modify((prior) => {\n\t\t\tif (typeof prior.id === \"number\") {\n\t\t\t\tprior.id = `${prior.id}`\n\t\t\t}\n\t\t\tif (typeof prior.clientId === \"number\") {\n\t\t\t\tprior.clientId = `${prior.clientId}`\n\t\t\t}\n\t\t\tprior.order = prior.order.map((o) => (typeof o === \"number\" ? `${o}` : o))\n\t\t})\n\t}\n}\n\nconst ActionChecklistDB = new ActionChecklistDatabase()\n\nexport default ActionChecklistDB\n","import { Dispatch } from \"react\"\nimport {\n\tActionChecklistPriorityStruct,\n\tActionChecklistStruct,\n\tBaseActionChecklistStruct,\n\tActionChecklistId,\n\tActionChecklistNotesStruct,\n\tBaseActionChecklistNotesStruct,\n\tActionChecklistNotesId,\n\tActionChecklistPriorityId,\n} from \"../../data/_config/shape\"\n\n/**\n * Possible action item groups\n *\n * @export\n * @type\n */\nexport type PossibleActionItems =\n\t| \"cashInActions\"\n\t| \"cashOutActions\"\n\t| \"planningBusiness\"\n\t| \"recordKeeping\"\n\t| \"funding\"\n\t| \"managing\"\n\t| \"planningCommitments\"\n\t| \"tracking\"\n\t| \"transition\"\n\n/**\n * Actions that can be performed for state changes\n *\n * @export\n * @enum {number}\n */\nexport enum ActionChecklistActionTypes {\n\tChangeHideCompleted = \"change_hide_completed\",\n\tUpdateDatabaseSync = \"change_database_sync\",\n\tAddNewActionItem = \"add_new_action_item\",\n\tUpdateActionItem = \"update_action_item\",\n\tUpdatePriorityOrder = \"update_priority_order\",\n\tRemoveActionItem = \"remove_action_item\",\n\tAddNotes = \"add_notes\",\n\tUpdateNotes = \"update_notes\",\n\tRemoveNote = \"remove_note\",\n\tBulkAddActionItems = \"bulk_add_action_items\",\n}\n\n/**\n * Data structure used when running the `UpdateDatabaseSync` action\n *\n * @export\n * @interface IUpdateDatabaseSyncPayload\n */\nexport interface IUpdateDatabaseSyncPayload {\n\tdata: ActionChecklistStruct[]\n\tpriority: ActionChecklistPriorityStruct[]\n\tnotes: ActionChecklistNotesStruct[]\n}\n\n/**\n * Data structure used when running the `AddNewActionItem` action\n *\n * @export\n * @interface IAddNewActionItemPayload\n */\nexport interface IAddNewActionItemPayload {\n\tchecklist: ActionChecklistStruct\n\tpriority: ActionChecklistPriorityId\n}\n\n/**\n * Data structure used when running the `UpdateActionItem` action\n *\n * @export\n * @interface IUpdateActionItemPayload\n */\nexport interface IUpdateActionItemPayload {\n\tdata: BaseActionChecklistStruct\n\tid: ActionChecklistId\n}\n\n/**\n * Data structure used when running the `RemoveActionItem` action\n *\n * @export\n * @interface IRemoveActionItemPayload\n */\nexport interface IRemoveActionItemPayload {\n\ttargetId: ActionChecklistId\n\tpriorityId: ActionChecklistPriorityId\n}\n\n/**\n * Data structure used when running the `UpdateNotes` action\n *\n * @export\n * @interface IUpdateNotesPayload\n */\nexport interface IUpdateNotesPayload {\n\tdata: BaseActionChecklistNotesStruct\n\tid: ActionChecklistNotesId\n}\n\nexport interface IBulkAddActionItemsPayload {\n\titems: ActionChecklistStruct[]\n\tpriorityId: ActionChecklistPriorityId\n}\n\n/**\n * Defines the type:payload type pairing\n * aka; what the structure of the payload should be\n * given a certain type\n *\n * @export\n * @type ActionChecklistReducerActions\n */\nexport type ActionChecklistReducerActions =\n\t| { type: ActionChecklistActionTypes.ChangeHideCompleted; payload: boolean }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.UpdateDatabaseSync\n\t\t\tpayload: IUpdateDatabaseSyncPayload\n\t  }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.AddNewActionItem\n\t\t\tpayload: IAddNewActionItemPayload\n\t  }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.UpdateActionItem\n\t\t\tpayload: IUpdateActionItemPayload\n\t  }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.UpdatePriorityOrder\n\t\t\tpayload: ActionChecklistPriorityStruct\n\t  }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.RemoveActionItem\n\t\t\tpayload: IRemoveActionItemPayload\n\t  }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.AddNotes\n\t\t\tpayload: ActionChecklistNotesStruct\n\t  }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.UpdateNotes\n\t\t\tpayload: IUpdateNotesPayload\n\t  }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.RemoveNote\n\t\t\tpayload: ActionChecklistNotesId\n\t  }\n\t| {\n\t\t\ttype: ActionChecklistActionTypes.BulkAddActionItems\n\t\t\tpayload: IBulkAddActionItemsPayload\n\t  }\n\n/**\n * Structure for the action checklist context\n *\n * @export\n * @interface IActionChecklistState\n */\nexport interface IActionChecklistState {\n\thideCompleted: boolean\n\tdatabaseSyced: boolean\n\tpriority: ActionChecklistPriorityStruct[]\n\tchecklistCollection: ActionChecklistStruct[]\n\tnotes: ActionChecklistNotesStruct[]\n\tdispatch: Dispatch<ActionChecklistReducerActions>\n}\n","import React, { ReactElement } from \"react\"\nimport { Box, useTheme } from \"@material-ui/core\"\n\ntype SpacerProps = {\n\tspace?: number\n}\n\n/**\n * Component used to add some additional spacing between components\n *\n * @export\n * @param {SpacerProps} { space = 2 }\n * @returns {ReactElement}\n */\nexport default function Spacer({ space = 2 }: SpacerProps): ReactElement {\n\tconst theme = useTheme()\n\treturn <Box style={{ marginTop: theme.spacing(space) }} />\n}\n"],"sourceRoot":""}